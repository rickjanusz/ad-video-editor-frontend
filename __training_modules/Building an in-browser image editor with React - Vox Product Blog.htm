<!DOCTYPE html>
<!-- saved from url=(0095)https://product.voxmedia.com/2020/10/23/21520222/building-an-in-browser-image-editor-with-react -->
<html lang="en" class="fonts-loaded"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Building an in-browser image editor with React - Vox Product Blog</title>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="apple-mobile-web-app-title" content="Vox Product Blog">
    
    
    
      <meta property="author" content="Josh Larson">
  <meta property="article:published_time" content="2020-10-23T09:24:07-04:00">
  <meta property="article:modified_time" content="2020-10-23T09:24:07-04:00">

    

  
    <link rel="preload" href="https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-regular-italic.woff2" as="font" type="font/woff2" crossorigin="">
  

  
    <link rel="preload" href="https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-regular.woff2" as="font" type="font/woff2" crossorigin="">
  

  
    <link rel="preload" href="https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-medium-italic.woff2" as="font" type="font/woff2" crossorigin="">
  

  
    <link rel="preload" href="https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-regular-italic.woff2" as="font" type="font/woff2" crossorigin="">
  

  
    <link rel="preload" href="https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-semibold-italic.woff2" as="font" type="font/woff2" crossorigin="">
  

  
    <link rel="preload" href="https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-semibold.woff2" as="font" type="font/woff2" crossorigin="">
  

  
    <link rel="preload" href="https://cdn.vox-cdn.com/shared_fonts/voxmedia/CalibreWeb-RegularItalic.woff2" as="font" type="font/woff2" crossorigin="">
  

  
    <link rel="preload" href="https://cdn.vox-cdn.com/shared_fonts/voxmedia/CalibreWeb-Regular.woff2" as="font" type="font/woff2" crossorigin="">
  

  
    <link rel="preload" href="https://cdn.vox-cdn.com/shared_fonts/voxmedia/CalibreWeb-Bold.woff2" as="font" type="font/woff2" crossorigin="">
  


<link href="./Building an in-browser image editor with React - Vox Product Blog_files/css" rel="stylesheet" media="all"><meta id="chorus-fonts" data-cid="site/font_loader-1615482289_3255_294281" data-cdata="{&quot;version&quot;:&quot;3b71e00481aef884e45cf10d244552e6&quot;,&quot;fonts_catalog&quot;:[{&quot;slug&quot;:&quot;unison-graphik&quot;,&quot;family&quot;:&quot;graphik-regular&quot;,&quot;weight&quot;:&quot;500&quot;,&quot;style&quot;:&quot;italic&quot;,&quot;woff2_url&quot;:&quot;https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-regular-italic.woff2&quot;,&quot;woff_url&quot;:&quot;https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-regular-italic.woff&quot;},{&quot;slug&quot;:&quot;unison-graphik&quot;,&quot;family&quot;:&quot;graphik-regular&quot;,&quot;weight&quot;:&quot;500&quot;,&quot;style&quot;:&quot;normal&quot;,&quot;woff2_url&quot;:&quot;https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-regular.woff2&quot;,&quot;woff_url&quot;:&quot;https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-regular.woff&quot;},{&quot;slug&quot;:&quot;unison-graphik&quot;,&quot;family&quot;:&quot;graphik-regular&quot;,&quot;weight&quot;:&quot;600&quot;,&quot;style&quot;:&quot;italic&quot;,&quot;woff2_url&quot;:&quot;https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-medium-italic.woff2&quot;,&quot;woff_url&quot;:&quot;https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-medium-italic.woff&quot;},{&quot;slug&quot;:&quot;unison-graphik&quot;,&quot;family&quot;:&quot;graphik-regular&quot;,&quot;weight&quot;:&quot;600&quot;,&quot;style&quot;:&quot;normal&quot;,&quot;woff2_url&quot;:&quot;https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-regular-italic.woff2&quot;,&quot;woff_url&quot;:&quot;https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-regular-italic.woff&quot;},{&quot;slug&quot;:&quot;unison-graphik&quot;,&quot;family&quot;:&quot;graphik-regular&quot;,&quot;weight&quot;:&quot;700&quot;,&quot;style&quot;:&quot;italic&quot;,&quot;woff2_url&quot;:&quot;https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-semibold-italic.woff2&quot;,&quot;woff_url&quot;:&quot;https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-semibold-italic.woff&quot;},{&quot;slug&quot;:&quot;unison-graphik&quot;,&quot;family&quot;:&quot;graphik-regular&quot;,&quot;weight&quot;:&quot;700&quot;,&quot;style&quot;:&quot;normal&quot;,&quot;woff2_url&quot;:&quot;https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-semibold.woff2&quot;,&quot;woff_url&quot;:&quot;https://fonts.voxmedia.com/unison/unison_base/graphik/graphik-semibold.woff&quot;},{&quot;slug&quot;:&quot;voxmedia-calibre&quot;,&quot;family&quot;:&quot;Calibre&quot;,&quot;weight&quot;:&quot;400&quot;,&quot;style&quot;:&quot;italic&quot;,&quot;woff2_url&quot;:&quot;https://cdn.vox-cdn.com/shared_fonts/voxmedia/CalibreWeb-RegularItalic.woff2&quot;,&quot;woff_url&quot;:&quot;https://cdn.vox-cdn.com/shared_fonts/voxmedia/CalibreWeb-RegularItalic.woff&quot;},{&quot;slug&quot;:&quot;voxmedia-calibre&quot;,&quot;family&quot;:&quot;Calibre&quot;,&quot;weight&quot;:&quot;400&quot;,&quot;style&quot;:&quot;normal&quot;,&quot;woff2_url&quot;:&quot;https://cdn.vox-cdn.com/shared_fonts/voxmedia/CalibreWeb-Regular.woff2&quot;,&quot;woff_url&quot;:&quot;https://cdn.vox-cdn.com/shared_fonts/voxmedia/CalibreWeb-Regular.woff&quot;},{&quot;slug&quot;:&quot;voxmedia-calibre&quot;,&quot;family&quot;:&quot;Calibre&quot;,&quot;weight&quot;:&quot;700&quot;,&quot;style&quot;:&quot;normal&quot;,&quot;woff2_url&quot;:&quot;https://cdn.vox-cdn.com/shared_fonts/voxmedia/CalibreWeb-Bold.woff2&quot;,&quot;woff_url&quot;:&quot;https://cdn.vox-cdn.com/shared_fonts/voxmedia/CalibreWeb-Bold.woff&quot;}],&quot;font_stylesheets&quot;:[&quot;https://fonts.googleapis.com/css?family=PT+Serif:700,700i&quot;,&quot;https://fonts.voxmedia.com/unison/stylesheets/voxmediainc.3112caaa4d596a236752204159cbee77.css&quot;],&quot;font_tracker_stylesheets&quot;:[],&quot;typekit_ids&quot;:[],&quot;headline_balance_div_classes&quot;:&quot;&quot;,&quot;headline_balance_fraction&quot;:1.0}">

    <script async="" src="./Building an in-browser image editor with React - Vox Product Blog_files/unison_request"></script><script type="text/javascript" async="" src="./Building an in-browser image editor with React - Vox Product Blog_files/linkid.js"></script><script async="" src="./Building an in-browser image editor with React - Vox Product Blog_files/beacon.js"></script><script async="" src="./Building an in-browser image editor with React - Vox Product Blog_files/fbds.js"></script><script type="text/javascript" async="" src="./Building an in-browser image editor with React - Vox Product Blog_files/gtm.js"></script><script type="text/javascript" async="" src="./Building an in-browser image editor with React - Vox Product Blog_files/uwt.js"></script><script type="text/javascript" async="" src="./Building an in-browser image editor with React - Vox Product Blog_files/analytics.js"></script><script async="" src="./Building an in-browser image editor with React - Vox Product Blog_files/gtm(1).js"></script><script data-privacy-no-concern="">var chorusInitQueue=[],volume_embed_host="https://volume.vox-cdn.com";var Chorus=Chorus||{};Chorus.windowLoaded=!1,Chorus.AddScript=function(t,e){var o=document.createElement("script");o.async=!0,o.type="text/javascript",o.src=t,"function"==typeof e&&(o.onload=e);var a=document.getElementsByTagName("script")[0];return a.parentNode.insertBefore(o,a),o},Chorus.ready=function(t){"loading"!=document.readyState?t():document.addEventListener?document.addEventListener("DOMContentLoaded",t):document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&t()})},Chorus.OnLoad=function(t){if(Chorus.windowLoaded=!0)return void t();var e=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){e(),t()}},Chorus.OnLoad(function(){Chorus.windowLoaded=!0});var dataLayer=dataLayer||[];Chorus.OnLoad(function(){var t;void 0!==navigator.doNotTrack?t=navigator.doNotTrack:void 0!==window.doNotTrack?t=window.doNotTrack:void 0!==navigator.msDoNotTrack&&(t=navigator.msDoNotTrack),t=void 0!==t?/1|yes|true/.test(String(t).toLowerCase())?"true":"false":"undefined";var e={DNT:t};dataLayer.push(e)});var VoxMediaFontLoader=function(t){function e(t,e){var o=window.performance;if(o&&o.mark&&o.measure){var a=t.toLocaleLowerCase().replace(/\W+/g,"_")+(e?"_"+e:"");o.mark(a),o.measure(a+"_time","navigationStart",a)}}function o(){s.classList.add(c),e("fonts_success")}function a(){s.classList.add(c),e("fonts_fail")}function n(t){var o=[t.family,t.style,t.weight,"loaded"].join(" ");e(o)}function r(t){var e=u.font_stylesheets||[];t&&(e=e.filter(function(e){return!e.match(t)})),e.forEach(i)}function i(e){var o=t.createElement("link");o.href=e,o.rel="stylesheet",o.media="all",f.parentNode.insertBefore(o,f)}function d(e){var o,a=t,n=a.documentElement,r=setTimeout(function(){n.className=n.className.replace(/\bwf-loading\b/g,"")+" wf-inactive"},e.scriptTimeout),i=a.createElement("script"),d=!1,c=a.getElementsByTagName("script")[0];n.className+=" wf-loading",i.src="https://use.typekit.net/"+e.kitId+".js",i.async=!0,i.onload=i.onreadystatechange=function(){if(o=this.readyState,!(d||o&&"complete"!=o&&"loaded"!=o)){d=!0,clearTimeout(r);try{Typekit.load(e)}catch(t){}}},c.parentNode.insertBefore(i,c)}var c="fonts-loaded",s=t.documentElement,f=t.getElementById("chorus-fonts");if(f){var u=JSON.parse(f.getAttribute("data-cdata"));t.fonts?(r("voxmedia.com"),u.fonts_catalog.forEach(function(e){if(e.woff2_url||e.woff_url){var o=[e.woff2_url,e.woff_url].filter(function(t){return t}).map(function(t){return"url("+t+")"}).join(", "),a=new FontFace(e.family,o,{weight:e.weight,style:e.style});t.fonts.add(a),a.load().then(n)}}),t.fonts.ready.then(o,a)):r(),u.typekit_ids.forEach(function(t){d({kitId:t,scriptTimeout:3e3,async:!0})}),u.font_tracker_stylesheets.forEach(i)}};VoxMediaFontLoader(document);</script>

    <script>
  dataLayer = [{"Network":"voxmedia","Community":"product.voxmedia","root_domain":"voxmedia.com","GA Primary ID":"UA-45903948-1","GA CrossDomains":"old.voxmedia.com,voxmedia.com,voxmedia.admin.usechorus.com,auth.voxmedia.com,design.voxmedia.com,voxmedia.sso.usechorus.com,marketing.voxmedia.com,storytelling.voxmedia.com,product.voxmedia.com","Content ID":"21284263","Story Word Count":2831,"Entry Groups":"front-page:development:projects","articleSection":"Development","Author":"Josh Larson","Last Time Updated":"2020-10-25 21:50","Hour of Update":"21","Publish Date":"2020-10-23 09:24","Hour of Publish":"09","Evergreen URL":"dated","Demand Post":"no","All Chorus Categories":"voxmedia:product.voxmedia:front-page:development:projects","Content Type":"feature","chartbeat_domain":"product.voxmedia.com","chartbeat_zone":"172968584/voxmediainc/product.voxmedia.com/development","chartbeat_authors":"Josh Larson","Logged in Status":"Logged Out","auth0_id":"No Auth0 ID","enable_url_cleaning":true}];
</script>


<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W8JKW6');</script>
<!-- End Google Tag Manager -->


    
      <link href="./Building an in-browser image editor with React - Vox Product Blog_files/chorus.css" data-chorus-theme="chorus" rel="stylesheet" media="all">

    <meta name="style-tools" content="https://www.voxmedia.com/style/community/437/25ceb7c71ea201d21a4393e2c6f703f7/tools.css">
    
    
    <script>
chorusInitQueue.push(function() {
  if (document.querySelector('.c-group-with-description') !== null) {
    var updateBreakerLink = document.querySelector(".c-group-with-description__more");
    var updateBreakerLinkAlt = document.querySelector(".c-group-with-description__more--alt");
    updateBreakerLink.innerHTML = "View All";
    updateBreakerLinkAlt.innerHTML = "View All";
  }
});
</script>
    <meta name="description" content="How we enable Concert Ad Manager users to upload, crop, zoom, and optimize their images — completely in-browser without any external services.">
<link rel="canonical" href="https://product.voxmedia.com/2020/10/23/21520222/building-an-in-browser-image-editor-with-react">
<meta property="og:description" content="How we enable Concert Ad Manager users to upload, crop, zoom, and optimize their images — completely in-browser without any external services.">
<meta property="fb:app_id" content="549923288395304">
<meta property="og:image" content="https://cdn.vox-cdn.com/thumbor/DKbp1LvRp00r97tbd_d1dBLe-E0=/0x36:3360x1795/fit-in/1200x630/cdn.vox-cdn.com/uploads/chorus_asset/file/21968120/ad_builder.jpg">
<meta property="og:image:height" content="630">
<meta property="og:image:width" content="1200">
<meta property="og:site_name" content="Vox Product Blog">
<meta property="og:title" content="Building an in-browser image editor with React">
<meta property="og:type" content="article">
<meta property="og:url" content="https://product.voxmedia.com/2020/10/23/21520222/building-an-in-browser-image-editor-with-react">

      <meta name="twitter:card" content="summary_large_image">
      <meta name="twitter:url" content="https://product.voxmedia.com/2020/10/23/21520222/building-an-in-browser-image-editor-with-react">
      <meta name="twitter:title" content="Building an in-browser image editor with React">
      <meta name="twitter:description" content="How we enable Concert Ad Manager users to upload, crop, zoom, and optimize their images — completely in-browser without any external services.">
      <meta name="twitter:image" content="https://cdn.vox-cdn.com/thumbor/rSMrQGr0jk_HMkm-4WEM7uYnK28=/0x75:3360x1755/fit-in/1200x600/cdn.vox-cdn.com/uploads/chorus_asset/file/21968120/ad_builder.jpg">
      <meta name="twitter:site" content="VoxProduct">
    
    
  <link rel="shortcut icon" href="https://cdn.vox-cdn.com/uploads/chorus_asset/file/19351758/favicon.0.ico">


  
    <link rel="icon" type="image/png" href="https://cdn.vox-cdn.com/uploads/chorus_asset/file/19351759/favicon-16x16.0.png" sizes="16x16">
  

  
    <link rel="icon" type="image/png" href="https://cdn.vox-cdn.com/uploads/chorus_asset/file/19351760/favicon-32x32.0.png" sizes="32x32">
  

  
    <link rel="icon" type="image/png" href="https://cdn.vox-cdn.com/uploads/chorus_asset/file/19351762/favicon-96x96.0.png" sizes="96x96">
  


  
    <link rel="icon" type="image/png" href="https://cdn.vox-cdn.com/uploads/chorus_asset/file/19351763/android-icon-192x192.0.png" sizes="192x192">
  


  
    <link rel="apple-touch-icon" href="https://cdn.vox-cdn.com/uploads/chorus_asset/file/19351764/apple-icon-180x180.0.png" sizes="180x180">
  


  <meta name="msapplication-TileImage" content="https://cdn.vox-cdn.com/uploads/chorus_asset/file/19351766/ms-icon-144x144.0.png">
  <meta name="msapplication-TileColor" content="#4d7f38">
  <meta name="theme-color" content="">


    <meta data-chorus-version="aff5ec1fef2f255d192977afdde02e889b121bc3">

    
    <link rel="alternate" type="application/rss+xml" title="Vox Product Blog" href="https://product.voxmedia.com/rss/index.xml">
    
      <script type="application/ld+json">
  {"@context":"http://schema.org","@type":"NewsArticle","mainEntityOfPage":"https://product.voxmedia.com/2020/10/23/21520222/building-an-in-browser-image-editor-with-react","url":"https://product.voxmedia.com/2020/10/23/21520222/building-an-in-browser-image-editor-with-react","headline":"Building an in-browser image editor with React","description":"How we enable Concert Ad Manager users to upload, crop, zoom, and optimize their images — completely in-browser without any external services.","speakable":{"@type":"SpeakableSpecification","xpath":["/html/head/title","/html/head/meta[@name='description']/@content"]},"datePublished":"2020-10-23T09:24:07-04:00","dateModified":"2020-10-23T09:24:07-04:00","author":[{"@type":"Person","name":"Josh Larson"}],"publisher":{"@type":"Organization","name":"Vox Product Blog","logo":{"@type":"ImageObject","url":"","width":"","height":""}},"articleSection":"Development","keywords":["Front Page","Development","Projects"],"image":[{"@type":"ImageObject","url":"https://cdn.vox-cdn.com/thumbor/MzLh0Z0SRX7AMQIfy54xNWzqg6Y=/1400x1400/filters:format(jpeg)/cdn.vox-cdn.com/uploads/chorus_asset/file/21968120/ad_builder.jpg","width":1400,"height":1400},{"@type":"ImageObject","url":"https://cdn.vox-cdn.com/thumbor/6pbY3GClyMkgPP-SqydSpjg0pVY=/1400x1050/filters:format(jpeg)/cdn.vox-cdn.com/uploads/chorus_asset/file/21968120/ad_builder.jpg","width":1400,"height":1050},{"@type":"ImageObject","url":"https://cdn.vox-cdn.com/thumbor/GtensPwxz7Uk1Mxx02moibRCDaw=/1400x788/filters:format(jpeg)/cdn.vox-cdn.com/uploads/chorus_asset/file/21968120/ad_builder.jpg","width":1400,"height":788}],"thumbnailUrl":"https://cdn.vox-cdn.com/thumbor/MzLh0Z0SRX7AMQIfy54xNWzqg6Y=/1400x1400/filters:format(jpeg)/cdn.vox-cdn.com/uploads/chorus_asset/file/21968120/ad_builder.jpg"}
</script>


    
  <style id="full-bleed-style">.fullbleed-block, .p-fullbleed-block{max-width:none !important;margin-left:-472px !important;width:1674px !important;}</style></head>
  <!--[if lte IE 9]><body class="ie9"><![endif]-->
  <!--[if gte IE 10]><body class="ie"><![endif]-->
  <body class="entry_key_unison_overlay entry_layout_unison_main entry_template_minimal content-needs-margin" data-entry-id="21284263">
    <a class="sr-only link-skip" href="https://product.voxmedia.com/2020/10/23/21520222/building-an-in-browser-image-editor-with-react#content">Skip to main content</a>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W8JKW6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    
    
      <svg width="0" height="0" style="position:absolute;display:none;"><symbol viewBox="90 0 689 645" id="icon-clock" xmlns="http://www.w3.org/2000/svg"><title>clock</title>
<path d="M489.1 322.5c0 15-5.4 27.9-16 38.6-10.7 10.7-23.6 16-38.6 16-23.7 0-40.3-10.9-49.9-32.8h-125c-6.4 0-11.6-2.1-15.7-6.1-4-4.1-6.1-9.3-6.1-15.7 0-6.4 2.1-11.6 6.1-15.7 4.1-4.1 9.4-6.1 15.8-6.1h125c5.9-13.2 15.3-22.5 28-28V125.8c0-6.4 2.1-11.6 6.1-15.7 4.1-4.1 9.3-6.1 15.7-6.1 6.4 0 11.6 2 15.7 6.1s6.1 9.3 6.1 15.7v146.8c21.9 9.5 32.9 26.1 32.8 49.9zm-54.6-306c84.2 0 156.3 29.9 216.2 89.8 59.9 59.9 89.8 131.9 89.8 216.2s-29.9 156.3-89.8 216.2c-59.9 59.9-131.9 89.8-216.2 89.8s-156.3-29.9-216.2-89.8c-59.9-59.9-89.8-131.9-89.8-216.2s29.9-156.3 89.8-216.2c59.9-59.9 132-89.8 216.2-89.8zm0 546.4c66.5 0 123.2-23.4 170.1-70.4 46.9-46.9 70.4-103.6 70.4-170.1s-23.4-123.2-70.4-170.1C557.7 105.5 501 82.1 434.5 82.1s-123.2 23.4-170.1 70.4C217.5 199.4 194 256.1 194 322.6s23.4 123.2 70.4 170.1c46.9 46.8 103.6 70.2 170.1 70.2z"></path></symbol><symbol viewBox="0 0 1000 1000" id="icon-close" xmlns="http://www.w3.org/2000/svg"><path d="M638.6 500l322.7-322.7c38.3-38.3 38.3-100.3 0-138.6S861 .4 822.7 38.7L500 361.4 177.3 38.7C139 .4 77 .4 38.7 38.7S.4 139 38.7 177.3L361.4 500 38.7 822.7C.4 861 .4 923 38.7 961.3 57.9 980.4 82.9 990 108 990s50.1-9.6 69.3-28.7L500 638.6l322.7 322.7c19.1 19.1 44.2 28.7 69.3 28.7 25.1 0 50.1-9.6 69.3-28.7 38.3-38.3 38.3-100.3 0-138.6L638.6 500z"></path></symbol><symbol viewBox="0 0 14 14" id="icon-close-map" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M13.074 12.27L7.698 6.958l5.376-5.312-.896-.896-5.312 5.376L1.554.75l-.896.864 5.376 5.312L.658 12.27l.896.896L6.898 7.79l5.312 5.376z"></path></symbol><symbol viewBox="0 0 18 17" id="icon-comment" xmlns="http://www.w3.org/2000/svg"><path d="M15.667 6.654c0 3.532-3.432 6.397-7.667 6.397-.945 0-1.85-.14-2.686-.4l-4.406 2.1 1.725-3.52c-1.42-1.16-2.3-2.78-2.3-4.56C.333 3.12 3.765.257 8 .257c4.235 0 7.667 2.863 7.667 6.4z"></path></symbol><symbol viewBox="-135.7 744.2 1008.1 429.7" id="icon-down" xmlns="http://www.w3.org/2000/svg"><path d="M872.3 788.5c0 12.1-5.1 25.2-18.2 35.3l-446 335c-12.1 10.1-28.3 15.2-40.4 15.2-15.2 0-28.3-5.1-40.4-15.2l-446.1-335c-18.2-15.2-22.2-40.4-10.1-60.5s40.4-22.2 58.5-10.1l439.1 330.9 435.9-331c18.2-15.2 45.4-10.1 58.5 10.1 7.2 8.1 9.2 15.1 9.2 25.3"></path></symbol><symbol viewBox="0 0 50.062 37.479" id="icon-email" xmlns="http://www.w3.org/2000/svg"><path d="M25.085 21.866L.082 3.114A3.114 3.114 0 0 1 3.207-.012H46.96a3.113 3.113 0 0 1 3.126 3.126l-25 18.752zm0 5.613L50.087 8.726v25.64a3.113 3.113 0 0 1-3.125 3.125H3.208a3.113 3.113 0 0 1-3.125-3.125V8.727L25.085 27.48z" class="afshape-1"></path></symbol><symbol viewBox="0 0 21.406 43.754" id="icon-facebook" xmlns="http://www.w3.org/2000/svg"><path d="M5.43 43.754v-20.53H0V15.83h5.43V9.518C5.43 4.558 8.635 0 16.024 0c2.99 0 5.204.286 5.204.286l-.175 6.903s-2.257-.03-4.72-.03c-2.663 0-3.09 1.23-3.09 3.26v5.4h8.022l-.35 7.39h-7.672v20.53H5.43z"></path></symbol><symbol viewBox="0 0 140 200" id="icon-foursquare" xmlns="http://www.w3.org/2000/svg"><path d="M114.697 27.581l-4.278 22.294c-.511 2.41-3.545 4.945-6.358 4.945h-39.7c-4.467 0-7.664 3.045-7.664 7.508v4.86c0 4.467 3.216 7.632 7.686 7.632h33.681c3.154 0 6.25 3.459 5.568 6.826-.685 3.373-3.886 20.08-4.271 21.924-.387 1.846-2.5 5-6.25 5H65.618c-5.007 0-6.521.654-9.87 4.818-3.353 4.166-33.477 40.342-33.477 40.342-.305.35-.603.249-.603-.134V27.25c0-2.85 2.478-6.194 6.194-6.194h81.78c3.01 0 5.822 2.829 5.055 6.525m3.59 87.418c1.137-4.602 13.899-69.93 18.16-90.656M120.716 0H18.809C4.745 0 .61 10.575.61 17.235v161.916c0 7.503 4.032 10.285 6.296 11.203 2.267.919 8.519 1.692 12.266-2.632 0 0 48.111-55.826 48.938-56.652 1.25-1.25 1.25-1.25 2.5-1.25h31.127c13.08 0 15.183-9.327 16.549-14.821 1.137-4.602 13.899-69.93 18.16-90.656C139.699 8.526 135.681 0 120.716 0"></path></symbol><symbol viewBox="-295 387 20 20" id="icon-full-screen" xmlns="http://www.w3.org/2000/svg"><path fill="#ccc" d="M-275 387.7c0-.2-.1-.4-.2-.5-.1-.1-.3-.2-.5-.2h-5.5c-.4 0-.7.3-.7.7 0 .4.4.8.6 1l1.4 1.4-3.9 3.9 1.9 1.9 3.9-3.9 1.4 1.4c.3.3.6.6 1 .6s.7-.3.7-.7l-.1-5.6zm-13.1 10.5l-3.9 4-1.4-1.4c-.3-.3-.6-.6-1-.6s-.6.3-.6.6v5.4c0 .2.1.4.2.5.1.1.3.2.5.2h5.4c.4 0 .6-.3.6-.6 0-.4-.4-.8-.6-.9l-1.4-1.4 4-3.9-1.8-1.9z"></path></symbol><symbol viewBox="-295 387 20 20" id="icon-full-screen-exit" xmlns="http://www.w3.org/2000/svg"><path fill="#ccc" d="M-293.2 406.9l3.9-4 1.4 1.4c.3.3.6.6 1 .6s.6-.3.6-.6v-5.4c0-.2-.1-.4-.2-.5-.1-.1-.3-.2-.5-.2h-5.4c-.4 0-.6.3-.6.6 0 .4.4.8.6.9l1.4 1.4-4 3.9 1.8 1.9zM-276.91 387.05l-3.9 4-1.4-1.4c-.3-.3-.6-.6-1-.6s-.6.3-.6.6v5.4c0 .2.1.4.2.5.1.1.3.2.5.2h5.4c.4 0 .6-.3.6-.6 0-.4-.4-.8-.6-.9l-1.4-1.4 4-3.9-1.8-1.9z"></path></symbol><symbol viewBox="0 0 39.605 39.633" id="icon-google-plus" xmlns="http://www.w3.org/2000/svg"><path d="M12.488 37.682c-4.69 0-8.08-2.97-8.08-6.537 0-3.496 3.976-6.51 8.667-6.46a10.21 10.21 0 0 1 3.04.488c2.547 1.77 4.6 2.876 5.117 4.894.096.41.15.83.15 1.26 0 3.567-2.3 6.355-8.894 6.355m1.233-21.46c-3.14-.093-6.14-2.982-6.68-7.116-.54-4.136 1.57-7.3 4.72-7.206 3.15.094 5.84 3.486 6.39 7.62.55 4.136-1.27 6.797-4.41 6.703m6.75 6.457c-1.08-.813-3.44-2.478-3.44-3.596 0-1.31.38-1.955 2.35-3.495 2.03-1.58 3.46-3.67 3.46-6.25 0-2.82-1.15-5.37-3.31-6.61h3.06L25.2 0H13.51C7.584 0 2.644 4.37 2.644 9.18c0 4.912 3.246 8.83 8.82 8.83.388 0 .764-.02 1.133-.048-.36.694-.62 1.467-.62 2.277 0 1.36.75 2.14 1.68 3.04-.702 0-1.38.02-2.12.02C4.75 23.3 0 27.97 0 32.46c0 4.412 5.726 7.173 12.513 7.173 7.737 0 12.495-4.39 12.495-8.8 0-3.54-.764-5.32-4.536-8.15M31.52.54v5.388h-5.388v2.695h5.39v5.39h2.694v-5.39h5.39V5.928h-5.39V.538"></path></symbol><symbol viewBox="0 0 105.4 105.7" class="alinline-svg" id="icon-grid" xmlns="http://www.w3.org/2000/svg"><path fill="#ccc" d="M0 0h47.7v47.7H0z" class="alshape-1"></path><path fill="#ccc" d="M57.7 0h47.7v47.7H57.7z" class="alshape-2"></path><path fill="#ccc" d="M0 58h47.7v47.7H0z" class="alshape-3"></path><path fill="#ccc" d="M57.7 58h47.7v47.7H57.7z" class="alshape-4"></path></symbol><symbol viewBox="0 0 64.37 40.34" id="icon-hamburger" xmlns="http://www.w3.org/2000/svg"><path class="amcls-1" d="M0 30h64.37v10.34H0zm0-15h64.37v10.34H0zM0 0h64.37v10.34H0z"></path></symbol><symbol viewBox="0 0 671.78668 671.78668" id="icon-instagram" xmlns="http://www.w3.org/2000/svg"><g transform="matrix(.13333 0 0 -.13333 0 671.787)"><path d="M2519.21 5038.41c-684.18 0-769.97-2.9-1038.67-15.16-268.14-12.23-451.27-54.82-611.513-117.09-165.66-64.38-306.148-150.52-446.203-290.57-140.051-140.05-226.191-280.55-290.57-446.21-62.273-160.24-104.86-343.37-117.098-611.51C2.898 3289.17 0 3203.38 0 2519.2c0-684.17 2.898-769.96 15.156-1038.66 12.239-268.14 54.825-451.27 117.098-611.509 64.379-165.66 150.519-306.152 290.57-446.211 140.055-140.05 280.543-226.191 446.203-290.57C1029.27 69.98 1212.4 27.39 1480.54 15.16 1749.24 2.902 1835.03 0 2519.21 0c684.17 0 769.96 2.902 1038.66 15.16 268.14 12.23 451.27 54.82 611.51 117.09 165.66 64.379 306.15 150.52 446.21 290.57 140.05 140.059 226.19 280.551 290.57 446.211 62.27 160.239 104.86 343.369 117.09 611.509 12.26 268.7 15.16 354.49 15.16 1038.66 0 684.18-2.9 769.97-15.16 1038.67-12.23 268.14-54.82 451.27-117.09 611.51-64.38 165.66-150.52 306.16-290.57 446.21-140.06 140.05-280.55 226.19-446.21 290.57-160.24 62.27-343.37 104.86-611.51 117.09-268.7 12.26-354.49 15.16-1038.66 15.16zm0-453.91c672.65 0 752.33-2.57 1017.97-14.69 245.62-11.2 379.01-52.24 467.78-86.74 117.59-45.7 201.51-100.29 289.66-188.44 88.16-88.16 142.75-172.08 188.45-289.67 34.5-88.77 75.54-222.16 86.74-467.78 12.12-265.64 14.69-345.32 14.69-1017.98 0-672.65-2.57-752.33-14.69-1017.97-11.2-245.62-52.24-379.01-86.74-467.78-45.7-117.591-100.29-201.509-188.45-289.661-88.15-88.16-172.07-142.75-289.66-188.449-88.77-34.5-222.16-75.539-467.78-86.738-265.6-12.122-345.27-14.692-1017.97-14.692-672.71 0-752.37 2.57-1017.98 14.692-245.62 11.199-379.01 52.238-467.78 86.738-117.591 45.699-201.509 100.289-289.661 188.449-88.152 88.152-142.75 172.07-188.449 289.661-34.5 88.77-75.535 222.16-86.742 467.78-12.121 265.64-14.688 345.32-14.688 1017.97 0 672.66 2.567 752.34 14.688 1017.98 11.207 245.62 52.242 379.01 86.742 467.78 45.699 117.59 100.293 201.51 188.445 289.66 88.156 88.16 172.074 142.75 289.665 188.45 88.77 34.5 222.16 75.54 467.78 86.74 265.64 12.12 345.32 14.69 1017.98 14.69"></path><path d="M2519.21 1679.47c-463.78 0-839.74 375.96-839.74 839.73 0 463.78 375.96 839.74 839.74 839.74 463.77 0 839.73-375.96 839.73-839.74 0-463.77-375.96-839.73-839.73-839.73zm0 2133.38c-714.47 0-1293.65-579.18-1293.65-1293.65 0-714.46 579.18-1293.64 1293.65-1293.64 714.46 0 1293.64 579.18 1293.64 1293.64 0 714.47-579.18 1293.65-1293.64 1293.65M4166.27 3863.96c0-166.96-135.35-302.3-302.31-302.3-166.95 0-302.3 135.34-302.3 302.3s135.35 302.31 302.3 302.31c166.96 0 302.31-135.35 302.31-302.31"></path></g></symbol><symbol viewBox="-27.7 455.1 337.2 791.1" id="icon-left" xmlns="http://www.w3.org/2000/svg"><path fill="inherit" d="M274.8 1246.2c-9.5 0-19.8-4-27.7-14.3l-262.9-350c-7.9-9.5-11.9-22.2-11.9-31.7 0-11.9 4-22.2 11.9-31.7l262.9-350.1c11.9-14.3 31.7-17.4 47.5-7.9 15.8 9.5 17.4 31.7 7.9 45.9L42.8 851l259.8 342.1c11.9 14.3 7.9 35.6-7.9 45.9-6.4 5.6-11.9 7.2-19.9 7.2"></path></symbol><symbol viewBox="0 0 18 18" id="icon-link" xmlns="http://www.w3.org/2000/svg"><g opacity=".4"><path d="M10.546 13.732l.623-.623a.957.957 0 0 0 .121-.137c.263-.273.48-.582.65-.905a4.44 4.44 0 0 0 .46-2.733 3.766 3.766 0 0 0-.158-.692 3.61 3.61 0 0 0-.244-.604 4.355 4.355 0 0 0-.877-1.245 4.35 4.35 0 0 0-1.245-.876l-1.14 1.14c-.08.08-.146.163-.204.256a2.735 2.735 0 0 1 2.07 2.07c.044.21.066.426.06.644a2.601 2.601 0 0 1-.765 1.81l-.69.689-.513.513-.485.485-1.237 1.237c-1.037 1.037-2.737 1.024-3.79-.029-1.052-1.052-1.064-2.753-.028-3.789L4.39 9.706a5.663 5.663 0 0 1-.208-2.338L1.881 9.67c-1.73 1.73-1.709 4.56.048 6.316 1.757 1.757 4.586 1.778 6.316.048l2.302-2.302z"></path><path d="M7.339 7.802a2.54 2.54 0 0 1 .1-.668c.114-.42.339-.814.665-1.14l.693-.694.51-.51.48-.48 1.242-1.241c1.036-1.036 2.736-1.024 3.789.029 1.052 1.052 1.064 2.753.029 3.789l-1.241 1.24c.233.76.302 1.556.211 2.335l2.303-2.303c1.73-1.73 1.708-4.558-.049-6.315C14.314.087 11.485.066 9.756 1.796L7.453 4.098l-.623.623a.934.934 0 0 0-.121.138 3.904 3.904 0 0 0-.645.9 4.39 4.39 0 0 0-.46 2.733c.028.244.08.472.153.696.065.206.142.41.245.604.209.452.503.87.877 1.244.373.374.791.668 1.244.878l1.14-1.141a1.38 1.38 0 0 0 .204-.256 2.68 2.68 0 0 1-1.335-.734 2.685 2.685 0 0 1-.793-1.98z"></path></g></symbol><symbol viewBox="0 0 16 16" id="icon-linkedin" xmlns="http://www.w3.org/2000/svg"><path d="M.2 15.876h3.394V5.222H.2v10.654zM1.997 0C.8 0 0 .836 0 1.88s.8 1.88 1.997 1.88 1.997-.836 1.997-1.88C3.794.836 2.994 0 1.997 0zm9.985 4.804c-1.798 0-2.596 1.045-2.996 1.88V5.222H5.392c.2 1.045 0 10.862 0 10.862h3.395V9.818c0-.21 0-.627.2-.836.2-.626.798-1.253 1.796-1.253 1.2 0 1.798 1.04 1.798 2.5v5.64h3.4V9.82c0-3.342-1.79-5.014-3.99-5.014z"></path></symbol><symbol viewBox="0 0 35.4 51" id="icon-map-marker" xmlns="http://www.w3.org/2000/svg"><path d="M18 51.733c11.8-15.9 17.7-27.1 17.7-33.5 0-9.7-7.9-17.5-17.7-17.5S.3 8.533.3 18.233c0 6.4 5.9 17.6 17.7 33.5z"></path><circle r="8" cy="18" cx="18" fill="#fff"></circle></symbol><symbol viewBox="-375 489.5 37.2 30.3" id="icon-menu" xmlns="http://www.w3.org/2000/svg"><title>menu</title>
<path d="M-367 489.5h29.1v3.8H-367zm-8 0h4.4v3.8h-4.4zm8 12.8h29.1v3.8H-367zm-8 0h4.4v3.8h-4.4zm8 13.7h29.1v3.8H-367zm-8 0h4.4v3.8h-4.4z"></path></symbol><symbol viewBox="0 0 179 96" id="icon-more" xmlns="http://www.w3.org/2000/svg"><title>more-arrow</title>
<path d="M178.86 47.677L129.776 0v34.313H0v26.625h116.296v.103h13.48v34.31l49.084-47.67"></path></symbol><symbol viewBox="0 0 50.062 37.479" id="icon-newsletter_signup" xmlns="http://www.w3.org/2000/svg"><path d="M25.085 21.866L.082 3.114A3.114 3.114 0 0 1 3.207-.012H46.96a3.113 3.113 0 0 1 3.126 3.126l-25 18.752zm0 5.613L50.087 8.726v25.64a3.113 3.113 0 0 1-3.125 3.125H3.208a3.113 3.113 0 0 1-3.125-3.125V8.727L25.085 27.48z" class="aushape-1"></path></symbol><symbol viewBox="0 0 832 512" id="icon-norgie-down" xmlns="http://www.w3.org/2000/svg"><path d="M15.244 98.497L379.433 495.43c20.249 22.24 53.137 22.23 73.373-.021.51-.608.71-1.47 1.25-2.077L817.152 98.259c20.233-22.224 20.223-58.326-.028-80.54-.202-.1-.531-.202-.735-.404C807.065 6.732 793.993-.005 779.353 0L52.923.208C38.073.212 24.903 7.286 15.43 18.18l-.2-.227c-20.314 22.325-20.304 58.33.023 80.543h-.008z"></path></symbol><symbol viewBox="0 0 512 832.328" id="icon-norgie-right" xmlns="http://www.w3.org/2000/svg"><path d="M98.278 817.088l397.038-364.076c22.245-20.243 22.245-53.13 0-73.373-.608-.51-1.47-.71-2.077-1.25L98.27 15.18c-22.218-20.24-58.32-20.24-80.54.005-.1.202-.202.53-.404.734C6.74 25.24 0 38.31 0 52.95v726.43c0 14.85 7.07 28.022 17.963 37.5l-.228.2c22.32 20.32 58.324 20.32 80.543 0z"></path></symbol><symbol viewBox="0 0 47.3 34.3" id="icon-opentable" xmlns="http://www.w3.org/2000/svg"><path d="M30.1 0C20.7 0 13 7.7 13 17.2s7.7 17.2 17.2 17.2 17.2-7.7 17.2-17.2C47.3 7.7 39.6 0 30.1 0zm0 21.5c-2.4 0-4.3-1.9-4.3-4.3s1.9-4.3 4.3-4.3 4.3 1.9 4.3 4.3c0 2.3-1.9 4.3-4.3 4.3zM0 17.2c0 2.4 1.9 4.3 4.3 4.3s4.3-1.9 4.3-4.3-1.9-4.3-4.3-4.3S0 14.8 0 17.2"></path></symbol><symbol viewBox="0 0 12 12" id="icon-pencil" xmlns="http://www.w3.org/2000/svg"><path d="M1.3 8.4c0 .1 0 .1 0 0L0 11.6c0 .1 0 .2.1.3 0 .1.1.1.1.1h.1l3.1-1.2s.1 0 .1-.1l6.2-6.2-2.2-2.3-6.2 6.2zm10.5-7L10.6.2c-.3-.3-.8-.3-1.1 0L8.2 1.5l2.2 2.2 1.3-1.3c.4-.2.4-.7.1-1z"></path></symbol><symbol viewBox="0 0 60.7 93.3" id="icon-pin" xmlns="http://www.w3.org/2000/svg"><path d="M57.2 34.6c0 4.8-1.3 9.3-3.5 13.2L31.8 87.5c-.3.5-.9.8-1.5.8-.7 0-1.2-.4-1.5-.8L6.9 47.7c-2.2-3.8-3.5-8.4-3.5-13.2 0-14.8 12-26.9 26.9-26.9 14.9.1 26.9 12.1 26.9 27zm-16.8 0c0-5.6-4.5-10.1-10.1-10.1S20.2 29 20.2 34.6s4.5 10.1 10.1 10.1 10.1-4.5 10.1-10.1z" xmlns="http://www.w3.org/2000/svg"></path></symbol><symbol viewBox="-285 377 40 40" id="icon-pinterest" xmlns="http://www.w3.org/2000/svg"><path d="M-265 377.1c-10.9 0-19.7 8.9-19.7 19.8 0 8.1 4.9 15 11.8 18.1-.1-1.4 0-3 .3-4.5.4-1.6 2.5-10.8 2.5-10.8s-.6-1.3-.6-3.1c0-2.9 1.7-5.1 3.8-5.1 1.8 0 2.7 1.3 2.7 3 0 1.8-1.2 4.5-1.7 7-.5 2.1 1 3.8 3.1 3.8 3.7 0 6.3-4.8 6.3-10.5 0-4.3-2.9-7.6-8.2-7.6-6 0-9.7 4.5-9.7 9.5 0 1.7.5 2.9 1.3 3.9.4.4.4.6.3 1.1l-.4 1.6c-.1.5-.5.7-1 .5-2.8-1.1-4-4.1-4-7.5 0-5.6 4.7-12.3 14.1-12.3 7.5 0 12.5 5.5 12.5 11.3 0 7.7-4.3 13.5-10.7 13.5-2.1 0-4.1-1.2-4.8-2.5 0 0-1.1 4.5-1.4 5.4-.4 1.5-1.2 3-2 4.2 1.8.5 3.7.8 5.6.8 10.9 0 19.7-8.8 19.7-19.7 0-11-8.9-19.9-19.8-19.9z"></path></symbol><symbol viewBox="-230 372 50 50" id="icon-play" xmlns="http://www.w3.org/2000/svg"><path fill="#999" d="M-214 376l25.6 21.1L-214 418v-42z"></path></symbol><symbol viewBox="0 0 17 17" id="icon-rec" xmlns="http://www.w3.org/2000/svg"><path d="M7.544.405l2.305 4.64 5.15.743L11.27 9.4l.88 5.1-4.61-2.407-4.6 2.407.88-5.1L.087 5.79l5.153-.744L7.545.404z"></path></symbol><symbol viewBox="0 0 450 386" id="icon-refresh" xmlns="http://www.w3.org/2000/svg"><path d="M352.629 288.14l96-111.9h-64.7c-2.3-27.9-10.5-54-23.5-77.3-27.4-49.2-75.8-85.1-133-95.6-.7-.1-1.5-.3-2.2-.4-.5-.1-.9-.2-1.4-.2-10.1-1.7-20.6-2.6-31.2-2.6h-.4c-90.9.2-167 63.6-186.7 148.6v.1c-.3 1.1-.5 2.2-.7 3.3-.1.5-.2.9-.3 1.4-.1.7-.3 1.4-.4 2.1-.2.9-.3 1.7-.5 2.6-.1.4-.1.7-.2 1.1l-.6 3.6v.2c-1 6.3-1.6 12.7-1.9 19.1v.8c-.1 1.4-.1 2.7-.2 4.1 0 1.6-.1 3.3-.1 5 0 1.7 0 3.3.1 5 0 1.4.1 2.7.2 4.1v.9c.3 6.5 1 12.9 1.9 19.1v.2l.6 3.6c.1.4.1.7.2 1.1.2.9.3 1.8.5 2.6.1.7.3 1.4.4 2.1.1.5.2 1 .3 1.4.2 1.1.5 2.2.7 3.2v.1c19.7 85 96.1 148.4 187.1 148.6 42.9-.1 83.1-14.2 116.9-40.7l7.5-5.9-43.2-46.2-6.2 4.6c-22.1 16.3-47.5 24.2-75 24.2-70.6 0-128-57-128-128s57.4-128 128-128c66.4 0 122.8 46.6 129.5 112h-73.5l104 112z" xmlns:bx="https://boxy-svg.com" bx:origin="0.5 0.5"></path></symbol><symbol viewBox="-27.7 455.1 337.2 791.1" id="icon-right" xmlns="http://www.w3.org/2000/svg"><path fill="inherit" d="M6.9 455.1c9.5 0 19.8 4 27.7 14.3l262.9 350.1c7.9 9.5 11.9 22.2 11.9 31.7 0 11.9-4 22.2-11.9 31.7l-262.8 350c-11.9 14.3-31.7 17.4-47.5 7.9-15.8-9.5-17.4-31.7-7.9-45.9L239 850.3-20.8 508.2c-11.9-14.3-7.9-35.6 7.9-45.9 6.4-5.6 11.9-7.2 19.8-7.2"></path></symbol><symbol viewBox="0 0 1000 1000" preserveAspectRatio="xMinYMin meet" id="icon-rss" xmlns="http://www.w3.org/2000/svg"><path d="M0 866q0-55 39-94t94-39 94 39 39 94q0 56-39 94.5T133 999t-94-39-39-94zm0-335V340q179 0 331 88.5T571.5 669t88.5 331H468q0-194-137-331Q193 531 0 531zm0-339V0q203 0 388 79.5T707 293t213.5 319 79.5 388H808q0-164-64-314T571.5 428t-258-172T0 192z"></path></symbol><symbol viewBox="373.3 133.3 533.3 533.3" id="icon-search" xmlns="http://www.w3.org/2000/svg"><path d="M754.7 468.7l-22.3-22.3c24.3-33.3 37.5-73.4 37.7-114.7 0-109.5-88.8-198.3-198.3-198.3s-198.3 88.8-198.3 198.3S462.1 530 571.7 530c41.2-.2 81.3-13.4 114.7-37.7l22.3 22.3 152.7 152 45.3-45.3-152-152.6zm-183 0c-75.8 0-137.3-61.5-137.3-137.3S495.8 194 571.7 194 709 255.5 709 331.3c.2 75.7-61 137.1-136.7 137.3-.2.1-.4.1-.6.1z"></path></symbol><symbol viewBox="206 29.9 642.1 681.3" id="icon-settings" xmlns="http://www.w3.org/2000/svg"><path d="M843 467.2c4.8 3.2 6.3 9.5 4 15-13.5 41.2-36.4 79.2-64.2 111.7-4 4.8-9.5 6.3-15 4l-81.6-28.5c-20.6 16.6-43.6 30.1-67.3 39.6l-16.6 84.7c-.8 5.5-5.5 10.3-11.1 11.1-21.4 4-42.8 6.3-64.2 6.3-22.2 0-43.6-2.4-64.2-6.3-5.5-.8-10.3-5.5-11.1-11.1L435.2 609c-24.6-9.5-48.3-23-67.3-39.6l-81.6 28.5c-5.5 2.4-11.1.8-15-4-28.5-32.5-51.5-70.5-64.2-111.7-2.4-5.5-.8-11.9 4-15l64.9-57c-2.4-12.7-3.2-26.1-3.2-39.6s.8-26.9 3.2-39.6l-65-57c-4.8-3.2-6.3-9.5-4-15 13.5-41.2 36.4-79.2 64.2-111.7 4-4.8 9.5-6.3 15-4l81.6 28.5c19.8-16.6 43.6-30.1 67.3-39.6l16.6-84.7c.8-5.5 5.5-10.3 11.1-11.1 42.8-8.7 86.3-8.7 129.1 0 5.5.8 10.3 5.5 11.1 11.1l15 85.5c24.6 9.5 47.5 23 67.3 39.6l81.6-28.5c5.5-2.4 11.1-.8 15 4 28.5 32.5 51.5 70.5 64.2 111.7 2.4 5.5.8 11.9-4 15l-65.7 57c2.4 12.7 3.2 26.1 3.2 39.6s-.8 26.9-3.2 39.6l66.6 56.2zm-190-95.8c0-69.7-57.8-127.5-127.5-127.5-70.5 0-127.5 57-127.5 127.5s57 127.5 127.5 127.5S653 441.9 653 371.4z"></path></symbol><symbol viewBox="0 0 16 16" id="icon-snapchat" xmlns="http://www.w3.org/2000/svg"><path d="M8.155.48c.662 0 2.903.185 3.96 2.552.354.797.27 2.15.2 3.237l-.002.04c-.008.12-.015.23-.02.34.05.03.135.06.268.06.2-.01.44-.08.69-.2.11-.06.23-.07.31-.07.12 0 .24.02.34.06.3.1.49.32.49.56.01.3-.26.56-.81.78-.06.02-.14.05-.23.08-.3.09-.76.24-.89.54-.06.15-.04.35.08.58l.01.01c.04.09 1.02 2.32 3.2 2.68.17.03.29.18.28.34 0 .05-.01.1-.03.15-.16.38-.85.66-2.1.85-.04.06-.08.25-.11.38-.02.12-.05.24-.09.37-.05.18-.18.27-.37.27h-.02c-.09 0-.21-.02-.36-.05-.24-.05-.51-.09-.85-.09-.2 0-.4.01-.61.05-.4.07-.75.31-1.15.59-.57.4-1.22.86-2.2.86-.04 0-.08-.01-.12-.01h-.1c-.98 0-1.62-.45-2.19-.86-.4-.28-.74-.52-1.14-.59-.21-.03-.42-.05-.62-.05-.36 0-.64.06-.85.1-.14.03-.26.05-.36.05-.25 0-.35-.15-.39-.28-.04-.13-.06-.26-.09-.38s-.07-.33-.11-.38C.89 12.9.2 12.62.04 12.23a.413.413 0 0 1-.036-.15.332.332 0 0 1 .28-.34c2.18-.36 3.16-2.59 3.2-2.684l.01-.02c.12-.23.15-.43.08-.58-.13-.29-.59-.44-.89-.54-.08-.02-.16-.05-.23-.08-.74-.29-.84-.62-.8-.85.06-.32.45-.53.78-.53.097 0 .18.02.256.05.28.13.527.2.737.2a.63.63 0 0 0 .31-.07l-.03-.38c-.065-1.086-.15-2.438.205-3.23C4.94.67 7.175.49 7.835.49l.28-.01h.04z"></path></symbol><symbol viewBox="0 0 17 17" id="icon-star" xmlns="http://www.w3.org/2000/svg"><path d="M7.544.405l2.305 4.64 5.15.743L11.27 9.4l.88 5.1-4.61-2.407-4.6 2.407.88-5.1L.087 5.79l5.153-.744L7.545.404z"></path></symbol><symbol viewBox="19.3 54.3 26.9 33.7" id="icon-thumb-down" xmlns="http://www.w3.org/2000/svg"><title>no</title>
<path d="M19.3 84.4c0-4.8 0-9.4.1-14 0-.4 1-1 1.6-1.2 4.2-1.1 7.7-3.2 9.6-7.3.7-1.6.9-3.4 1.5-5 .4-.9 1.2-1.7 1.8-2.5.7.8 2 1.6 2.1 2.5.2 2.2 0 4.5-.2 6.8-.1.9-.4 1.8-.6 3h5.1c1.2 0 2.4 0 3.5.2 1.9.3 2.4 1.3 2.2 3.2-.1 1.2.1 2.4.1 3.6 0 1 0 1.9-.1 2.9-.1 1.1 0 2.2-.3 3.1-1 2.6-2.1 5.2-3.4 7.6-.3.6-1.8.7-2.7.7-2.4.1-4.8.2-7.2 0-1.4-.1-2.9-.5-4-1.3-2.2-1.7-4.4-2.3-7.1-2.1-.6-.1-1.2-.2-2-.2z"></path></symbol><symbol viewBox="19.3 54.3 26.9 33.7" id="icon-thumb-up" xmlns="http://www.w3.org/2000/svg"><title>yes</title>
<path d="M19.3 84.4c0-4.8 0-9.4.1-14 0-.4 1-1 1.6-1.2 4.2-1.1 7.7-3.2 9.6-7.3.7-1.6.9-3.4 1.5-5 .4-.9 1.2-1.7 1.8-2.5.7.8 2 1.6 2.1 2.5.2 2.2 0 4.5-.2 6.8-.1.9-.4 1.8-.6 3h5.1c1.2 0 2.4 0 3.5.2 1.9.3 2.4 1.3 2.2 3.2-.1 1.2.1 2.4.1 3.6 0 1 0 1.9-.1 2.9-.1 1.1 0 2.2-.3 3.1-1 2.6-2.1 5.2-3.4 7.6-.3.6-1.8.7-2.7.7-2.4.1-4.8.2-7.2 0-1.4-.1-2.9-.5-4-1.3-2.2-1.7-4.4-2.3-7.1-2.1-.6-.1-1.2-.2-2-.2z"></path></symbol><symbol viewBox="0 0 60.7 93.3" id="icon-topics" xmlns="http://www.w3.org/2000/svg"><g xmlns="http://www.w3.org/2000/svg"><path d="M2.5 21.5h55.2v11.8H2.5zM2.5 42.1h55.2v11.8H2.5zM2.5 64.3h55.2v11.8H2.5z"></path></g></symbol><symbol viewBox="0 0 87 60" id="icon-trending" xmlns="http://www.w3.org/2000/svg"><path d="M1.906 46.826c2.213 1.787 5.466 1.46 7.262-.743v-.006l5.26-6.45 8.378 11.286a5.171 5.171 0 0 0 4.827 2.035 5.128 5.128 0 0 0 4.124-3.215l7.96-20.208L51.26 56.577a5.155 5.155 0 0 0 4.754 3.13c.097 0 .19 0 .286-.007a5.172 5.172 0 0 0 4.66-3.667l10.98-36.787 4.854 9.902c1.234 2.552 4.33 3.613 6.89 2.37 2.56-1.234 3.636-4.314 2.386-6.86L75.42 2.888a5.15 5.15 0 0 0-5.067-2.87 5.135 5.135 0 0 0-4.52 3.653L55.146 39.42 44.28 13.93a5.142 5.142 0 0 0-4.827-3.127 5.157 5.157 0 0 0-4.73 3.263L25.56 37.343l-6.79-9.148a5.197 5.197 0 0 0-4.033-2.08 5.139 5.139 0 0 0-4.124 1.897L1.153 39.6a5.125 5.125 0 0 0 .753 7.226" fill-rule="evenodd"></path></symbol><symbol viewBox="0 0 23.62 41.098" id="icon-tumblr" xmlns="http://www.w3.org/2000/svg"><path d="M21.643 32.826c-.764.364-2.226.682-3.316.71-3.29.088-3.927-2.31-3.955-4.052V16.69h8.252v-6.22h-8.222V0h-6.02c-.1 0-.272.087-.296.307C7.734 3.512 6.234 9.135 0 11.382v5.31h4.16V30.12c0 4.595 3.39 11.126 12.343 10.974 3.02-.053 6.375-1.318 7.117-2.408l-1.977-5.86z"></path></symbol><symbol viewBox="0 0 44.71 36.327" id="icon-twitter" xmlns="http://www.w3.org/2000/svg"><path d="M44.71 4.295c-1.656.724-3.415 1.242-5.278 1.45A9.146 9.146 0 0 0 43.468.673a18.75 18.75 0 0 1-5.796 2.225C35.965 1.138 33.584 0 30.945 0a9.145 9.145 0 0 0-9.16 9.16c0 .724.052 1.448.208 2.12-7.607-.413-14.335-3.88-18.888-9.417-.777 1.345-1.242 2.742-1.242 4.45 0 3.157 1.604 5.95 4.088 7.607a9.376 9.376 0 0 1-4.14-1.138v.103c0 4.45 3.16 8.176 7.35 9.004-.77.2-1.6.31-2.43.31-.57 0-1.14-.06-1.71-.16 1.14 3.62 4.56 6.31 8.54 6.36-3.1 2.48-7.09 4.34-11.38 4.34-.72 0-1.45-.05-2.17-.16 4.04 2.59 8.9 3.72 14.08 3.72 16.87 0 26.08-13.97 26.08-26.08V9.05c1.76-1.294 3.32-2.9 4.56-4.76"></path></symbol><symbol viewBox="-235.8 423.2 35.7 21.3" id="icon-up" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M-200.5 444.2L-218 424l-17.5 20.2"></path></symbol><symbol viewBox="373.3 133.3 533.3 533.3" id="icon-user" xmlns="http://www.w3.org/2000/svg"><path d="M640 400c73.6 0 133.3-59.7 133.3-133.3S713.6 133.3 640 133.3 506.7 193 506.7 266.7 566.4 400 640 400zm0 66.7c-89 0-266.7 44.7-266.7 133.3v66.7h533.3V600c.1-88.7-177.6-133.3-266.6-133.3z"></path></symbol><symbol viewBox="0 0 1146 1000" id="icon-vimeo" xmlns="http://www.w3.org/2000/svg"><path d="M0 272q55-65 110-116t95.5-77.5 72.5-43T326 14l17-4q12-2 24-2 19 0 35 6 26 10 42.5 34.5t29 55 21.5 72 15 77.5 13.5 79.5T538 403q32 125 51.5 177.5T631 633q24 0 66.5-55.5T791 426q26-48 26-91 0-13-2-23-9-52-51-65-11-4-24-4-35 0-83 26 22-130 134-209Q876 0 965 0q12 0 24 1 102 8 139 90 18 38 18 88 0 29-6 61-18 102-69.5 208t-113 187.5-132.5 155-123.5 117T611 976q-42 24-78.5 24T463 979t-56-48-38-57q-18-38-97.5-298.5T175 295q-1-2-4-4t-13.5-4.5-24 0-36.5 14T47 333z"></path></symbol><symbol viewBox="0 0 86.965 87.642" id="icon-whatsapp" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M44.038 13.007c-16.58 0-30.02 13.44-30.02 30.02a29.883 29.883 0 0 0 4.307 15.503l-5.418 16.106 16.62-5.32a29.915 29.915 0 0 0 14.512 3.733c16.58 0 30.02-13.45 30.02-30.03C74.06 26.44 60.61 13 44.03 13zm0 55.013a24.85 24.85 0 0 1-13.75-4.132l-9.604 3.074 3.122-9.28a24.858 24.858 0 0 1-4.76-14.653c0-13.79 11.212-25 24.993-25 13.78 0 24.99 11.21 24.99 24.99 0 13.78-11.22 24.99-25 24.99zm14.075-18.17c-.753-.412-4.45-2.407-5.143-2.69-.693-.28-1.2-.427-1.74.32s-2.072 2.418-2.538 2.913c-.467.495-.916.54-1.668.128-.752-.41-3.19-1.31-6.02-4.03-2.202-2.11-3.646-4.68-4.065-5.46-.42-.78-.01-1.18.39-1.55.35-.33.8-.86 1.2-1.3.4-.43.54-.74.81-1.25.27-.5.16-.95-.02-1.34s-1.57-4.22-2.15-5.77c-.58-1.56-1.23-1.32-1.68-1.34-.45-.01-.96-.1-1.47-.12-.51-.02-1.35.14-2.08.89-.73.74-2.78 2.52-2.92 6.29-.14 3.77 2.47 7.52 2.83 8.04.36.53 4.98 8.7 12.66 12.06 7.67 3.36 7.71 2.34 9.12 2.26 1.41-.07 4.6-1.68 5.31-3.45.7-1.76.76-3.3.58-3.62-.18-.32-.68-.54-1.43-.95z"></path></symbol><symbol viewBox="130.35156 177.43359 300 300" overflow="visible" id="icon-yahoo" xmlns="http://www.w3.org/2000/svg"><path d="M420.926 272.27c-5.2.514-26.85 5.365-34.13 6.925-7.79 2.073-78.983 57.075-83.66 70.58-1.036 4.674-1.556 11.866-1.556 18.624l-.52 10.91c-.002 7.79 2.162 20.35 3.198 27.1 4.68 1.04 38.555.13 44.79 1.17l-.768 13.97c-6.09-.45-49.106-.34-73.68-.34-12.475 0-52.576 1.37-64.897 1l2.33-13.29c6.755-.53 34.728 1.2 40.878-5.29 3.06-3.22 2.09-6.67 2.09-25.38v-8.83c0-4.16 0-11.96-1.04-19.24-2.59-7.8-65.3-86.09-81.41-98.56-4.68-1.56-33.99-4.49-41.26-6.05l-.36-11.97c3.63-1.82 36.22.44 67.85-.73 20.79-.77 68.22 0 74.07.7l-1.5 10.55c-6.23 1.56-36.26 2.14-44.06 4.21 20.27 30.14 52.31 68.94 62.71 84.01 5.72-8.31 55.96-42.87 57.51-54.82-7.79-1.57-33.6-5.28-37.76-5.28l-2.47-13.61c7.08-1.11 44.28 0 62.78 0 15.96 0 50.07 0 59.76.79l-8.86 12.81"></path></symbol><symbol viewBox="0 0 462 325" id="icon-youtube" xmlns="http://www.w3.org/2000/svg"><path d="M234.28 1.691c-53.492 0-132.53 3.24-156.188 4.031C52.396 8.02 42.884 9.366 28.811 21.41 7.368 40.48 2.28 77.954 2.28 135.285v54.562c0 65.439 8.69 98.684 23 110.844 16.517 14.17 27.407 15.302 38.406 17 4.27.646 34.49 6 168.594 6 83.626 0 155.507-3.95 162.937-4.906 11.945-1.508 29.104-3.696 42.063-18.094 19.183-21.803 23-57.999 23-110.437V126.69c0-33.943-1.891-81.916-23-102-15.991-13.536-21.848-17.367-54.938-19.031-9.358-.462-91.02-3.969-148.062-3.969zm-49.5 97l123.5 63.75-123.5 64.25v-128z"></path></symbol></svg>

      <div class="l-root l-reskin">
    <div class="l-header">
      
      
<div class="chorus-emc__content" data-emc-slug="UnisonCustomNavCell" data-emc-bucket="437::">
    
</div>


      <div class="c-ad-allowlist" data-ui="ad-allowlist" data-cid="site/ad_allowlist-1615483494_1326_292144" data-cdata="{&quot;adblocker_allowlist_prompt_enabled&quot;:false,&quot;messaging_urls&quot;:[],&quot;selector&quot;:&quot;&quot;,&quot;display_per_page&quot;:0,&quot;display_one_third_pageviews&quot;:0,&quot;display_once_per_session&quot;:0}"></div>

      
    </div>
    
<style id="custom-entry-styles" type="text/css">
  .c-entry-group-labels ul a{color:#c5e1b9}

</style>
<span data-content-admin-id="21284263"></span>


<div class="c-entry-hero c-entry-hero--feature c-entry-hero--unison-overlay image-dark has-image has-labels ">
  <div class="c-entry-hero__inner">
    
      <a href="https://product.voxmedia.com/" class="c-entry-hero__logo">
        
  <!--?xml version="1.0" encoding="utf-8"?-->
<!-- Generator: Adobe Illustrator 24.0.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 618.5 132.5" enable-background="new 0 0 618.5 132.5" xml:space="preserve">
<path fill="#FFFFFF" d="M547.5,117.2c-10.2,0-17.9-7.2-17.9-16.7c0-10,7-16.7,17.9-16.7c5.2,0,10.1,1.8,13.5,4.8l0.4-0.2V71.4
	c-4.3-1.8-9.3-2.8-14.3-2.8c-19.9,0-33.9,13.4-33.9,31.9c0,17.9,14.7,31.9,33.9,31.9c5,0,10-1,14.3-2.8v-17l-0.5-0.2
	C557.5,115.4,552.6,117.2,547.5,117.2"></path>
<path fill="#FFFFFF" d="M346.8,68.6c-17.3,0-31.3,14-31.3,31.3c0,17.3,14,31.3,31.3,31.3c17.3,0,31.3-14,31.3-31.3
	C378.1,82.6,364.1,68.6,346.8,68.6 M346.8,115.4c-8.2,0-14.8-6.9-14.8-15.5s6.6-15.5,14.8-15.5c8.1,0,14.8,6.9,14.8,15.5
	S355,115.4,346.8,115.4"></path>
<path fill="#FFFFFF" d="M411.2,69.8h-25.3V130h25.3c16.6,0,30.1-13.5,30.1-30.1C441.3,83.3,427.8,69.8,411.2,69.8 M409.8,114.8h-7
	V85.1h7c8.2,0,14.9,6.7,14.9,14.8C424.7,108.1,418,114.8,409.8,114.8"></path>
<path fill="#FFFFFF" d="M225.3,69.8h-32V130h16.8v-16.4h15.2c12.3,0,22.2-8.4,22.2-21.9C247.5,78.2,237.6,69.8,225.3,69.8
	 M224.4,98.7h-14.3V85.1h14.3c3.5,0,6.7,2.6,6.7,6.8C231.1,96.1,227.8,98.7,224.4,98.7"></path>
<polygon fill="#FFFFFF" points="618.5,70.3 569.2,70.3 569.2,85.6 585.5,85.6 585.5,130.4 602.3,130.4 602.3,85.6 618.5,85.6 "></polygon>
<g>
	<path fill="#FFFFFF" d="M94.6,0C77.3,0,63.3,14,63.3,31.3c0,17.3,14,31.3,31.3,31.3c17.3,0,31.3-14,31.3-31.3
		C125.9,14,111.9,0,94.6,0 M94.6,46.8c-8.2,0-14.8-6.9-14.8-15.5c0-8.6,6.6-15.5,14.8-15.5s14.8,6.9,14.8,15.5
		C109.4,39.8,102.8,46.8,94.6,46.8"></path>
</g>
<polygon fill="#FFFFFF" points="0,1.2 31.7,62.3 63.3,1.2 44.9,1.2 31.8,26.7 18.8,1.2 "></polygon>
<rect x="389.2" y="1.2" fill="#FFFFFF" width="16.8" height="60.2"></rect>
<polygon fill="#FFFFFF" points="317.4,16.3 317.4,1.2 271.3,1.2 271.3,61.4 317.4,61.4 317.4,46.3 288.8,46.3 288.8,38.6 
	315.3,38.6 315.3,24.1 288.8,24.1 288.8,16.3 "></polygon>
<polygon fill="#FFFFFF" points="317.4,16.3 317.4,1.2 271.3,1.2 271.3,61.4 317.4,61.4 317.4,46.3 288.8,46.3 288.8,38.6 
	315.3,38.6 315.3,24.1 288.8,24.1 288.8,16.3 "></polygon>
<g>
	<path fill="#FFFFFF" d="M351.1,1.2h-25.3v60.2h25.3c16.6,0,30.2-13.5,30.2-30.1C381.3,14.7,367.8,1.2,351.1,1.2 M349.8,46.2h-7
		V16.5h7c8.2,0,14.9,6.7,14.9,14.8C364.7,39.5,358,46.2,349.8,46.2"></path>
</g>
<polygon fill="#FFFFFF" points="244.5,27.9 244.5,61.4 261.5,61.4 261.5,1.2 240.5,1.2 227.4,26.3 214.4,1.2 193.4,1.2 193.4,61.4 
	210,61.4 210,27.9 227.3,61.1 "></polygon>
<polygon fill="#FFFFFF" points="155,45.6 165.6,61.4 185.5,61.4 165,31.3 185.3,1.2 165.8,1.2 155.2,17.1 155.4,17.1 144.8,1.2 
	125.1,1.2 145.5,31.3 124.9,61.4 144.4,61.4 "></polygon>
<path fill="#FFFFFF" d="M435.4,40.5l7.5-21.5l7.5,21.5H435.4z M452.9,1.2h-19.7l-21.7,60.2h16.8l2.6-7.7h23.9l2.6,7.7h17.2
	L452.9,1.2z"></path>
<path fill="#FFFFFF" d="M488.7,70.3V105c0,6.7-4.7,11.5-11.5,11.5c-6.7,0-11.5-4.7-11.5-11.5V70.3h-16.7V105
	c0,15.1,10.5,26.6,28.1,26.6c17.6,0,28.2-11.5,28.2-26.6V70.3H488.7z"></path>
<g>
	<path fill="#FFFFFF" d="M299.2,108.2c5.8-3.6,9.7-9.8,9.7-17.2c0-10.7-8.1-21.1-22.3-21.1h-31.4V130h16.8v-18.7h10.7l8.8,18.7h18.2
		L299.2,108.2z M286.9,97.6h-14.8V84.9h14.4c4.5,0,6.2,3.7,6.2,6.2C292.7,93.9,290.5,97.6,286.9,97.6"></path>
</g>
</svg>



        
      </a>
    
    
        <div class="c-entry-hero__image">
          <div class="e-image">
  <span class="e-image__inner">
    
    <span class="e-image__image " data-original="https://cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg">
      
        <picture class="c-picture" data-cid="site/picture_element-1615485689_2042_6908" data-cdata="{&quot;image_id&quot;:67677393,&quot;ratio&quot;:&quot;*&quot;}">
  

  
    <source media="(max-width: 900px)" srcset="https://cdn.vox-cdn.com/thumbor/9qdYZcw95lyUgiwpU_n07DwO0M4=/0x0:3360x1830/320x427/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 320w, https://cdn.vox-cdn.com/thumbor/r5OCRch1Z0duo-05HWHiBrI80Ro=/0x0:3360x1830/420x560/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 420w, https://cdn.vox-cdn.com/thumbor/8TQGpZhxwcirTLOGum5LwRi2xmY=/0x0:3360x1830/520x693/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 520w, https://cdn.vox-cdn.com/thumbor/FPsw2BkwSOb7Tf2hKCzsTGVVJ5A=/0x0:3360x1830/620x827/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 620w, https://cdn.vox-cdn.com/thumbor/9FNe6Gd3mh7tbbLQkG6x3bZp0k8=/0x0:3360x1830/720x960/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 720w, https://cdn.vox-cdn.com/thumbor/orhmLrV35TZhghoFUY6YHRlYylo=/0x0:3360x1830/820x1093/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 820w" sizes="100vw" type="image/webp">
  

  <source media="(max-width: 900px)" srcset="https://cdn.vox-cdn.com/thumbor/3koEvhwCv3zgJBi3PreCW-WxD2c=/0x0:3360x1830/320x427/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 320w, https://cdn.vox-cdn.com/thumbor/zwBCCwCiw2vgsC-WSMn0N7zAZ40=/0x0:3360x1830/420x560/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 420w, https://cdn.vox-cdn.com/thumbor/iNK-m_itzEFEAGnsMbgQMgW4xVo=/0x0:3360x1830/520x693/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 520w, https://cdn.vox-cdn.com/thumbor/OFkSDopizwkLa8fUxfds84A0lIs=/0x0:3360x1830/620x827/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 620w, https://cdn.vox-cdn.com/thumbor/DJ-tkRNDmVVR8tqQRqZpwrbXDrg=/0x0:3360x1830/720x960/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 720w, https://cdn.vox-cdn.com/thumbor/zOW7sy3La3tiByLLmoxgF1cNtVY=/0x0:3360x1830/820x1093/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 820w" sizes="100vw">



  <source srcset="https://cdn.vox-cdn.com/thumbor/m79OhFp94g2Ah4Mw9jL6cDSQGYg=/0x0:3360x1830/900x506/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 900w, https://cdn.vox-cdn.com/thumbor/tFISkq6RgGr9p93Bj5Sefc4wZ-M=/0x0:3360x1830/1150x647/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 1150w, https://cdn.vox-cdn.com/thumbor/x8K0VxIaOj7p2FYmnqRF0odMRKU=/0x0:3360x1830/1400x788/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 1400w, https://cdn.vox-cdn.com/thumbor/COsn2RT42spNOv_lbO4aTLQOIfw=/0x0:3360x1830/1650x928/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 1650w, https://cdn.vox-cdn.com/thumbor/gVdsqDDiqFBmbFq-S-W1wB0vhFI=/0x0:3360x1830/1900x1069/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 1900w, https://cdn.vox-cdn.com/thumbor/Be3z0SnAmKTvZ2v49qTkj6iqB8w=/0x0:3360x1830/2150x1209/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 2150w, https://cdn.vox-cdn.com/thumbor/mo5NMaCTbbwPMS8etqaH8iCxcHg=/0x0:3360x1830/2400x1350/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 2400w, https://cdn.vox-cdn.com/thumbor/c--EEVTWMVXSNNRXqpq9zUCQnyc=/0x0:3360x1830/2650x1491/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 2650w, https://cdn.vox-cdn.com/thumbor/D1yNFa7umJTonTJ8d5q1gZ3jcyI=/0x0:3360x1830/2900x1631/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 2900w, https://cdn.vox-cdn.com/thumbor/h38GuXIWQesKJIHzZjXnnlPRZ2g=/0x0:3360x1830/3150x1772/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 3150w, https://cdn.vox-cdn.com/thumbor/uOgpXaBtNWUww4v28fPm_ZuL1Ws=/0x0:3360x1830/3400x1913/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 3400w, https://cdn.vox-cdn.com/thumbor/c2OWLSdEVVGnvPZg6ldlflCfzZc=/0x0:3360x1830/3650x2053/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 3650w, https://cdn.vox-cdn.com/thumbor/L6zZps-qzd5NW0cuR2ZaV6sHumc=/0x0:3360x1830/3900x2194/filters:focal(1412x647:1948x1183):format(webp)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 3900w" sizes="100vw" type="image/webp">


<img srcset="https://cdn.vox-cdn.com/thumbor/Q2jOXbFtls1r6F2HmEB5U7dai4g=/0x0:3360x1830/900x506/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 900w, https://cdn.vox-cdn.com/thumbor/HITGBRsL4zD_u28nsxkUXf3DDQE=/0x0:3360x1830/1150x647/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 1150w, https://cdn.vox-cdn.com/thumbor/yVV5zUjH8VVMxfPt61wadxuGGvg=/0x0:3360x1830/1400x788/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 1400w, https://cdn.vox-cdn.com/thumbor/KQt3ylXiuldAXX_fSBooUTtdToU=/0x0:3360x1830/1650x928/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 1650w, https://cdn.vox-cdn.com/thumbor/esGwa0Y-kTFv_rP8QQwOlV_k6TU=/0x0:3360x1830/1900x1069/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 1900w, https://cdn.vox-cdn.com/thumbor/NYJRdi3nZ5gnp6PPURokzNrWX5U=/0x0:3360x1830/2150x1209/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 2150w, https://cdn.vox-cdn.com/thumbor/BYdP0Q1oGqNSuhZAJAldRAlVEGI=/0x0:3360x1830/2400x1350/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 2400w, https://cdn.vox-cdn.com/thumbor/gRUBcmzHvDwE00aCG5IhSqjN5cU=/0x0:3360x1830/2650x1491/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 2650w, https://cdn.vox-cdn.com/thumbor/ZVYHshcmBl4SGYPDVApC7-ZyLKA=/0x0:3360x1830/2900x1631/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 2900w, https://cdn.vox-cdn.com/thumbor/u6JzbEciGZl1ltbq9adsNoyp9Fc=/0x0:3360x1830/3150x1772/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 3150w, https://cdn.vox-cdn.com/thumbor/0Jd2c3TfHKOTJavjueZOXNuhdNE=/0x0:3360x1830/3400x1913/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 3400w, https://cdn.vox-cdn.com/thumbor/--jBGWJMQ3e4ZrbgbMSM8DLHFoY=/0x0:3360x1830/3650x2053/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 3650w, https://cdn.vox-cdn.com/thumbor/rfwi2fPx_YtIWHARxYAHhPCVnk0=/0x0:3360x1830/3900x2194/filters:focal(1412x647:1948x1183)/cdn.vox-cdn.com/uploads/chorus_image/image/67677393/ad_builder.0.jpg 3900w" sizes="100vw" alt="" data-upload-width="3360" src="./Building an in-browser image editor with React - Vox Product Blog_files/ad_builder.0.jpg">

</picture>

      
    </span>
    
  </span>
</div>

        </div>
      
      <div class="c-entry-hero__content l-segment l-feature">
        
<div class="c-entry-group-labels c-entry-group-labels--feature">
  <p class="sr-only c-entry-box--compact__labels-title" id="heading-label--w92d1s41">Filed under:</p>
  
  
    
      <ul aria-labelledby="heading-label--w92d1s41">
        <li class="c-entry-group-labels__item">
          
          <a href="https://product.voxmedia.com/development">
            <span>Development</span>
          </a>
        </li>
      </ul>
    
  
  
</div>

        
        <h1 class="c-page-title">Building an in-browser image editor with React</h1>

        <p class="c-entry-summary p-dek">How we enable Concert Ad Manager users to upload, crop, zoom, and optimize their images — completely in-browser without any external services.</p>

        <div class="c-byline">
  <span class="c-byline-wrapper">
    
      By
      <span class="c-byline__item">
        
          
          <a href="https://www.voxmedia.com/users/joshlarson" data-analytics-link="author-name"><span class="c-byline__author-name">Josh Larson</span></a>
        
      </span>
      
      <span class="c-byline__item">
        
        <time class="c-byline__item" data-ui="timestamp" datetime="2020-10-23T13:24:07">
          Oct 23, 2020,  9:24am EDT
        </time>
      </span>
      
      
      
    
    
  </span>
  <span class="c-byline__gear">
    <a data-entry-admin="21284263" data-cid="tools/entry_admin_button-1615485689_8946_6909" data-cdata="{&quot;id&quot;:21284263}"></a>

  </span>
</div>


        
      </div>
    </div>
    <div class="c-entry-hero__caption">
      

    </div>
</div>

<div class="l-wrapper">
  <main id="content" tabindex="-1" class="l-segment l-feature">
    
    
<div class="c-social-buttons c-social-buttons--popover " data-cid="site/social_buttons_list/popover-1615485689_7259_6910" data-cdata="{&quot;entry_id&quot;:21284263,&quot;services&quot;:[&quot;facebook&quot;,&quot;twitter&quot;,&quot;linkedin&quot;,&quot;reddit&quot;,&quot;flipboard&quot;,&quot;pocket&quot;,&quot;email&quot;],&quot;base_url&quot;:&quot;https://product.voxmedia.com/2020/10/23/21520222/building-an-in-browser-image-editor-with-react&quot;}">
  <h2 class="sr-only" id="heading-label--widfmzdy">Share this story</h2>
  <ul aria-labelledby="heading-label--widfmzdy">
  
    <li>
      <a class="c-social-buttons__item c-social-buttons__facebook" href="https://www.facebook.com/sharer/sharer.php?text=Building+an+in-browser+image+editor+with+React&amp;u=https%3A%2F%2Fproduct.voxmedia.com%2F2020%2F10%2F23%2F21520222%2Fbuilding-an-in-browser-image-editor-with-react" data-analytics-social="facebook">
        <svg role="img" class="p-svg-icon c-social-buttons__svg"><use xlink:href="#icon-facebook"></use></svg>
        <span class="sr-only">Share this on Facebook (opens in new window)</span>
      </a>
    </li>
  
  
    <li>
      <a class="c-social-buttons__item c-social-buttons__twitter" href="https://twitter.com/intent/tweet?counturl=https%3A%2F%2Fproduct.voxmedia.com%2F2020%2F10%2F23%2F21520222%2Fbuilding-an-in-browser-image-editor-with-react&amp;text=Building+an+in-browser+image+editor+with+React&amp;url=https%3A%2F%2Fproduct.voxmedia.com%2F2020%2F10%2F23%2F21520222%2Fbuilding-an-in-browser-image-editor-with-react&amp;via=voxproduct" data-analytics-social="twitter">
        <svg role="img" class="p-svg-icon c-social-buttons__svg"><use xlink:href="#icon-twitter"></use></svg>
        <span class="sr-only">Share this on Twitter (opens in new window)</span>
      </a>
    </li>
  
  
  
    <li data-ui="more">
      <a class="c-social-buttons__item c-social-buttons__more" href="https://product.voxmedia.com/2020/10/23/21520222/building-an-in-browser-image-editor-with-react#" role="button" aria-expanded="false">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" class="p-svg-icon c-social-buttons__svg">
<path d="M18.4,12.9c-0.3,0-0.6,0.3-0.6,0.6V17c0,1-0.8,1.8-1.8,1.8H3c-1,0-1.8-0.8-1.8-1.8V4C1.2,3,2,2.2,3,2.2h8.4
  c0.3,0,0.6-0.3,0.6-0.6S11.7,1,11.3,1H3C1.3,1,0,2.3,0,4V17c0,1.6,1.3,3,3,3H16c1.6,0,3-1.3,3-3v-3.5C19,13.2,18.7,12.9,18.4,12.9z"></path>
<path d="M20.9,5.3C20.9,5.3,20.9,5.3,20.9,5.3c0-0.1,0-0.1,0-0.1c0,0,0,0,0-0.1c0,0,0,0,0-0.1c0,0,0,0,0-0.1c0,0,0,0,0,0
  c0,0,0,0,0,0c0,0,0,0,0,0l-4.6-4.6c-0.2-0.2-0.6-0.2-0.8,0s-0.2,0.6,0,0.8l3.3,3.3c-2.1-0.3-5.5-0.3-8.5,1.5
  C7.6,7.5,5.9,10,5.2,13.5c-0.1,0.3,0.1,0.6,0.5,0.7c0,0,0.1,0,0.1,0c0.3,0,0.5-0.2,0.6-0.5c0.6-3.1,2.1-5.4,4.3-6.8
  c3-1.8,6.7-1.5,8.5-1.2l-3.8,3.9c-0.2,0.2-0.2,0.6,0,0.8c0.1,0.1,0.3,0.2,0.4,0.2s0.3-0.1,0.4-0.2l4.6-4.6c0,0,0,0,0,0
  c0,0,0,0,0-0.1c0,0,0,0,0,0c0,0,0,0,0-0.1c0,0,0,0,0-0.1c0,0,0,0,0,0c0,0,0,0,0,0c0,0,0,0,0-0.1C20.9,5.4,20.9,5.4,20.9,5.3
  C20.9,5.4,20.9,5.4,20.9,5.3z"></path>
</svg>
        <span class="c-social-buttons--label" aria-hidden="true">Share</span>
        <span class="sr-only">All sharing options</span>
      </a>
    </li>
  
    
  </ul>
  
    <div class="c-social-buttons__popover" data-ui="popover">
      <div class="c-social-buttons__popover-header">
        <h3 tabindex="-1">
          <strong aria-hidden="true">Share</strong>
          <span class="sr-only">All sharing options for:</span>
          <span>Building an in-browser image editor with React</span>
        </h3>
      </div>
      <div class="c-social-buttons__popover-body">
        <ul>
          
            <li>
              <a class="c-social-buttons__item c-social-buttons__linkedin" href="http://www.linkedin.com/shareArticle?mini=true&amp;source=Vox+Product+Blog&amp;summary=How+we+enable+Concert+Ad+Manager+users+to+upload%2C+crop%2C+zoom%2C+and+optimize+their+images+%E2%80%94+completely+in-browser+without+any+external+services.&amp;title=Building+an+in-browser+image+editor+with+React&amp;url=https%3A%2F%2Fproduct.voxmedia.com%2F2020%2F10%2F23%2F21520222%2Fbuilding-an-in-browser-image-editor-with-react" data-analytics-social="linkedin">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 16" class="p-svg-icon c-social-buttons__svg">
<path d="M1.1,0.5h12.6l0,0c0.6,0,1,0.4,1,1v12.6c0,0.6-0.4,1-1,1H1.1c-0.6,0-1-0.4-1-1V1.5l0,0C0.1,1,0.5,0.5,1.1,0.5
  L1.1,0.5z M8,12.4V8.9C8,8.5,8.1,8.2,8.3,8c0.2-0.2,0.5-0.3,0.8-0.3c0.3,0,0.6,0.1,0.8,0.3c0.2,0.2,0.3,0.6,0.3,1v3.3h2V8.9
  c0-0.9-0.2-1.5-0.6-2c-0.4-0.5-1-0.7-1.7-0.7C9,6.2,8.5,6.5,8,7.2L7.9,6.4H6l0,1.4v4.7H8z M2.9,12.4h2v-6h-2V12.4z M3.9,5.4
  c0.4,0,0.6-0.1,0.9-0.3C5,4.9,5.1,4.6,5.1,4.3C5.1,4,5,3.8,4.8,3.6C4.5,3.4,4.3,3.3,3.9,3.3c-0.4,0-0.6,0.1-0.9,0.3
  C2.8,3.8,2.7,4,2.7,4.3c0,0.3,0.1,0.6,0.3,0.8C3.3,5.3,3.5,5.4,3.9,5.4L3.9,5.4z"></path>
</svg>
                <span class="c-social-buttons__text">Linkedin</span>
              <span class="sr-only"> (opens in new window)</span></a>
            </li>
          
            <li>
              <a class="c-social-buttons__item c-social-buttons__reddit" href="https://reddit.com/submit?title=Building+an+in-browser+image+editor+with+React&amp;url=https%3A%2F%2Fproduct.voxmedia.com%2F2020%2F10%2F23%2F21520222%2Fbuilding-an-in-browser-image-editor-with-react" data-analytics-social="reddit">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" class="p-svg-icon c-social-buttons__svg">
<path d="M8.5,0C3.8,0,0,3.8,0,8.5S3.8,17,8.5,17S17,13.2,17,8.5S13.2,0,8.5,0z M14,10.2c0,0.1,0,0.3,0,0.4c0,2.2-2.5,3.9-5.6,3.9
  s-5.6-1.8-5.6-3.9c0-0.2,0-0.3,0-0.5C2.5,9.9,2.2,9.4,2.2,8.9c0-0.8,0.6-1.5,1.4-1.5c0.4,0,0.7,0.2,0.9,0.4C5.2,7.3,6,6.9,7,6.8
  c0.3-0.1,0.3-0.1,0.7-0.1l0.7-3.1C8.6,2.9,8.8,2.9,9.3,3C11.1,3.5,12,3.7,12,3.7c0.2-0.3,0.5-0.3,0.8-0.3c0.6,0,1.1,0.5,1.1,1.2
  s-0.5,1.2-1.1,1.2c-0.5,0-1-0.5-1.1-1c0,0-0.7-0.2-2.2-0.6C9.1,5.9,8.9,6.7,8.9,6.7c1.3,0.1,2.6,0.5,3.5,1.1c0.3-0.3,0.6-0.4,1-0.4
  c0.8,0,1.4,0.7,1.4,1.5C14.8,9.4,14.5,9.9,14,10.2z"></path>
<path d="M10.2,12.2c-0.3,0.4-0.9,0.5-1.7,0.5l0,0l0,0c-0.8,0-1.4-0.2-1.7-0.5c-0.1-0.1-0.2-0.1-0.3,0c-0.1,0.1-0.1,0.2,0,0.3
  c0.4,0.4,1.1,0.7,2,0.7l0,0l0,0c0.9,0,1.6-0.2,2-0.7c0.1-0.1,0.1-0.2,0-0.3C10.4,12.1,10.3,12.1,10.2,12.2z"></path>
<ellipse cx="6.6" cy="9.9" rx="0.8" ry="0.9"></ellipse>
<ellipse cx="10.4" cy="9.9" rx="0.8" ry="0.9"></ellipse>
</svg>
                <span class="c-social-buttons__text">Reddit</span>
              <span class="sr-only"> (opens in new window)</span></a>
            </li>
          
            <li>
              <a class="c-social-buttons__item c-social-buttons__flipboard" href="https://share.flipboard.com/bookmarklet/popout?title=Building+an+in-browser+image+editor+with+React&amp;url=https%3A%2F%2Fproduct.voxmedia.com%2F2020%2F10%2F23%2F21520222%2Fbuilding-an-in-browser-image-editor-with-react&amp;v=2" data-analytics-social="flipboard">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="p-svg-icon c-social-buttons__svg">
  <path d="M0,0v16h16V0H0z M12.9,6.4H9.6v3.2H6.5v3.2H3.2V3.2h9.7V6.4z"></path>
  <polygon opacity="0.13" points="6.5,3.2 6.5,6.4 9.8,6.4 12.9,6.4 12.9,3.2 "></polygon>
  <polygon opacity="0.23" points="6.5,9.7 9.7,9.7 9.7,6.4 6.5,6.4 "></polygon>
</svg>
                <span class="c-social-buttons__text">Flipboard</span>
              <span class="sr-only"> (opens in new window)</span></a>
            </li>
          
            <li>
              <a class="c-social-buttons__item c-social-buttons__pocket" href="https://getpocket.com/save?url=https%3A%2F%2Fproduct.voxmedia.com%2F2020%2F10%2F23%2F21520222%2Fbuilding-an-in-browser-image-editor-with-react" data-analytics-social="pocket">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 14" class="p-svg-icon c-social-buttons__svg">
<path d="M14.4,0.1H2c-0.6,0-1.1,0.5-1.1,1.1v4.6c0,4,3.3,7.3,7.3,7.3c4,0,7.3-3.3,7.3-7.3V1.2C15.5,0.6,15,0.1,14.4,0.1
  z M12.5,5.4L8.9,9C8.7,9.2,8.4,9.3,8.2,9.3C8,9.3,7.7,9.2,7.5,9L3.9,5.4C3.5,5,3.5,4.4,3.9,4c0.4-0.4,1-0.4,1.3,0l3,3l3-3
  c0.4-0.4,1-0.4,1.3,0C12.9,4.4,12.9,5,12.5,5.4z"></path>
</svg>
                <span class="c-social-buttons__text">Pocket</span>
              <span class="sr-only"> (opens in new window)</span></a>
            </li>
          
            <li>
              <a class="c-social-buttons__item c-social-buttons__email" href="mailto:?subject=Building%20an%20in-browser%20image%20editor%20with%20React&amp;body=How%20we%20enable%20Concert%20Ad%20Manager%20users%20to%20upload%2C%20crop%2C%20zoom%2C%20and%20optimize%20their%20images%20%E2%80%94%20completely%20in-browser%20without%20any%20external%20services.%0A%0Ahttps%3A%2F%2Fproduct.voxmedia.com%2F2020%2F10%2F23%2F21520222%2Fbuilding-an-in-browser-image-editor-with-react" data-analytics-social="email">
                <svg role="img" class="p-svg-icon c-social-buttons__svg"><use xlink:href="#icon-email"></use></svg>
                <span class="c-social-buttons__text">Email</span>
              <span class="sr-only"> (opens in new window)</span></a>
            </li>
          
        </ul>
      </div>
      <span class="c-social-buttons__popover-caret" data-ui="caret"></span>
    </div>
  
</div>

    

      



    





<div class="c-entry-content ">
  <p class="p-large-text" id="WSdyg7">Last month, Vox Media <a href="https://www.voxmedia.com/2020/9/29/21473644/vox-media-introduces-concert-ad-manager-a-self-serve-tool-for-marketers">launched</a> <a href="https://concert.io/concert-ad-manager.html"><strong>Concert Ad Manager</strong></a>. It’s a self-serve platform for marketers of all sizes and budgets to create, target and publish ads across the Concert and Concert Local marketplaces.</p>
<p id="6u1lsE">For the first time ever, we’ve opened the door to smaller advertisers with limited budgets and allowed them to take advantage of the premium Concert network. These advertisers might not have the budget to hire a fancy ad agency to create ads for them. </p>
<p id="2GqLif">What does this mean for you if you’re one of these advertisers? </p>
<p id="dNG56s">Instead of turning to Facebook, Instagram or Google for a cheap, targeted advertising campaign with a limited budget, you can use Concert Ad Manager to create beautiful ads with your existing brand assets and run them on the Concert network. </p>
<p id="dZ4F62">As a bonus, your ads will be running on the sites of dozens of <a href="https://concert.io/publishers.html">top-tier Concert publishers</a> instead of in a Facebook feed next to a photo of Uncle Ron’s potato salad (with no disrespect to Uncle Ron).</p>
<h2 id="ohHy66">A creative builder for the average user</h2>
<p id="8ze3SM"><a href="https://demo.concert.io/">Concert ads are designed</a> to have a premium look and feel. Because of this, it’s unlikely that your existing assets are perfectly-sized for a Concert ad without a couple adjustments.</p>
<p id="V5fta3">Since advertisers using Concert Ad Manager might not have access to an ad agency or to expensive tools like Photoshop, we wanted to build easy-to-use image editing features within the app itself. Users need to be able to upload their image assets, crop them, and scale them to fit mobile and desktop ad sizes.</p>
<p id="n8Ayou">With other services at Vox Media like <a href="https://getchorus.voxmedia.com/">Chorus</a>, we might have used our existing infrastructure to process images at request time – or a server-side image manipulation solution to process and re-upload them. </p>
<p id="qIJqL7">However, the fact that we wanted to give users full control over focal point selection and scaling was difficult to translate directly into the existing constraints of these systems. Additionally, we didn’t want to put an additional burden on the infrastructure used for editorial purposes at Vox Media for a revenue concern.</p>
<p id="9m8P7u">It’s also possible we could have purchased an existing third-party image editing solution to handle this. There are plenty of them!</p>
<p id="YOjArR">But in our research, we found that many of these solutions require you to use that company’s hosting and delivery service. The Concert CDN serves billions of image requests every month, and this would be a huge additional cost —  no matter which vendor we would have chosen.</p>
<p id="rSxSP1">So we decided to build one ourselves! The Concert Ad Manager creative builder allows you to upload images, crop them, and scale them to a focal point — completely within the client-side of the browser.</p>
<p id="5hOzby">Here’s a video of how it looks:</p>
<div class="c-wide-block"><div id="onclJt"><video src="https://cdn.concert.io/debut-image-assets/assets/blog/image_editing_demo_edited.mp4" loading="lazy" style="max-width: 100%; margin-bottom: 1em;" muted="" controls=""></video></div></div>
<p id="BRFVst">The rest of this post is a technical deep-dive into how it all works.</p>
<h2 id="n4FFoD">A custom hook for custom images</h2>
<p id="qCYbWC">Concert Ad Manager is <a href="https://product.voxmedia.com/2020/3/17/21172182/how-we-rewrote-a-vue-app-with-react-and-tailwind-in-21-days">built with React</a>, so we started by creating a custom React hook for image editing — aptly-named <strong>useEditableImage()</strong>.</p>
<p id="4LSPHd">The most important return value from this hook is a function called <strong>handleNewImage()</strong>. This is called by the consumer whenever a new image has been added or dragged-and-dropped into the input field.</p>
<div id="qlVqyA"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/65b139aaa20167efb38e53772b5337d6.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966642" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-useeditableimage-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-useeditableimage-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-useeditableimage-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">export</span> <span class="pl-k">function</span> <span class="pl-en">useEditableImage</span><span class="pl-kos">(</span><span class="pl-kos">{</span> ... <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-useeditableimage-js-LC2" class="blob-code blob-code-inner js-file-line">   <span class="pl-c">/**</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-useeditableimage-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * Whenever a user attaches an image to an input, this function:</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-useeditableimage-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * 1. Validates the new image size is the minimum size.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-useeditableimage-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * 2. Uploads the image to s3 for storage. We need to refer to this full-size,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-useeditableimage-js-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   *    original version to make cropped assets in the future.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-useeditableimage-js-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * 3. Processes the image in-browser to resize it for our needs. This ensures a gigantic</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-useeditableimage-js-LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   *    original image doesn't end up in the ad.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-useeditableimage-js-LC9" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * 4. Uploads the processed image to s3 for storage, and for use by ads.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-useeditableimage-js-LC10" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * 5. Emits the change to the consumer of the hook.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-useeditableimage-js-LC11" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   *</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-useeditableimage-js-LC12" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * <span class="pl-k">@param</span> {<span class="pl-smi">SyntheticEvent</span>} event onChange event from a file input</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-useeditableimage-js-LC13" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   */</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-useeditableimage-js-LC14" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">async</span> <span class="pl-k">function</span> <span class="pl-en">handleNewImage</span><span class="pl-kos">(</span><span class="pl-s1">event</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-useeditableimage-js-LC15" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-s1">file</span> <span class="pl-c1">=</span> <span class="pl-s1">event</span><span class="pl-kos">.</span><span class="pl-c1">target</span><span class="pl-kos">.</span><span class="pl-c1">files</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-useeditableimage-js-LC16" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">setError</span><span class="pl-kos">(</span><span class="pl-c1">null</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-useeditableimage-js-LC17" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-useeditableimage-js-LC18" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-s1">imageSize</span> <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-en">getImageSize</span><span class="pl-kos">(</span><span class="pl-s1">file</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-useeditableimage-js-LC19" class="blob-code blob-code-inner js-file-line">    </td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-useeditableimage-js-LC20" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-c1">!</span><span class="pl-en">validateImageSize</span><span class="pl-kos">(</span><span class="pl-s1">imageSize</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-useeditableimage-js-LC21" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">return</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-useeditableimage-js-LC22" class="blob-code blob-code-inner js-file-line">    <span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-useeditableimage-js-LC23" class="blob-code blob-code-inner js-file-line">    </td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-useeditableimage-js-LC24" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-s1">fileType</span> <span class="pl-c1">=</span> <span class="pl-s1">file</span><span class="pl-kos">.</span><span class="pl-c1">type</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-useeditableimage-js-LC25" class="blob-code blob-code-inner js-file-line">    </td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-useeditableimage-js-LC26" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-c1">!</span><span class="pl-en">validateImageMimeType</span><span class="pl-kos">(</span><span class="pl-s1">fileType</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-useeditableimage-js-LC27" class="blob-code blob-code-inner js-file-line">      <span class="pl-en">setError</span><span class="pl-kos">(</span><span class="pl-s">'File format not supported!'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-useeditableimage-js-LC28" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">return</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-useeditableimage-js-LC29" class="blob-code blob-code-inner js-file-line">    <span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-useeditableimage-js-LC30" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-useeditableimage-js-LC31" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> <span class="pl-en">processNewImage</span><span class="pl-kos">(</span><span class="pl-kos">{</span> file<span class="pl-kos">,</span> imageSize<span class="pl-kos">,</span> fileType <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-useeditableimage-js-LC32" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-useeditableimage-js-LC33" class="blob-code blob-code-inner js-file-line">  </td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-useeditableimage-js-LC34" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">return</span> <span class="pl-kos">{</span> </td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-useeditableimage-js-LC35" class="blob-code blob-code-inner js-file-line">    handleNewImage</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="file-useeditableimage-js-LC36" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L37" class="blob-num js-line-number" data-line-number="37"></td>
        <td id="file-useeditableimage-js-LC37" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">}</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/65b139aaa20167efb38e53772b5337d6/raw/1891698d627b8dec8a4b2e1d1e561dfef58a4eac/useEditableImage.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/65b139aaa20167efb38e53772b5337d6#file-useeditableimage-js">useEditableImage.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="UbnoyY">We start by validating the image size and image mime-type fits our requirements. </p>
<p id="DOHTKN">Next, we upload the full original image to S3 using a signed URL. It’s important we store a reference to this original image to be able to create cropped and resized renditions later on.</p>
<div id="8qFoO9"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/8de722f7fed2cf439e3e922a3974d19b.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966698" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-useeditableimage-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-useeditableimage-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-useeditableimage-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">async</span> <span class="pl-k">function</span> <span class="pl-en">processNewImage</span><span class="pl-kos">(</span><span class="pl-kos">{</span> file<span class="pl-kos">,</span> imageSize<span class="pl-kos">,</span> fileType <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-useeditableimage-js-LC2" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">newImageUrl</span> <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-en">uploader</span><span class="pl-kos">(</span><span class="pl-s1">file</span><span class="pl-kos">,</span> <span class="pl-s1">fileType</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-useeditableimage-js-LC3" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-useeditableimage-js-LC4" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">let</span> <span class="pl-s1">processedImageUrl</span> <span class="pl-c1">=</span> <span class="pl-s1">newImageUrl</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-useeditableimage-js-LC5" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">focalPoint</span> <span class="pl-c1">=</span> <span class="pl-c1">DEFAULT_FOCAL_POINT</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-useeditableimage-js-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">zoom</span> <span class="pl-c1">=</span> <span class="pl-c1">DEFAULT_ZOOM</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-useeditableimage-js-LC7" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-useeditableimage-js-LC8" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">processedImage</span> <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-en">processImage</span><span class="pl-kos">(</span><span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-useeditableimage-js-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">url</span>: <span class="pl-s1">newImageUrl</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-useeditableimage-js-LC10" class="blob-code blob-code-inner js-file-line">    focalPoint<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-useeditableimage-js-LC11" class="blob-code blob-code-inner js-file-line">    dimensions<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-useeditableimage-js-LC12" class="blob-code blob-code-inner js-file-line">    fileType<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-useeditableimage-js-LC13" class="blob-code blob-code-inner js-file-line">    zoom<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-useeditableimage-js-LC14" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-useeditableimage-js-LC15" class="blob-code blob-code-inner js-file-line">  </td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-useeditableimage-js-LC16" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// ...</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-useeditableimage-js-LC17" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">}</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/8de722f7fed2cf439e3e922a3974d19b/raw/56a723ffadaa8d44d3a54a05a58d4cd5a209b8b9/useEditableImage.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/8de722f7fed2cf439e3e922a3974d19b#file-useeditableimage-js">useEditableImage.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="5Rz8hW">Once that upload is complete, we pass the URL of the hosted source image to a <strong>processImage()</strong> function, along with the dimensions of the current image field (desktop or mobile ad sizes), and a default <strong>zoom</strong> and <strong>focalPoint</strong>.</p>
<p id="qB7o1E">In this function, we create an HTML <strong>&lt;canvas&gt;</strong> and prepare to draw the image and set the dimensions of the canvas to the desired output dimensions.</p>
<p id="pagzQH">Then, we gather some coordinates to reposition the image with a function called <strong>getTransformCoordinates()</strong>.</p>
<p id="XVZ5IM">Here’s the function in its entirety:</p>
<div id="jLbPx8"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/c4a0c9775c011752f25a1bd4e214bfb6.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966715" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-useeditableimage-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-useeditableimage-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-useeditableimage-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c">/**</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-useeditableimage-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> * Get transform coordinates suitable for rendering an image inside a canvas using `ctx.drawImage()`</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-useeditableimage-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> */</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-useeditableimage-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">export</span> <span class="pl-k">function</span> <span class="pl-en">getTransformCoordinates</span><span class="pl-kos">(</span><span class="pl-kos">{</span> inputDimensions<span class="pl-kos">,</span> outputDimensions<span class="pl-kos">,</span> focalPoint<span class="pl-kos">,</span> zoom <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-useeditableimage-js-LC5" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// We aim to place the image's focal point in the visual center of the output image:</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-useeditableimage-js-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">outputCenter</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-useeditableimage-js-LC7" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">x</span>: <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span> <span class="pl-c1">*</span> <span class="pl-c1">0.5</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-useeditableimage-js-LC8" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">y</span>: <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span> <span class="pl-c1">*</span> <span class="pl-c1">0.5</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-useeditableimage-js-LC9" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-useeditableimage-js-LC10" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-useeditableimage-js-LC11" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Determine how much we need to scale the input image to fit into the output constraints.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-useeditableimage-js-LC12" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Note: we're using Math.max to emulate CSS's `contain: cover` behavior.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-useeditableimage-js-LC13" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">var</span> <span class="pl-s1">scale</span> <span class="pl-c1">=</span> <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-useeditableimage-js-LC14" class="blob-code blob-code-inner js-file-line">    <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span> <span class="pl-c1">/</span> <span class="pl-s1">inputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-useeditableimage-js-LC15" class="blob-code blob-code-inner js-file-line">    <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span> <span class="pl-c1">/</span> <span class="pl-s1">inputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-useeditableimage-js-LC16" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-useeditableimage-js-LC17" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-useeditableimage-js-LC18" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// newDimensions will always (by construction) be equal-to-or-larger than their outputDimensions equivalent.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-useeditableimage-js-LC19" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// This means top &amp; left values will be less-than-or-equal-to-zero.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-useeditableimage-js-LC20" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">newDimensions</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-useeditableimage-js-LC21" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">width</span>: <span class="pl-s1">inputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span> <span class="pl-c1">*</span> <span class="pl-s1">scale</span> <span class="pl-c1">*</span> <span class="pl-s1">zoom</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-useeditableimage-js-LC22" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">height</span>: <span class="pl-s1">inputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span> <span class="pl-c1">*</span> <span class="pl-s1">scale</span> <span class="pl-c1">*</span> <span class="pl-s1">zoom</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-useeditableimage-js-LC23" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-useeditableimage-js-LC24" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-useeditableimage-js-LC25" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Find out, in natural pixels, the desired visual center of the original (scaled) image</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-useeditableimage-js-LC26" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">idealCenter</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-useeditableimage-js-LC27" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">x</span>: <span class="pl-s1">newDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span> <span class="pl-c1">*</span> <span class="pl-kos">(</span><span class="pl-s1">focalPoint</span><span class="pl-kos">.</span><span class="pl-c1">x</span> <span class="pl-c1">/</span> <span class="pl-c1">100</span><span class="pl-kos">)</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-useeditableimage-js-LC28" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">y</span>: <span class="pl-s1">newDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span> <span class="pl-c1">*</span> <span class="pl-kos">(</span><span class="pl-s1">focalPoint</span><span class="pl-kos">.</span><span class="pl-c1">y</span> <span class="pl-c1">/</span> <span class="pl-c1">100</span><span class="pl-kos">)</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-useeditableimage-js-LC29" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-useeditableimage-js-LC30" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-useeditableimage-js-LC31" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Determine the ideal top and left values (&lt;= 0) to adjust the image in order to have</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-useeditableimage-js-LC32" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// the *perfect* focal point match.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-useeditableimage-js-LC33" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">idealTop</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span> <span class="pl-c1">-</span> <span class="pl-kos">(</span><span class="pl-s1">idealCenter</span><span class="pl-kos">.</span><span class="pl-c1">y</span> <span class="pl-c1">-</span> <span class="pl-s1">outputCenter</span><span class="pl-kos">.</span><span class="pl-c1">y</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-useeditableimage-js-LC34" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">idealLeft</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span> <span class="pl-c1">-</span> <span class="pl-kos">(</span><span class="pl-s1">idealCenter</span><span class="pl-kos">.</span><span class="pl-c1">x</span> <span class="pl-c1">-</span> <span class="pl-s1">outputCenter</span><span class="pl-kos">.</span><span class="pl-c1">x</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-useeditableimage-js-LC35" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="file-useeditableimage-js-LC36" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// See how much "wiggle room" we actuall have to move the scaled image outside the bounds</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L37" class="blob-num js-line-number" data-line-number="37"></td>
        <td id="file-useeditableimage-js-LC37" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// before we run out of image (and end up with black bars).</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L38" class="blob-num js-line-number" data-line-number="38"></td>
        <td id="file-useeditableimage-js-LC38" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">maxLeft</span> <span class="pl-c1">=</span> <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span> <span class="pl-c1">-</span> <span class="pl-s1">newDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L39" class="blob-num js-line-number" data-line-number="39"></td>
        <td id="file-useeditableimage-js-LC39" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">maxTop</span> <span class="pl-c1">=</span> <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span> <span class="pl-c1">-</span> <span class="pl-s1">newDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L40" class="blob-num js-line-number" data-line-number="40"></td>
        <td id="file-useeditableimage-js-LC40" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L41" class="blob-num js-line-number" data-line-number="41"></td>
        <td id="file-useeditableimage-js-LC41" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Now calculate the realistic, usable top and left points, by moving the image as far as we can</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L42" class="blob-num js-line-number" data-line-number="42"></td>
        <td id="file-useeditableimage-js-LC42" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// (without running out of image, and getting black bars) to respect the focalPoint.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L43" class="blob-num js-line-number" data-line-number="43"></td>
        <td id="file-useeditableimage-js-LC43" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Where `max*` is the most we can move in a negative direction, and 0 is the max.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L44" class="blob-num js-line-number" data-line-number="44"></td>
        <td id="file-useeditableimage-js-LC44" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">realisticLeft</span> <span class="pl-c1">=</span> <span class="pl-en">clamp</span><span class="pl-kos">(</span><span class="pl-s1">idealLeft</span><span class="pl-kos">,</span> <span class="pl-s1">maxLeft</span><span class="pl-kos">,</span> <span class="pl-c1">0</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L45" class="blob-num js-line-number" data-line-number="45"></td>
        <td id="file-useeditableimage-js-LC45" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">realisticTop</span> <span class="pl-c1">=</span> <span class="pl-en">clamp</span><span class="pl-kos">(</span><span class="pl-s1">idealTop</span><span class="pl-kos">,</span> <span class="pl-s1">maxTop</span><span class="pl-kos">,</span> <span class="pl-c1">0</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L46" class="blob-num js-line-number" data-line-number="46"></td>
        <td id="file-useeditableimage-js-LC46" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L47" class="blob-num js-line-number" data-line-number="47"></td>
        <td id="file-useeditableimage-js-LC47" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Round everything to the nearest whole number</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L48" class="blob-num js-line-number" data-line-number="48"></td>
        <td id="file-useeditableimage-js-LC48" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">top</span> <span class="pl-c1">=</span> <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">floor</span><span class="pl-kos">(</span><span class="pl-s1">realisticTop</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L49" class="blob-num js-line-number" data-line-number="49"></td>
        <td id="file-useeditableimage-js-LC49" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">left</span> <span class="pl-c1">=</span> <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">floor</span><span class="pl-kos">(</span><span class="pl-s1">realisticLeft</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L50" class="blob-num js-line-number" data-line-number="50"></td>
        <td id="file-useeditableimage-js-LC50" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">width</span> <span class="pl-c1">=</span> <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">floor</span><span class="pl-kos">(</span><span class="pl-s1">newDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L51" class="blob-num js-line-number" data-line-number="51"></td>
        <td id="file-useeditableimage-js-LC51" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">height</span> <span class="pl-c1">=</span> <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">floor</span><span class="pl-kos">(</span><span class="pl-s1">newDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L52" class="blob-num js-line-number" data-line-number="52"></td>
        <td id="file-useeditableimage-js-LC52" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L53" class="blob-num js-line-number" data-line-number="53"></td>
        <td id="file-useeditableimage-js-LC53" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">return</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L54" class="blob-num js-line-number" data-line-number="54"></td>
        <td id="file-useeditableimage-js-LC54" class="blob-code blob-code-inner js-file-line">    top<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L55" class="blob-num js-line-number" data-line-number="55"></td>
        <td id="file-useeditableimage-js-LC55" class="blob-code blob-code-inner js-file-line">    left<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L56" class="blob-num js-line-number" data-line-number="56"></td>
        <td id="file-useeditableimage-js-LC56" class="blob-code blob-code-inner js-file-line">    width<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L57" class="blob-num js-line-number" data-line-number="57"></td>
        <td id="file-useeditableimage-js-LC57" class="blob-code blob-code-inner js-file-line">    height<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L58" class="blob-num js-line-number" data-line-number="58"></td>
        <td id="file-useeditableimage-js-LC58" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L59" class="blob-num js-line-number" data-line-number="59"></td>
        <td id="file-useeditableimage-js-LC59" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">}</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/c4a0c9775c011752f25a1bd4e214bfb6/raw/9c51ee78a3d48c402b2dfd02ae0a2f5ee21bd0e5/useEditableImage.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/c4a0c9775c011752f25a1bd4e214bfb6#file-useeditableimage-js">useEditableImage.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="F31Rnm">Let’s break it down step-by-step.</p>
<p id="zGTK4Z">The goal is to place the focal point of the image as <em>close as possible</em> to the visual center of the output image.</p>
<p id="eiLYzP">We start by finding the real pixel coordinates of the visual center of the output image:</p>
<div id="Kf8kRa"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/ef2d6114cdfffad4036566c3f0e7d1c2.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966726" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-useeditableimage-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-useeditableimage-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-useeditableimage-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// We aim to place the image's focal point in the visual center of the output image:</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-useeditableimage-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-s1">outputCenter</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-useeditableimage-js-LC3" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">x</span>: <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span> <span class="pl-c1">*</span> <span class="pl-c1">0.5</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-useeditableimage-js-LC4" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">y</span>: <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span> <span class="pl-c1">*</span> <span class="pl-c1">0.5</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-useeditableimage-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">}</span><span class="pl-kos">;</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/ef2d6114cdfffad4036566c3f0e7d1c2/raw/94ba28704ccd96c427f472b2238ca88b6354a356/useEditableImage.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/ef2d6114cdfffad4036566c3f0e7d1c2#file-useeditableimage-js">useEditableImage.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="yIMBSg">Then, we determine how much we need to scale the image to fit within the bounds. We emulate CSS’s <strong>background-position: cover</strong> with <strong>Math.max</strong>:</p>
<div id="wCq8ea"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/69b3915afae9891a798e6d04b7a12375.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966734" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-useeditableimage-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-useeditableimage-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-useeditableimage-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// Determine how much we need to scale the input image to fit into the output constraints.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-useeditableimage-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// Note: we're using Math.max to emulate CSS's `contain: cover` behavior.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-useeditableimage-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">var</span> <span class="pl-s1">scale</span> <span class="pl-c1">=</span> <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-useeditableimage-js-LC4" class="blob-code blob-code-inner js-file-line">  <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span> <span class="pl-c1">/</span> <span class="pl-s1">inputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-useeditableimage-js-LC5" class="blob-code blob-code-inner js-file-line">  <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span> <span class="pl-c1">/</span> <span class="pl-s1">inputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-useeditableimage-js-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/69b3915afae9891a798e6d04b7a12375/raw/db06d223b9d46ae743d800c2b32c05937c9d3e61/useEditableImage.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/69b3915afae9891a798e6d04b7a12375#file-useeditableimage-js">useEditableImage.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="5eajuM">We take that scale factor, in addition to a zoom factor, and apply it to the original image dimensions. In most cases, this will make the image larger than the canvas.</p>
<div id="wZ1p1d"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/162ffb0b9c49032a5ea42b5b4966bf32.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966743" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-useeditableimage-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-useeditableimage-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-useeditableimage-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// newDimensions will always (by construction) be equal-to-or-larger than their outputDimensions equivalent.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-useeditableimage-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// This means top &amp; left values will be less-than-or-equal-to-zero.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-useeditableimage-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-s1">newDimensions</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-useeditableimage-js-LC4" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">width</span>: <span class="pl-s1">inputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span> <span class="pl-c1">*</span> <span class="pl-s1">scale</span> <span class="pl-c1">*</span> <span class="pl-s1">zoom</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-useeditableimage-js-LC5" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">height</span>: <span class="pl-s1">inputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span> <span class="pl-c1">*</span> <span class="pl-s1">scale</span> <span class="pl-c1">*</span> <span class="pl-s1">zoom</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-useeditableimage-js-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">}</span><span class="pl-kos">;</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/162ffb0b9c49032a5ea42b5b4966bf32/raw/0ebbc52abc642beab976ce15e48311a5f31e2a24/useEditableImage.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/162ffb0b9c49032a5ea42b5b4966bf32#file-useeditableimage-js">useEditableImage.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="vyaohS">Next, we determine an “ideal center” for the image by resolving the focal point of the scaled image.</p>
<div id="nVUt49"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/a45b166a728f0494403374eefad4cd11.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966749" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-useeditableimage-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-useeditableimage-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-useeditableimage-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// Find out, in natural pixels, the desired visual center of the original (scaled) image</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-useeditableimage-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-s1">idealCenter</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-useeditableimage-js-LC3" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">x</span>: <span class="pl-s1">newDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span> * <span class="pl-kos">(</span><span class="pl-s1">focalPoint</span><span class="pl-kos">.</span><span class="pl-c1">x</span> / <span class="pl-c1">100</span><span class="pl-kos">)</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-useeditableimage-js-LC4" class="blob-code blob-code-inner js-file-line">  <span class="pl-c1">y</span>: <span class="pl-s1">newDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span> * <span class="pl-kos">(</span><span class="pl-s1">focalPoint</span><span class="pl-kos">.</span><span class="pl-c1">y</span> / <span class="pl-c1">100</span><span class="pl-kos">)</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-useeditableimage-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">}</span><span class="pl-kos">;</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/a45b166a728f0494403374eefad4cd11/raw/259d17a37d7023612de7fd0148e6f17ab1db980b/useEditableImage.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/a45b166a728f0494403374eefad4cd11#file-useeditableimage-js">useEditableImage.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="vJoZaX">This is where my brain starts to sweat. It helps me to imagine holding a landscape picture frame over a portrait photo, and moving the photo underneath to find the right positioning:</p>
<div id="xzONe0"><video src="https://cdn.concert.io/debut-image-assets/assets/blog/animate_image.mp4" loading="lazy" style="max-width: 100%; margin-bottom: 1em;" muted="" autoplay="" loop="" playsinline=""></video></div>
<p id="Pc2leE">Finally, we attempt to overlay the original image’s center at the visual center of the output dimensions (as determined in the first step):</p>
<div id="tl6Ynd"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/46df6ea52543d1d2872b21482a4a4ed5.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966778" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-useeditableimage-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-useeditableimage-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-useeditableimage-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// Determine the ideal top and left values (&lt;= 0) to adjust the image in order to have</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-useeditableimage-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// the *perfect* focal point match.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-useeditableimage-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-s1">idealTop</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span> <span class="pl-c1">-</span> <span class="pl-kos">(</span><span class="pl-s1">idealCenter</span><span class="pl-kos">.</span><span class="pl-c1">y</span> <span class="pl-c1">-</span> <span class="pl-s1">outputCenter</span><span class="pl-kos">.</span><span class="pl-c1">y</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-useeditableimage-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-s1">idealLeft</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span> <span class="pl-c1">-</span> <span class="pl-kos">(</span><span class="pl-s1">idealCenter</span><span class="pl-kos">.</span><span class="pl-c1">x</span> <span class="pl-c1">-</span> <span class="pl-s1">outputCenter</span><span class="pl-kos">.</span><span class="pl-c1">x</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/46df6ea52543d1d2872b21482a4a4ed5/raw/baf58027c8009faeeed7dbcd39ba9a15b6ba503e/useEditableImage.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/46df6ea52543d1d2872b21482a4a4ed5#file-useeditableimage-js">useEditableImage.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="2QjKV1">It’s possible that we won’t be able to use this ideal positioning. For example, the user might select a focal point on the extreme edge of the canvas. We don’t want black bars on the edges of the image (known as <a href="https://en.wikipedia.org/wiki/Letterboxing_(filming)">letterboxing or pillarboxing</a>).</p>
<p id="oMylO1">So we need to make a compromise and find a realistic top and left position for the image within the frame. We do this by calculating how much “wiggle room” we have by finding the difference in dimensions between the scaled input image dimensions and the output image dimensions.</p>
<div id="YUkkpz"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/0bcd69a8b3fd80f1827348c6dee1632c.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966785" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-useeditableimage-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-useeditableimage-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-useeditableimage-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// See how much "wiggle room" we actuall have to move the scaled image outside the bounds</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-useeditableimage-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// before we run out of image (and end up with black bars).</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-useeditableimage-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-s1">maxLeft</span> <span class="pl-c1">=</span> <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span> <span class="pl-c1">-</span> <span class="pl-s1">newDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-useeditableimage-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-s1">maxTop</span> <span class="pl-c1">=</span> <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span> <span class="pl-c1">-</span> <span class="pl-s1">newDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-useeditableimage-js-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-useeditableimage-js-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// Now calculate the realistic, usable top and left points, by moving the image as far as we can</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-useeditableimage-js-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// (without running out of image, and getting black bars) to respect the focalPoint.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-useeditableimage-js-LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// Where `max*` is the most we can move in a negative direction, and 0 is the max.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-useeditableimage-js-LC9" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-s1">realisticLeft</span> <span class="pl-c1">=</span> <span class="pl-en">clamp</span><span class="pl-kos">(</span><span class="pl-s1">idealLeft</span><span class="pl-kos">,</span> <span class="pl-s1">maxLeft</span><span class="pl-kos">,</span> <span class="pl-c1">0</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-useeditableimage-js-LC10" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-s1">realisticTop</span> <span class="pl-c1">=</span> <span class="pl-en">clamp</span><span class="pl-kos">(</span><span class="pl-s1">idealTop</span><span class="pl-kos">,</span> <span class="pl-s1">maxTop</span><span class="pl-kos">,</span> <span class="pl-c1">0</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/0bcd69a8b3fd80f1827348c6dee1632c/raw/39a7d84a3d29912b84c82baa7dc74fa5e2ae02a1/useEditableImage.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/0bcd69a8b3fd80f1827348c6dee1632c#file-useeditableimage-js">useEditableImage.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="0gnArq">Then we clamp the ideal top and left coordinates between the max values (which are actually negative numbers: as far top and left off-canvas as possible) and zero, which would align the image perfectly at the top left corner of the canvas.</p>
<p id="9u4K7s">The return values from this function are whole numbers: top, left, width and height.</p>
<div id="qEIoKs"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/1ffedc1d4a62b7a69956a4d30f0fc802.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966790" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-useeditableimage-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-useeditableimage-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-useeditableimage-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c">// Round everything to the nearest whole number</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-useeditableimage-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-s1">top</span> <span class="pl-c1">=</span> <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">floor</span><span class="pl-kos">(</span><span class="pl-s1">realisticTop</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-useeditableimage-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-s1">left</span> <span class="pl-c1">=</span> <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">floor</span><span class="pl-kos">(</span><span class="pl-s1">realisticLeft</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-useeditableimage-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-s1">width</span> <span class="pl-c1">=</span> <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">floor</span><span class="pl-kos">(</span><span class="pl-s1">newDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-useeditableimage-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-s1">height</span> <span class="pl-c1">=</span> <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">floor</span><span class="pl-kos">(</span><span class="pl-s1">newDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-useeditableimage-js-LC6" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-useeditableimage-js-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-k">return</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-useeditableimage-js-LC8" class="blob-code blob-code-inner js-file-line">  top<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-useeditableimage-js-LC9" class="blob-code blob-code-inner js-file-line">  left<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-useeditableimage-js-LC10" class="blob-code blob-code-inner js-file-line">  width<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-useeditableimage-js-LC11" class="blob-code blob-code-inner js-file-line">  height<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-useeditableimage-js-LC12" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">}</span><span class="pl-kos">;</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/1ffedc1d4a62b7a69956a4d30f0fc802/raw/5f68ca91215b6b55ae17d4b54791e2f9d57bf875/useEditableImage.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/1ffedc1d4a62b7a69956a4d30f0fc802#file-useeditableimage-js">useEditableImage.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="YRH5Oe">Now that we have the transform coordinates, we use them to draw the image on the canvas. We call <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob">Canvas.toBlob()</a> and return an in-memory representation of this drawn image from this function.</p>
<div id="ZJk3Ho"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/51e9a7c079a74f8bda1332715730de55.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966807" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-useeditableimage-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-useeditableimage-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-useeditableimage-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c">/**</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-useeditableimage-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> * Process an image at a given `url` to match a set of output `dimensions`</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-useeditableimage-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> * at a given `focalPoint` (x and y whole numbers, as percentages) and zoom factor (between 1..3). Done in-memory using `&lt;canvas&gt;`.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-useeditableimage-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> */</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-useeditableimage-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-k">function</span> <span class="pl-en">processImage</span><span class="pl-kos">(</span><span class="pl-kos">{</span> url<span class="pl-kos">,</span> focalPoint<span class="pl-kos">,</span> dimensions<span class="pl-kos">,</span> fileType<span class="pl-kos">,</span> zoom <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-useeditableimage-js-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-v">Promise</span><span class="pl-kos">(</span><span class="pl-s1">resolve</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-useeditableimage-js-LC7" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-s1">canvas</span> <span class="pl-c1">=</span> <span class="pl-smi">document</span><span class="pl-kos">.</span><span class="pl-en">createElement</span><span class="pl-kos">(</span><span class="pl-s">'canvas'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-useeditableimage-js-LC8" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-s1">ctx</span> <span class="pl-c1">=</span> <span class="pl-s1">canvas</span><span class="pl-kos">.</span><span class="pl-en">getContext</span><span class="pl-kos">(</span><span class="pl-s">'2d'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-useeditableimage-js-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-s1">img</span> <span class="pl-c1">=</span> <span class="pl-smi">document</span><span class="pl-kos">.</span><span class="pl-en">createElement</span><span class="pl-kos">(</span><span class="pl-s">'img'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-useeditableimage-js-LC10" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-s1">isExternalUrl</span> <span class="pl-c1">=</span> <span class="pl-s1">url</span><span class="pl-kos">.</span><span class="pl-en">startsWith</span><span class="pl-kos">(</span><span class="pl-s">'https'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-useeditableimage-js-LC11" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-useeditableimage-js-LC12" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">// Only apply crossOrigin status if it's an external URL (and not an in-memory blob)</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-useeditableimage-js-LC13" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">isExternalUrl</span><span class="pl-kos">)</span> <span class="pl-s1">img</span><span class="pl-kos">.</span><span class="pl-c1">crossOrigin</span> <span class="pl-c1">=</span> <span class="pl-s">'anonymous'</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-useeditableimage-js-LC14" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-useeditableimage-js-LC15" class="blob-code blob-code-inner js-file-line">    <span class="pl-s1">img</span><span class="pl-kos">.</span><span class="pl-en">onload</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-useeditableimage-js-LC16" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">const</span> <span class="pl-s1">inputDimensions</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span> <span class="pl-c1">width</span>: <span class="pl-s1">img</span><span class="pl-kos">.</span><span class="pl-c1">naturalWidth</span><span class="pl-kos">,</span> <span class="pl-c1">height</span>: <span class="pl-s1">img</span><span class="pl-kos">.</span><span class="pl-c1">naturalHeight</span> <span class="pl-kos">}</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-useeditableimage-js-LC17" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">const</span> <span class="pl-s1">outputDimensions</span> <span class="pl-c1">=</span> <span class="pl-s1">dimensions</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-useeditableimage-js-LC18" class="blob-code blob-code-inner js-file-line">      <span class="pl-s1">canvas</span><span class="pl-kos">.</span><span class="pl-c1">width</span> <span class="pl-c1">=</span> <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-useeditableimage-js-LC19" class="blob-code blob-code-inner js-file-line">      <span class="pl-s1">canvas</span><span class="pl-kos">.</span><span class="pl-c1">height</span> <span class="pl-c1">=</span> <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-useeditableimage-js-LC20" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-useeditableimage-js-LC21" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">const</span> <span class="pl-kos">{</span> top<span class="pl-kos">,</span> left<span class="pl-kos">,</span> width<span class="pl-kos">,</span> height <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-en">getTransformCoordinates</span><span class="pl-kos">(</span><span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-useeditableimage-js-LC22" class="blob-code blob-code-inner js-file-line">        inputDimensions<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-useeditableimage-js-LC23" class="blob-code blob-code-inner js-file-line">        outputDimensions<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-useeditableimage-js-LC24" class="blob-code blob-code-inner js-file-line">        focalPoint<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-useeditableimage-js-LC25" class="blob-code blob-code-inner js-file-line">        zoom<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-useeditableimage-js-LC26" class="blob-code blob-code-inner js-file-line">      <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-useeditableimage-js-LC27" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-useeditableimage-js-LC28" class="blob-code blob-code-inner js-file-line">      <span class="pl-s1">ctx</span><span class="pl-kos">.</span><span class="pl-en">drawImage</span><span class="pl-kos">(</span><span class="pl-s1">img</span><span class="pl-kos">,</span> <span class="pl-s1">left</span><span class="pl-kos">,</span> <span class="pl-s1">top</span><span class="pl-kos">,</span> <span class="pl-s1">width</span><span class="pl-kos">,</span> <span class="pl-s1">height</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-useeditableimage-js-LC29" class="blob-code blob-code-inner js-file-line">      <span class="pl-s1">canvas</span><span class="pl-kos">.</span><span class="pl-en">toBlob</span><span class="pl-kos">(</span><span class="pl-s1">blob</span> <span class="pl-c1">=&gt;</span> <span class="pl-en">resolve</span><span class="pl-kos">(</span><span class="pl-s1">blob</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-s1">fileType</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-useeditableimage-js-LC30" class="blob-code blob-code-inner js-file-line">    <span class="pl-kos">}</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-useeditableimage-js-LC31" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-useeditableimage-js-LC32" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">/**</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-useeditableimage-js-LC33" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * If the image is cross-origin (e.g. coming from an S3 bucket), we need to add a cache-busting</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-useeditableimage-js-LC34" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * timestamp to the end of the URL. Otherwise, the browser attempts to use the in-memory version</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-useeditableimage-js-LC35" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * of the image asset which it has loaded *without* CORS information for the canvas operation above,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="file-useeditableimage-js-LC36" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * which requires an image *with* CORS information.</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L37" class="blob-num js-line-number" data-line-number="37"></td>
        <td id="file-useeditableimage-js-LC37" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     */</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L38" class="blob-num js-line-number" data-line-number="38"></td>
        <td id="file-useeditableimage-js-LC38" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-s1">src</span> <span class="pl-c1">=</span> <span class="pl-s1">isExternalUrl</span> ? <span class="pl-s1">url</span> <span class="pl-c1">+</span> <span class="pl-s">'?timestamp='</span> <span class="pl-c1">+</span> <span class="pl-v">Date</span><span class="pl-kos">.</span><span class="pl-en">now</span><span class="pl-kos">(</span><span class="pl-kos">)</span> : <span class="pl-s1">url</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L39" class="blob-num js-line-number" data-line-number="39"></td>
        <td id="file-useeditableimage-js-LC39" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L40" class="blob-num js-line-number" data-line-number="40"></td>
        <td id="file-useeditableimage-js-LC40" class="blob-code blob-code-inner js-file-line">    <span class="pl-s1">img</span><span class="pl-kos">.</span><span class="pl-c1">src</span> <span class="pl-c1">=</span> <span class="pl-s1">src</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L41" class="blob-num js-line-number" data-line-number="41"></td>
        <td id="file-useeditableimage-js-LC41" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L42" class="blob-num js-line-number" data-line-number="42"></td>
        <td id="file-useeditableimage-js-LC42" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">}</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/51e9a7c079a74f8bda1332715730de55/raw/5d672c902b065af7ed4f36c94f2cbb0caa2d25ae/useEditableImage.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/51e9a7c079a74f8bda1332715730de55#file-useeditableimage-js">useEditableImage.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="HuVXpa">Using the in-memory blob, we <strong>upload the image again</strong>. </p>
<p id="Xnp9vF">Why upload the same image twice? We want to ensure we always have a scaled, cropped version of the user’s image at all times. We wouldn’t want to traffic a giant image across our network, because we care about bandwidth and want to ensure our ads are performant. </p>
<p id="zmrnCN">We also can’t rely upon a user to make an initial edit to get this scaled version of the image — perhaps they like the way it looks on the first try, for example.</p>
<p id="LDQpvo">Finally, we call a user-provided <strong>onChange()</strong> function.</p>
<div id="J2IVnV"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/78187b91320811eadb8eb4947d33b357.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966828" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-useeditableimage-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-useeditableimage-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-useeditableimage-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">async</span> <span class="pl-k">function</span> <span class="pl-en">processNewImage</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-s1">file</span><span class="pl-kos">,</span> <span class="pl-s1">imageSize</span><span class="pl-kos">,</span> <span class="pl-s1">fileType</span> <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-useeditableimage-js-LC2" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">newImageUrl</span> <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-en">uploader</span><span class="pl-kos">(</span><span class="pl-s1">file</span><span class="pl-kos">,</span> <span class="pl-s1">fileType</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-useeditableimage-js-LC3" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-useeditableimage-js-LC4" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">let</span> <span class="pl-s1">processedImageUrl</span> <span class="pl-c1">=</span> <span class="pl-s1">newImageUrl</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-useeditableimage-js-LC5" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">focalPoint</span> <span class="pl-c1">=</span> <span class="pl-c1">DEFAULT_FOCAL_POINT</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-useeditableimage-js-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">zoom</span> <span class="pl-c1">=</span> <span class="pl-c1">DEFAULT_ZOOM</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-useeditableimage-js-LC7" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-useeditableimage-js-LC8" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">processedImage</span> <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-en">processImage</span><span class="pl-kos">(</span><span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-useeditableimage-js-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">url</span>: <span class="pl-s1">newImageUrl</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-useeditableimage-js-LC10" class="blob-code blob-code-inner js-file-line">    focalPoint<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-useeditableimage-js-LC11" class="blob-code blob-code-inner js-file-line">    dimensions<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-useeditableimage-js-LC12" class="blob-code blob-code-inner js-file-line">    fileType<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-useeditableimage-js-LC13" class="blob-code blob-code-inner js-file-line">    zoom<span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-useeditableimage-js-LC14" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-useeditableimage-js-LC15" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-useeditableimage-js-LC16" class="blob-code blob-code-inner js-file-line">  <span class="pl-s1">processedImageUrl</span> <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-en">uploader</span><span class="pl-kos">(</span><span class="pl-s1">processedImage</span><span class="pl-kos">,</span> <span class="pl-s1">fileType</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-useeditableimage-js-LC17" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-useeditableimage-js-LC18" class="blob-code blob-code-inner js-file-line">  <span class="pl-en">onChange</span><span class="pl-kos">(</span><span class="pl-s1">newValue</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-useeditableimage-js-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-useeditableimage-js-LC19" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">}</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/78187b91320811eadb8eb4947d33b357/raw/814290c36df5be5f52f449e0029d8269ea25f65e/useEditableImage.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/78187b91320811eadb8eb4947d33b357#file-useeditableimage-js">useEditableImage.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="rbgZuD">This persists the original image URL, focal point, zoom, and processed image URL to our ad assets payload. This gets synced with our GraphQL service. It also gets sent to our ad preview iframes within the creative builder for real-time updates.</p>
<h2 id="vvZqiG">Building a focal point picker</h2>
<p id="81oK3n">Rather than having the user specify the crop bounds of an image by hand, we decided to offer two explicit controls: a focal point picker and a zoom slider.</p>
<div id="AKaTnN"><video src="https://cdn.concert.io/debut-image-assets/assets/blog/focal_picker_slider.mp4" loading="lazy" style="max-width: 100%; margin-bottom: 1em;" muted="" autoplay="" loop="" playsinline=""></video></div>
<p id="BJx6yN">This keeps the experience the same for editing images for multiple canvas sizes (mobile and desktop).</p>
<p id="rIawsZ">We start by adding an <strong>ImageEditor</strong> component and a <strong>FocalPointPicker</strong> component which lives inside it.</p>
<p id="9UxE1B">Here’s the FocalPointPicker component in its entirety:</p>
<div id="dYeNTy"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/481c0b9dcb9518de190a41f2da4b7b40.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966857" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-focalpointpicker-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-focalpointpicker-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-focalpointpicker-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">mergeClasses</span><span class="pl-kos">,</span> <span class="pl-s1">clamp</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'@/lib/helpers'</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-focalpointpicker-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> <span class="pl-kos">{</span> <span class="pl-s1">useState</span><span class="pl-kos">,</span> <span class="pl-s1">useRef</span><span class="pl-kos">,</span> <span class="pl-s1">useEffect</span> <span class="pl-kos">}</span> <span class="pl-k">from</span> <span class="pl-s">'react'</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-focalpointpicker-js-LC3" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-focalpointpicker-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">HANDLE_SIZE_IN_PX</span> <span class="pl-c1">=</span> <span class="pl-c1">40</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-focalpointpicker-js-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-focalpointpicker-js-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-c">/**</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-focalpointpicker-js-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> * The Focal Point Picker is used to pick a focal point in the original value of an image.</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-focalpointpicker-js-LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> */</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-focalpointpicker-js-LC9" class="blob-code blob-code-inner js-file-line"><span class="pl-k">export</span> <span class="pl-k">default</span> <span class="pl-k">function</span> <span class="pl-v">FocalPointPicker</span><span class="pl-kos">(</span><span class="pl-kos">{</span> url<span class="pl-kos">,</span> focalPoint<span class="pl-kos">,</span> onChange<span class="pl-kos">,</span> className <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-focalpointpicker-js-LC10" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-kos">[</span><span class="pl-s1">isDragging</span><span class="pl-kos">,</span> <span class="pl-s1">setIsDragging</span><span class="pl-kos">]</span> <span class="pl-c1">=</span> <span class="pl-en">useState</span><span class="pl-kos">(</span><span class="pl-c1">false</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-focalpointpicker-js-LC11" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">handle</span> <span class="pl-c1">=</span> <span class="pl-en">useRef</span><span class="pl-kos">(</span><span class="pl-c1">null</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-focalpointpicker-js-LC12" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">image</span> <span class="pl-c1">=</span> <span class="pl-en">useRef</span><span class="pl-kos">(</span><span class="pl-c1">null</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-focalpointpicker-js-LC13" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-focalpointpicker-js-LC14" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">/**</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-focalpointpicker-js-LC15" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * When the mouse is moving, append the movement values to the existing coordinates.</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-focalpointpicker-js-LC16" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   *</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-focalpointpicker-js-LC17" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * <span class="pl-k">@param</span> {<span class="pl-smi">SyntheticEvent</span>} event</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-focalpointpicker-js-LC18" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   */</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-focalpointpicker-js-LC19" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">function</span> <span class="pl-en">handleMouseMove</span><span class="pl-kos">(</span><span class="pl-kos">{</span> movementX<span class="pl-kos">,</span> movementY <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-focalpointpicker-js-LC20" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-c1">!</span><span class="pl-s1">isDragging</span><span class="pl-kos">)</span> <span class="pl-k">return</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-focalpointpicker-js-LC21" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-focalpointpicker-js-LC22" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-kos">{</span> width<span class="pl-kos">,</span> height <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-s1">image</span><span class="pl-kos">.</span><span class="pl-c1">current</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-focalpointpicker-js-LC23" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-focalpointpicker-js-LC24" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-s1">percentDeltaX</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-s1">movementX</span> <span class="pl-c1">/</span> <span class="pl-s1">width</span><span class="pl-kos">)</span> <span class="pl-c1">*</span> <span class="pl-c1">100</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-focalpointpicker-js-LC25" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-s1">percentDeltaY</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-s1">movementY</span> <span class="pl-c1">/</span> <span class="pl-s1">height</span><span class="pl-kos">)</span> <span class="pl-c1">*</span> <span class="pl-c1">100</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-focalpointpicker-js-LC26" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-focalpointpicker-js-LC27" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-s1">x</span> <span class="pl-c1">=</span> <span class="pl-en">clamp</span><span class="pl-kos">(</span><span class="pl-s1">focalPoint</span><span class="pl-kos">.</span><span class="pl-c1">x</span> <span class="pl-c1">+</span> <span class="pl-s1">percentDeltaX</span><span class="pl-kos">,</span> <span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-c1">100</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-focalpointpicker-js-LC28" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-s1">y</span> <span class="pl-c1">=</span> <span class="pl-en">clamp</span><span class="pl-kos">(</span><span class="pl-s1">focalPoint</span><span class="pl-kos">.</span><span class="pl-c1">y</span> <span class="pl-c1">+</span> <span class="pl-s1">percentDeltaY</span><span class="pl-kos">,</span> <span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-c1">100</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-focalpointpicker-js-LC29" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-focalpointpicker-js-LC30" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">onChange</span><span class="pl-kos">(</span><span class="pl-kos">{</span> x<span class="pl-kos">,</span> y <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-focalpointpicker-js-LC31" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-focalpointpicker-js-LC32" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-focalpointpicker-js-LC33" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">/**</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-focalpointpicker-js-LC34" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * When a user clicks a part of the image without bothering to grab the handle first,</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-focalpointpicker-js-LC35" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * we record the event values, convert them to coordinates, and move the handle.</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="file-focalpointpicker-js-LC36" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   *</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L37" class="blob-num js-line-number" data-line-number="37"></td>
        <td id="file-focalpointpicker-js-LC37" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * <span class="pl-k">@param</span> {<span class="pl-smi">SyntheticEvent</span>} event</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L38" class="blob-num js-line-number" data-line-number="38"></td>
        <td id="file-focalpointpicker-js-LC38" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   */</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L39" class="blob-num js-line-number" data-line-number="39"></td>
        <td id="file-focalpointpicker-js-LC39" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">function</span> <span class="pl-en">handlePointSelection</span><span class="pl-kos">(</span><span class="pl-s1">event</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L40" class="blob-num js-line-number" data-line-number="40"></td>
        <td id="file-focalpointpicker-js-LC40" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-kos">{</span> clientX<span class="pl-kos">,</span> clientY <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-s1">event</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L41" class="blob-num js-line-number" data-line-number="41"></td>
        <td id="file-focalpointpicker-js-LC41" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-kos">{</span> left<span class="pl-kos">,</span> top <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-s1">event</span><span class="pl-kos">.</span><span class="pl-c1">target</span><span class="pl-kos">.</span><span class="pl-en">getBoundingClientRect</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L42" class="blob-num js-line-number" data-line-number="42"></td>
        <td id="file-focalpointpicker-js-LC42" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L43" class="blob-num js-line-number" data-line-number="43"></td>
        <td id="file-focalpointpicker-js-LC43" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-s1">posX</span> <span class="pl-c1">=</span> <span class="pl-s1">clientX</span> <span class="pl-c1">-</span> <span class="pl-s1">left</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L44" class="blob-num js-line-number" data-line-number="44"></td>
        <td id="file-focalpointpicker-js-LC44" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-s1">posY</span> <span class="pl-c1">=</span> <span class="pl-s1">clientY</span> <span class="pl-c1">-</span> <span class="pl-s1">top</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L45" class="blob-num js-line-number" data-line-number="45"></td>
        <td id="file-focalpointpicker-js-LC45" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L46" class="blob-num js-line-number" data-line-number="46"></td>
        <td id="file-focalpointpicker-js-LC46" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-kos">{</span> width<span class="pl-kos">,</span> height <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-s1">image</span><span class="pl-kos">.</span><span class="pl-c1">current</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L47" class="blob-num js-line-number" data-line-number="47"></td>
        <td id="file-focalpointpicker-js-LC47" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L48" class="blob-num js-line-number" data-line-number="48"></td>
        <td id="file-focalpointpicker-js-LC48" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">onChange</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">x</span>: <span class="pl-kos">(</span><span class="pl-s1">posX</span> <span class="pl-c1">/</span> <span class="pl-s1">width</span><span class="pl-kos">)</span> <span class="pl-c1">*</span> <span class="pl-c1">100</span><span class="pl-kos">,</span> <span class="pl-c1">y</span>: <span class="pl-kos">(</span><span class="pl-s1">posY</span> <span class="pl-c1">/</span> <span class="pl-s1">height</span><span class="pl-kos">)</span> <span class="pl-c1">*</span> <span class="pl-c1">100</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L49" class="blob-num js-line-number" data-line-number="49"></td>
        <td id="file-focalpointpicker-js-LC49" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L50" class="blob-num js-line-number" data-line-number="50"></td>
        <td id="file-focalpointpicker-js-LC50" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L51" class="blob-num js-line-number" data-line-number="51"></td>
        <td id="file-focalpointpicker-js-LC51" class="blob-code blob-code-inner js-file-line">  <span class="pl-en">useEffect</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L52" class="blob-num js-line-number" data-line-number="52"></td>
        <td id="file-focalpointpicker-js-LC52" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">/**</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L53" class="blob-num js-line-number" data-line-number="53"></td>
        <td id="file-focalpointpicker-js-LC53" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * Whenever the user lets up on the mouse, we convert the</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L54" class="blob-num js-line-number" data-line-number="54"></td>
        <td id="file-focalpointpicker-js-LC54" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     * x/y pixel coordinates to x/y percentages and fire the `onChange` event.</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L55" class="blob-num js-line-number" data-line-number="55"></td>
        <td id="file-focalpointpicker-js-LC55" class="blob-code blob-code-inner js-file-line"><span class="pl-c">     */</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L56" class="blob-num js-line-number" data-line-number="56"></td>
        <td id="file-focalpointpicker-js-LC56" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">function</span> <span class="pl-en">handleMouseUp</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L57" class="blob-num js-line-number" data-line-number="57"></td>
        <td id="file-focalpointpicker-js-LC57" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-c1">!</span><span class="pl-s1">isDragging</span><span class="pl-kos">)</span> <span class="pl-k">return</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L58" class="blob-num js-line-number" data-line-number="58"></td>
        <td id="file-focalpointpicker-js-LC58" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L59" class="blob-num js-line-number" data-line-number="59"></td>
        <td id="file-focalpointpicker-js-LC59" class="blob-code blob-code-inner js-file-line">      <span class="pl-s1">setIsDragging</span><span class="pl-kos">(</span><span class="pl-c1">false</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L60" class="blob-num js-line-number" data-line-number="60"></td>
        <td id="file-focalpointpicker-js-LC60" class="blob-code blob-code-inner js-file-line">    <span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L61" class="blob-num js-line-number" data-line-number="61"></td>
        <td id="file-focalpointpicker-js-LC61" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi">window</span><span class="pl-kos">.</span><span class="pl-en">addEventListener</span><span class="pl-kos">(</span><span class="pl-s">'mouseup'</span><span class="pl-kos">,</span> <span class="pl-s1">handleMouseUp</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L62" class="blob-num js-line-number" data-line-number="62"></td>
        <td id="file-focalpointpicker-js-LC62" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L63" class="blob-num js-line-number" data-line-number="63"></td>
        <td id="file-focalpointpicker-js-LC63" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L64" class="blob-num js-line-number" data-line-number="64"></td>
        <td id="file-focalpointpicker-js-LC64" class="blob-code blob-code-inner js-file-line">      <span class="pl-smi">window</span><span class="pl-kos">.</span><span class="pl-en">removeEventListener</span><span class="pl-kos">(</span><span class="pl-s">'mouseup'</span><span class="pl-kos">,</span> <span class="pl-s1">handleMouseUp</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L65" class="blob-num js-line-number" data-line-number="65"></td>
        <td id="file-focalpointpicker-js-LC65" class="blob-code blob-code-inner js-file-line">    <span class="pl-kos">}</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L66" class="blob-num js-line-number" data-line-number="66"></td>
        <td id="file-focalpointpicker-js-LC66" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span><span class="pl-kos">,</span> <span class="pl-kos">[</span><span class="pl-s1">isDragging</span><span class="pl-kos">,</span> <span class="pl-s1">onChange</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L67" class="blob-num js-line-number" data-line-number="67"></td>
        <td id="file-focalpointpicker-js-LC67" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L68" class="blob-num js-line-number" data-line-number="68"></td>
        <td id="file-focalpointpicker-js-LC68" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">classList</span> <span class="pl-c1">=</span> <span class="pl-en">mergeClasses</span><span class="pl-kos">(</span><span class="pl-s">''</span><span class="pl-kos">,</span> <span class="pl-s1">className</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L69" class="blob-num js-line-number" data-line-number="69"></td>
        <td id="file-focalpointpicker-js-LC69" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L70" class="blob-num js-line-number" data-line-number="70"></td>
        <td id="file-focalpointpicker-js-LC70" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">return</span> <span class="pl-kos">(</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L71" class="blob-num js-line-number" data-line-number="71"></td>
        <td id="file-focalpointpicker-js-LC71" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">&lt;</span><span class="pl-ent">div</span> <span class="pl-c1">className</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">classList</span><span class="pl-kos">}</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L72" class="blob-num js-line-number" data-line-number="72"></td>
        <td id="file-focalpointpicker-js-LC72" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">&lt;</span><span class="pl-ent">div</span> <span class="pl-c1">className</span><span class="pl-c1">=</span><span class="pl-s">"relative bg-black overflow-hidden mb-2"</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L73" class="blob-num js-line-number" data-line-number="73"></td>
        <td id="file-focalpointpicker-js-LC73" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">&lt;</span><span class="pl-ent">img</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L74" class="blob-num js-line-number" data-line-number="74"></td>
        <td id="file-focalpointpicker-js-LC74" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">ref</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">image</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L75" class="blob-num js-line-number" data-line-number="75"></td>
        <td id="file-focalpointpicker-js-LC75" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">onMouseDown</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">e</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L76" class="blob-num js-line-number" data-line-number="76"></td>
        <td id="file-focalpointpicker-js-LC76" class="blob-code blob-code-inner js-file-line">            <span class="pl-en">handlePointSelection</span><span class="pl-kos">(</span><span class="pl-s1">e</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L77" class="blob-num js-line-number" data-line-number="77"></td>
        <td id="file-focalpointpicker-js-LC77" class="blob-code blob-code-inner js-file-line">            <span class="pl-s1">setIsDragging</span><span class="pl-kos">(</span><span class="pl-c1">true</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L78" class="blob-num js-line-number" data-line-number="78"></td>
        <td id="file-focalpointpicker-js-LC78" class="blob-code blob-code-inner js-file-line">          <span class="pl-kos">}</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L79" class="blob-num js-line-number" data-line-number="79"></td>
        <td id="file-focalpointpicker-js-LC79" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">onMouseMove</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">handleMouseMove</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L80" class="blob-num js-line-number" data-line-number="80"></td>
        <td id="file-focalpointpicker-js-LC80" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">className</span><span class="pl-c1">=</span><span class="pl-s">"max-w-full opacity-50 bg-black select-none"</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L81" class="blob-num js-line-number" data-line-number="81"></td>
        <td id="file-focalpointpicker-js-LC81" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">src</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">url</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L82" class="blob-num js-line-number" data-line-number="82"></td>
        <td id="file-focalpointpicker-js-LC82" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">alt</span><span class="pl-c1">=</span><span class="pl-s">"Original image"</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L83" class="blob-num js-line-number" data-line-number="83"></td>
        <td id="file-focalpointpicker-js-LC83" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">data-testid</span><span class="pl-c1">=</span><span class="pl-s">"focal-point-image"</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L84" class="blob-num js-line-number" data-line-number="84"></td>
        <td id="file-focalpointpicker-js-LC84" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">/</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L85" class="blob-num js-line-number" data-line-number="85"></td>
        <td id="file-focalpointpicker-js-LC85" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">&lt;</span><span class="pl-ent">div</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L86" class="blob-num js-line-number" data-line-number="86"></td>
        <td id="file-focalpointpicker-js-LC86" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">ref</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">handle</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L87" class="blob-num js-line-number" data-line-number="87"></td>
        <td id="file-focalpointpicker-js-LC87" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">onMouseMove</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">handleMouseMove</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L88" class="blob-num js-line-number" data-line-number="88"></td>
        <td id="file-focalpointpicker-js-LC88" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">onMouseDown</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-s1">setIsDragging</span><span class="pl-kos">(</span><span class="pl-c1">true</span><span class="pl-kos">)</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L89" class="blob-num js-line-number" data-line-number="89"></td>
        <td id="file-focalpointpicker-js-LC89" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">className</span><span class="pl-c1">=</span><span class="pl-s">"rounded-full absolute border border-white cursor-move overflow-hidden"</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L90" class="blob-num js-line-number" data-line-number="90"></td>
        <td id="file-focalpointpicker-js-LC90" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">style</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L91" class="blob-num js-line-number" data-line-number="91"></td>
        <td id="file-focalpointpicker-js-LC91" class="blob-code blob-code-inner js-file-line">            <span class="pl-c1">left</span>: <span class="pl-s">`<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">focalPoint</span><span class="pl-kos">.</span><span class="pl-c1">x</span><span class="pl-kos">}</span></span>%`</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L92" class="blob-num js-line-number" data-line-number="92"></td>
        <td id="file-focalpointpicker-js-LC92" class="blob-code blob-code-inner js-file-line">            <span class="pl-c1">top</span>: <span class="pl-s">`<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">focalPoint</span><span class="pl-kos">.</span><span class="pl-c1">y</span><span class="pl-kos">}</span></span>%`</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L93" class="blob-num js-line-number" data-line-number="93"></td>
        <td id="file-focalpointpicker-js-LC93" class="blob-code blob-code-inner js-file-line">            <span class="pl-c1">width</span>: <span class="pl-s">`<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-c1">HANDLE_SIZE_IN_PX</span><span class="pl-kos">}</span></span>px`</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L94" class="blob-num js-line-number" data-line-number="94"></td>
        <td id="file-focalpointpicker-js-LC94" class="blob-code blob-code-inner js-file-line">            <span class="pl-c1">height</span>: <span class="pl-s">`<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-c1">HANDLE_SIZE_IN_PX</span><span class="pl-kos">}</span></span>px`</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L95" class="blob-num js-line-number" data-line-number="95"></td>
        <td id="file-focalpointpicker-js-LC95" class="blob-code blob-code-inner js-file-line">            <span class="pl-c1">marginLeft</span>: <span class="pl-s">`-<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-c1">HANDLE_SIZE_IN_PX</span> <span class="pl-c1">/</span> <span class="pl-c1">2</span><span class="pl-kos">}</span></span>px`</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L96" class="blob-num js-line-number" data-line-number="96"></td>
        <td id="file-focalpointpicker-js-LC96" class="blob-code blob-code-inner js-file-line">            <span class="pl-c1">marginTop</span>: <span class="pl-s">`-<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-c1">HANDLE_SIZE_IN_PX</span> <span class="pl-c1">/</span> <span class="pl-c1">2</span><span class="pl-kos">}</span></span>px`</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L97" class="blob-num js-line-number" data-line-number="97"></td>
        <td id="file-focalpointpicker-js-LC97" class="blob-code blob-code-inner js-file-line">          <span class="pl-kos">}</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L98" class="blob-num js-line-number" data-line-number="98"></td>
        <td id="file-focalpointpicker-js-LC98" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L99" class="blob-num js-line-number" data-line-number="99"></td>
        <td id="file-focalpointpicker-js-LC99" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">&lt;</span><span class="pl-ent">div</span> <span class="pl-c1">className</span><span class="pl-c1">=</span><span class="pl-s">"bg-white w-full h-full"</span> <span class="pl-c1">style</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-kos">{</span> <span class="pl-c1">mixBlendMode</span>: <span class="pl-s">'overlay'</span> <span class="pl-kos">}</span><span class="pl-kos">}</span><span class="pl-c1">&gt;</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-ent">div</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L100" class="blob-num js-line-number" data-line-number="100"></td>
        <td id="file-focalpointpicker-js-LC100" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-ent">div</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L101" class="blob-num js-line-number" data-line-number="101"></td>
        <td id="file-focalpointpicker-js-LC101" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-ent">div</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L102" class="blob-num js-line-number" data-line-number="102"></td>
        <td id="file-focalpointpicker-js-LC102" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-ent">div</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L103" class="blob-num js-line-number" data-line-number="103"></td>
        <td id="file-focalpointpicker-js-LC103" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-focalpointpicker-js-L104" class="blob-num js-line-number" data-line-number="104"></td>
        <td id="file-focalpointpicker-js-LC104" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">}</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/481c0b9dcb9518de190a41f2da4b7b40/raw/54c5fbe97d19a5ea28a77836e74eba2a1bbb5cca/FocalPointPicker.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/481c0b9dcb9518de190a41f2da4b7b40#file-focalpointpicker-js">FocalPointPicker.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="oEM5Sb">This component accepts a string representing the URL of the original, unprocessed image; the current <strong>focalPoint</strong>; and an <strong>onChange</strong> callback.</p>
<p id="KFajiC">We display the original image for focal point selection in a standard <strong>&lt;img&gt;</strong> tag with 50% CSS opacity. Its container gets a black background to make it more obvious where the light-colored focal point handle resides.</p>
<p id="U2v34j">Then, we render a “handle” and position it absolutely over the image. This serves as the UI the user can click and drag over the image to interactively position their desired focal point.</p>
<p id="WIP11m">Inside the handle, we render a white circle with the <strong>mix-blend-mode: overlay</strong>. This gives a “flashlight” effect to the handle, brightening the focused area of the darkened image below.</p>
  <figure class="e-image">
  <span class="e-image__inner">
    
    <span class="e-image__image " data-original="https://cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg">
      
        <picture class="c-picture" data-cid="site/picture_element-1615485689_6642_6911" data-cdata="{&quot;asset_id&quot;:21972071,&quot;ratio&quot;:&quot;*&quot;}">
  


  <source srcset="https://cdn.vox-cdn.com/thumbor/eCAqMvtTbDn11CAm25HTTrCiLnE=/0x0:1404x922/320x0/filters:focal(0x0:1404x922):format(webp):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 320w, https://cdn.vox-cdn.com/thumbor/rdvSu6G3iXhQY2ddIUOeiHRIbQ8=/0x0:1404x922/520x0/filters:focal(0x0:1404x922):format(webp):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 520w, https://cdn.vox-cdn.com/thumbor/iiz5BCWTLW7Io-jv7v135hRGXqM=/0x0:1404x922/720x0/filters:focal(0x0:1404x922):format(webp):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 720w, https://cdn.vox-cdn.com/thumbor/qHpaTligknCYPgDxcEZKHOry4sI=/0x0:1404x922/920x0/filters:focal(0x0:1404x922):format(webp):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 920w, https://cdn.vox-cdn.com/thumbor/P3mcN6dDrEDnLmi2c9AVsu3l8RY=/0x0:1404x922/1120x0/filters:focal(0x0:1404x922):format(webp):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 1120w, https://cdn.vox-cdn.com/thumbor/xkm_1VFZgdyJ3DxeRviimDfYTlQ=/0x0:1404x922/1320x0/filters:focal(0x0:1404x922):format(webp):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 1320w, https://cdn.vox-cdn.com/thumbor/tUn6qKQUF97aNyMf9pBqh7izFZk=/0x0:1404x922/1520x0/filters:focal(0x0:1404x922):format(webp):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 1520w, https://cdn.vox-cdn.com/thumbor/HC3viTNgoU0RilzMxl_DwZNEGIs=/0x0:1404x922/1720x0/filters:focal(0x0:1404x922):format(webp):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 1720w, https://cdn.vox-cdn.com/thumbor/NegdxPQCKezYveHpd0aqhNhSW6g=/0x0:1404x922/1920x0/filters:focal(0x0:1404x922):format(webp):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 1920w" sizes="(min-width: 1221px) 846px, (min-width: 880px) calc(100vw - 334px), 100vw" type="image/webp">


<img srcset="https://cdn.vox-cdn.com/thumbor/EqGvCHthlmWi-2KuFg4hIvUAieg=/0x0:1404x922/320x0/filters:focal(0x0:1404x922):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 320w, https://cdn.vox-cdn.com/thumbor/nkHbs_328tnA3u4vX9w4f3AZXhU=/0x0:1404x922/520x0/filters:focal(0x0:1404x922):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 520w, https://cdn.vox-cdn.com/thumbor/083ZFlXlfhJlWHxQtkybZ-a3fl0=/0x0:1404x922/720x0/filters:focal(0x0:1404x922):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 720w, https://cdn.vox-cdn.com/thumbor/lZykRqeGZ5bFA2zumWyAagHYkFY=/0x0:1404x922/920x0/filters:focal(0x0:1404x922):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 920w, https://cdn.vox-cdn.com/thumbor/WjEwCtTkMhVuARncpXOBO6vEe7g=/0x0:1404x922/1120x0/filters:focal(0x0:1404x922):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 1120w, https://cdn.vox-cdn.com/thumbor/Qq5LToNy5sTKH0ZOqvKfSUoiLeQ=/0x0:1404x922/1320x0/filters:focal(0x0:1404x922):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 1320w, https://cdn.vox-cdn.com/thumbor/ss_fI34ayzq-CHBy8vugdc_736U=/0x0:1404x922/1520x0/filters:focal(0x0:1404x922):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 1520w, https://cdn.vox-cdn.com/thumbor/WKRuK1o11wYysJFdbWdR0dQLqks=/0x0:1404x922/1720x0/filters:focal(0x0:1404x922):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 1720w, https://cdn.vox-cdn.com/thumbor/CcGMSx4zQ8NTe25Rz8dc9gxxGPM=/0x0:1404x922/1920x0/filters:focal(0x0:1404x922):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/21972071/flashlight_handle.jpg 1920w" sizes="(min-width: 1221px) 846px, (min-width: 880px) calc(100vw - 334px), 100vw" alt="A dark photo of a cabin with a light-colored circle highlighting a spot in the center of the photo" data-upload-width="1404" src="./Building an in-browser image editor with React - Vox Product Blog_files/flashlight_handle.jpg" style="width: 1404px;">

</picture>

      
    </span>
    
  </span>
  
</figure>

<p id="W5UZb5">We want to track a couple different states within the image and the handle:</p>
<ul>
<li id="8R8kCz">When the user is dragging (<strong>onMouseDown</strong>, <strong>onMouseMove</strong>, <strong>onMouseUp</strong>)</li>
<li id="H2QK2I">When the user clicks an area of the image</li>
</ul>
<p id="VFRRQ7">To accomplish this, we add listeners for <strong>onMouseDown</strong> to both the image and the handle, and set an internal state <strong>isDragging</strong>.</p>
<p id="xmDEgQ">We add a listener to <strong>onMouseMove</strong> as well. This event conveniently includes a <strong>movementX</strong> and <strong>movementY</strong> delta payload - meaning we don’t have to track the journey of the user’s mouse and how far it’s traveled. Instead, we convert the pixel movement parameters into percentages, add them to the original focal point, and update the focal point</p>
<p id="sxYdEn">When the user clicks an area of the image, we get the top and left coordinates of the click event by doing some math to compare the image bounds with the click coordinates. Then we convert those coordinates to percentages within the image, and update the focal point.</p>
<p id="7iofI3">We also need to listen for when the user lets the mouse up to ensure we know that they have stopped dragging. This tells us we can stop calculating the new focal point with each movement.</p>
<p id="6nRArM">Once the user is happy with the focal point they have selected, they press the <strong>Save</strong> button. This kicks off a callback which propagates through the <strong>ImageEditor</strong> component. It fires another function returned from our <strong>useEditableImage</strong> hook: <strong>handleImageChange().</strong></p>
<p id="5N3xzI">We reuse the same math calculation from when the user uploaded the original image — only this time, we have a new <strong>focalPoint</strong> input.</p>
<p id="09APiw">This processed image is re-uploaded using a signed URL and is now ready for distribution on our CDN.</p>
<h3 id="pKPowi">Making the focal point picker accessible</h3>
<p id="Sx4Mzp">The focal picker we’ve built is really nice for users who are able to control a mouse and can see their screens for immediate feedback.</p>
<p id="cPivgt">But this excludes users who cannot use a mouse, or who cannot see their screen to see the focal point they have chosen.</p>
<p id="4P6CWG">Let’s fix that!</p>
<p id="puGPl6">Inside our focal point picker, we’ll add a new <strong>ManualPicker</strong> component.</p>
<p id="HvKLNJ">Here’s what it looks like:</p>
<div id="szLoga"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/09dcf6d3e3458f41b69f9bbfaeb0fbe5.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966868" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-manualpicker-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-manualpicker-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-manualpicker-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c">/**</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-manualpicker-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> * The Manual Picker is used as an accessible focal point picker. It is only activated when</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-manualpicker-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> * a user tabs to the picker through the keyboard, at which point is persists on the screen.</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-manualpicker-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> */</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-manualpicker-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-k">function</span> <span class="pl-v">ManualPicker</span><span class="pl-kos">(</span><span class="pl-kos">{</span> focalPoint<span class="pl-kos">,</span> onChange <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-manualpicker-js-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-kos">[</span><span class="pl-s1">isFocused</span><span class="pl-kos">,</span> <span class="pl-s1">setIsFocused</span><span class="pl-kos">]</span> <span class="pl-c1">=</span> <span class="pl-en">useState</span><span class="pl-kos">(</span><span class="pl-c1">false</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-manualpicker-js-LC7" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-kos">[</span><span class="pl-s1">proposedFocalPoint</span><span class="pl-kos">,</span> <span class="pl-s1">setProposedFocalPoint</span><span class="pl-kos">]</span> <span class="pl-c1">=</span> <span class="pl-en">useState</span><span class="pl-kos">(</span><span class="pl-s1">focalPoint</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-manualpicker-js-LC8" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-kos">{</span> x<span class="pl-kos">,</span> y <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-s1">proposedFocalPoint</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-manualpicker-js-LC9" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-manualpicker-js-LC10" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">classList</span> <span class="pl-c1">=</span> <span class="pl-en">mergeClasses</span><span class="pl-kos">(</span><span class="pl-c1">!</span><span class="pl-s1">isFocused</span> <span class="pl-c1">&amp;&amp;</span> <span class="pl-s">'sr-only'</span><span class="pl-kos">,</span> <span class="pl-s1">isFocused</span> <span class="pl-c1">&amp;&amp;</span> <span class="pl-s">'block mb-4 flex justify-between'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-manualpicker-js-LC11" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-manualpicker-js-LC12" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">/**</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-manualpicker-js-LC13" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * When the user changes the manual focal point, we update the internal `proposedFocalPoint`</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-manualpicker-js-LC14" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * only in order to reflect the changes in the UI. It's not until the user `blur`s away from</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-manualpicker-js-LC15" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * the elements that we persist the change to the parent.</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-manualpicker-js-LC16" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   *</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-manualpicker-js-LC17" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   * <span class="pl-k">@param</span> {<span class="pl-smi">SyntheticEvent</span>} event</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-manualpicker-js-LC18" class="blob-code blob-code-inner js-file-line"><span class="pl-c">   */</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-manualpicker-js-LC19" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">function</span> <span class="pl-en">handleChange</span><span class="pl-kos">(</span><span class="pl-s1">event</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-manualpicker-js-LC20" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">const</span> <span class="pl-kos">{</span> name<span class="pl-kos">,</span> value <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-s1">event</span><span class="pl-kos">.</span><span class="pl-c1">target</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-manualpicker-js-LC21" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-manualpicker-js-LC22" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">let</span> <span class="pl-s1">newValue</span> <span class="pl-c1">=</span> <span class="pl-en">clamp</span><span class="pl-kos">(</span><span class="pl-en">parseFloat</span><span class="pl-kos">(</span><span class="pl-s1">value</span> <span class="pl-c1">||</span> <span class="pl-c1">0</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-c1">100</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-manualpicker-js-LC23" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-manualpicker-js-LC24" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-en">isNaN</span><span class="pl-kos">(</span><span class="pl-s1">newValue</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-manualpicker-js-LC25" class="blob-code blob-code-inner js-file-line">      <span class="pl-k">return</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-manualpicker-js-LC26" class="blob-code blob-code-inner js-file-line">    <span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-manualpicker-js-LC27" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-manualpicker-js-LC28" class="blob-code blob-code-inner js-file-line">    <span class="pl-s1">setProposedFocalPoint</span><span class="pl-kos">(</span><span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-manualpicker-js-LC29" class="blob-code blob-code-inner js-file-line">      ...<span class="pl-s1">proposedFocalPoint</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-manualpicker-js-LC30" class="blob-code blob-code-inner js-file-line">      <span class="pl-kos">[</span><span class="pl-s1">name</span><span class="pl-kos">]</span>: <span class="pl-s1">newValue</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-manualpicker-js-LC31" class="blob-code blob-code-inner js-file-line">    <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-manualpicker-js-LC32" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-manualpicker-js-LC33" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-manualpicker-js-LC34" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">function</span> <span class="pl-en">handleBlur</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-manualpicker-js-LC35" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">onChange</span><span class="pl-kos">(</span><span class="pl-s1">proposedFocalPoint</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="file-manualpicker-js-LC36" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L37" class="blob-num js-line-number" data-line-number="37"></td>
        <td id="file-manualpicker-js-LC37" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L38" class="blob-num js-line-number" data-line-number="38"></td>
        <td id="file-manualpicker-js-LC38" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">return</span> <span class="pl-kos">(</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L39" class="blob-num js-line-number" data-line-number="39"></td>
        <td id="file-manualpicker-js-LC39" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">&lt;</span><span class="pl-ent">a</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L40" class="blob-num js-line-number" data-line-number="40"></td>
        <td id="file-manualpicker-js-LC40" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">className</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">classList</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L41" class="blob-num js-line-number" data-line-number="41"></td>
        <td id="file-manualpicker-js-LC41" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">onFocus</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-s1">setIsFocused</span><span class="pl-kos">(</span><span class="pl-c1">true</span><span class="pl-kos">)</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L42" class="blob-num js-line-number" data-line-number="42"></td>
        <td id="file-manualpicker-js-LC42" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">href</span><span class="pl-c1">=</span><span class="pl-s">"#"</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L43" class="blob-num js-line-number" data-line-number="43"></td>
        <td id="file-manualpicker-js-LC43" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">onClick</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">e</span> <span class="pl-c1">=&gt;</span> <span class="pl-s1">e</span><span class="pl-kos">.</span><span class="pl-en">preventDefault</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L44" class="blob-num js-line-number" data-line-number="44"></td>
        <td id="file-manualpicker-js-LC44" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">data-testid</span><span class="pl-c1">=</span><span class="pl-s">"manual-picker"</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L45" class="blob-num js-line-number" data-line-number="45"></td>
        <td id="file-manualpicker-js-LC45" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L46" class="blob-num js-line-number" data-line-number="46"></td>
        <td id="file-manualpicker-js-LC46" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">&lt;</span><span class="pl-ent">span</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L47" class="blob-num js-line-number" data-line-number="47"></td>
        <td id="file-manualpicker-js-LC47" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">&lt;</span><span class="pl-ent">A11yLabel</span> <span class="pl-c1">htmlFor</span><span class="pl-c1">=</span><span class="pl-s">"x"</span><span class="pl-c1">&gt;</span>Horizontal %:<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-ent">A11yLabel</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L48" class="blob-num js-line-number" data-line-number="48"></td>
        <td id="file-manualpicker-js-LC48" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">&lt;</span><span class="pl-ent">A11yInput</span> <span class="pl-c1">name</span><span class="pl-c1">=</span><span class="pl-s">"x"</span> <span class="pl-c1">value</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">x</span><span class="pl-kos">}</span> <span class="pl-c1">onChange</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">handleChange</span><span class="pl-kos">}</span> <span class="pl-c1">onBlur</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">handleBlur</span><span class="pl-kos">}</span> <span class="pl-c1">/</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L49" class="blob-num js-line-number" data-line-number="49"></td>
        <td id="file-manualpicker-js-LC49" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-ent">span</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L50" class="blob-num js-line-number" data-line-number="50"></td>
        <td id="file-manualpicker-js-LC50" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">&lt;</span><span class="pl-ent">span</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L51" class="blob-num js-line-number" data-line-number="51"></td>
        <td id="file-manualpicker-js-LC51" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">&lt;</span><span class="pl-ent">A11yLabel</span> <span class="pl-c1">htmlFor</span><span class="pl-c1">=</span><span class="pl-s">"y"</span><span class="pl-c1">&gt;</span>Vertical %:<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-ent">A11yLabel</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L52" class="blob-num js-line-number" data-line-number="52"></td>
        <td id="file-manualpicker-js-LC52" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">&lt;</span><span class="pl-ent">A11yInput</span> <span class="pl-c1">name</span><span class="pl-c1">=</span><span class="pl-s">"y"</span> <span class="pl-c1">value</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">y</span><span class="pl-kos">}</span> <span class="pl-c1">onChange</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">handleChange</span><span class="pl-kos">}</span> <span class="pl-c1">onBlur</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">handleBlur</span><span class="pl-kos">}</span> <span class="pl-c1">/</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L53" class="blob-num js-line-number" data-line-number="53"></td>
        <td id="file-manualpicker-js-LC53" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-ent">span</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L54" class="blob-num js-line-number" data-line-number="54"></td>
        <td id="file-manualpicker-js-LC54" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-ent">a</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L55" class="blob-num js-line-number" data-line-number="55"></td>
        <td id="file-manualpicker-js-LC55" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-manualpicker-js-L56" class="blob-num js-line-number" data-line-number="56"></td>
        <td id="file-manualpicker-js-LC56" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">}</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/09dcf6d3e3458f41b69f9bbfaeb0fbe5/raw/364c0267b1305c07767b92ab330e8714722a3705/ManualPicker.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/09dcf6d3e3458f41b69f9bbfaeb0fbe5#file-manualpicker-js">ManualPicker.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="ZAeaVM">Inside this component, we make a copy of the <strong>focalPoint</strong> and store it in a local, mutable state. Then, we split the X and Y values and display them in two separate text inputs with labels describing what they represent: percentages of the horizontal and vertical focal point.</p>
<div id="W9rX1W"><video src="https://cdn.concert.io/debut-image-assets/assets/blog/a11y_focal_picker.mp4" loading="lazy" style="max-width: 100%; margin-bottom: 1em;" muted="" autoplay="" loop="" playsinline=""></video></div>
<p id="9UJCQD">When the user modifies the values and blurs away from the inputs, we format the values and propagate the changes up to the main focal point picker component.</p>
<p id="c3STI9">Since this is a duplicate form input for our picker, we don’t want to display this to users who are using a mouse. By default, we make the accessible picker visible only to screen readers using a CSS utility class.</p>
<p id="yDm6Gc">Then, we wrap the hidden picker with a focusable element — like a link — and add an <strong>onFocus</strong> listener. This way, when the user focuses into the element with their keyboard, we can automatically remove the CSS class hiding the accessible picker and make it visible and usable.</p>
<h2 id="kGmu9V">Building a zoom slider</h2>
<p id="91L23C">We need users to be able to zoom into their images to highlight a certain area.</p>
<p id="xaCO89">Inside our <strong>ImageEditor</strong> component, we add another new component called <strong>ZoomSlider</strong>.</p>
<p id="5Mwp3V">Similar to the FocalPointPicker, ZoomSlider accepts a current zoom value and a callback function.</p>
<div id="J1vBLq"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/3cd2598cf6d726231da2218d1966c85c.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966881" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-zoomslider-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-zoomslider-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-zoomslider-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> <span class="pl-v">Slider</span> <span class="pl-k">from</span> <span class="pl-s">'rc-slider'</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-zoomslider-js-LC2" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-zoomslider-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">ZOOM_MIN</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-zoomslider-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">ZOOM_MAX</span> <span class="pl-c1">=</span> <span class="pl-c1">3</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-zoomslider-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-k">const</span> <span class="pl-c1">ZOOM_STEP</span> <span class="pl-c1">=</span> <span class="pl-c1">0.01</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-zoomslider-js-LC6" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-zoomslider-js-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-k">export</span> <span class="pl-k">default</span> <span class="pl-k">function</span> <span class="pl-v">ZoomSlider</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-s1">onChange</span><span class="pl-kos">,</span> <span class="pl-s1">zoom</span> <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-zoomslider-js-LC8" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">return</span> <span class="pl-kos">(</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-zoomslider-js-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">&lt;</span><span class="pl-ent">div</span> <span class="pl-c1">className</span><span class="pl-c1">=</span><span class="pl-s">"mb-12"</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-zoomslider-js-LC10" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">&lt;</span><span class="pl-ent">h1</span> <span class="pl-c1">className</span><span class="pl-c1">=</span><span class="pl-s">"text-sm text-black font-medium"</span><span class="pl-c1">&gt;</span>Image zoom<span class="pl-c1">&lt;</span>/<span class="pl-ent">h1</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-zoomslider-js-LC11" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">&lt;</span><span class="pl-ent">div</span> <span class="pl-c1">className</span><span class="pl-c1">=</span><span class="pl-s">"w-auto px-2 py-2 mx-auto"</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-zoomslider-js-LC12" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">&lt;</span><span class="pl-ent">Slider</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-zoomslider-js-LC13" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">value</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">zoom</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-zoomslider-js-LC14" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">handleStyle</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-zoomslider-js-LC15" class="blob-code blob-code-inner js-file-line">            <span class="pl-c1">backgroundColor</span>: <span class="pl-s">'#02A8B2'</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-zoomslider-js-LC16" class="blob-code blob-code-inner js-file-line">            <span class="pl-c1">borderColor</span>: <span class="pl-s">'#02A8B2'</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-zoomslider-js-LC17" class="blob-code blob-code-inner js-file-line">          <span class="pl-kos">}</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-zoomslider-js-LC18" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">min</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-c1">ZOOM_MIN</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-zoomslider-js-LC19" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">max</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-c1">ZOOM_MAX</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-zoomslider-js-LC20" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">onChange</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-s1">onChange</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-zoomslider-js-LC21" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">trackStyle</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-zoomslider-js-LC22" class="blob-code blob-code-inner js-file-line">            <span class="pl-c1">backgroundColor</span>: <span class="pl-s">'#5FDCE3'</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-zoomslider-js-LC23" class="blob-code blob-code-inner js-file-line">          <span class="pl-kos">}</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-zoomslider-js-LC24" class="blob-code blob-code-inner js-file-line">          <span class="pl-c1">step</span><span class="pl-c1">=</span><span class="pl-kos">{</span><span class="pl-c1">ZOOM_STEP</span><span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-zoomslider-js-LC25" class="blob-code blob-code-inner js-file-line">        /<span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-zoomslider-js-LC26" class="blob-code blob-code-inner js-file-line">      <span class="pl-c1">&lt;</span>/<span class="pl-ent">div</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-zoomslider-js-LC27" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">&lt;</span>/<span class="pl-ent">div</span><span class="pl-c1">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-zoomslider-js-LC28" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-zoomslider-js-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-zoomslider-js-LC29" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">}</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/3cd2598cf6d726231da2218d1966c85c/raw/9c9eb8fb786ec56d15b16322287eb602de62b6a4/ZoomSlider.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/3cd2598cf6d726231da2218d1966c85c#file-zoomslider-js">ZoomSlider.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="amHlrg">We ended up using a third-party React component called <a href="https://github.com/schrodinger/rc-slider">rc-slider</a> because it had opinionated styles ready-to-use.</p>
<p id="mgj8Ru">When the user changes the zoom level with their mouse or their keyboard, we propagate the new zoom level up to the ImageEditor component, which handles updating the editable image hook.</p>
<h2 id="HIpaA2">Showing live previews within the ad</h2>
<p id="ksjf2I">All of these in-browser image editing features are nice, but they’re not very useful to someone building an ad if they can’t <strong>see the effects of their edits in real time</strong>.</p>
<p id="x6diL4">This was a bigger challenge than we expected, and it required an update to our ad rendering framework.</p>
<p id="ggBfDx">One possible solution is to keep generating a blob of the preview image, and instead of uploading it with a signed URL, we keep it in memory and display it in the ad.</p>
<p id="L4CSK9">The problem with this was that it’s very computationally expensive. We wanted a buttery-smooth editing experience, not a choppy one.</p>
<p id="F6gSrI">Thankfully, our pals on the Chorus team mentioned a <a href="https://product.voxmedia.com/2015/7/29/9069279/solving-complex-problems">blog post they wrote five (!!) years ago</a> about building their own image cropping preview tool</p>
<p id="cfuyx7">In this tool, they leveraged an SVG with an <strong>image</strong> tag to manipulate different cropping patterns in real time. We decided to give this a try within our ads.</p>
<p id="Mp9gGs">Inside our ad markup, next to the <strong>img</strong> tag holding the computed, static image, we add a new <strong>svg</strong> containing an <strong>image</strong> element:</p>
<div id="ayad1i"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/144d4a55fb43e2dab878aea26d167846.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966933" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-ad_format-html" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-html  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-ad_format-html-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-ad_format-html-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c">&lt;!-- Static background image --&gt;</span></td>
      </tr>
      <tr>
        <td id="file-ad_format-html-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-ad_format-html-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">&lt;</span><span class="pl-ent">section</span> <span class="pl-c1">class</span>="<span class="pl-s">ad__content--desktop is-editing__{{ desktop_background_image.isEditing }}</span>" <span class="pl-c1">style</span>="<span class="pl-s">background-image: url({{ desktop_background_image.value }});</span>"<span class="pl-kos">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-ad_format-html-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-ad_format-html-LC3" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">&lt;!-- Real-time editing preview --&gt;</span></td>
      </tr>
      <tr>
        <td id="file-ad_format-html-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-ad_format-html-LC4" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">&lt;</span><span class="pl-ent">svg</span> <span class="pl-c1">class</span>="<span class="pl-s">image-preview</span>" <span class="pl-c1">:view-box</span>="<span class="pl-s">{{ desktop_background_image.viewBox }}</span>" <span class="pl-c1">preserveAspectRatio</span>="<span class="pl-s">xMidYMid slice</span>"<span class="pl-kos">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-ad_format-html-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-ad_format-html-LC5" class="blob-code blob-code-inner js-file-line">    <span class="pl-kos">&lt;</span><span class="pl-ent">image</span> <span class="pl-c1">xlink:href</span>="<span class="pl-s">{{ desktop_background_image.originalUrl }}</span>" <span class="pl-c1">x</span>="<span class="pl-s">0</span>" <span class="pl-c1">y</span>="<span class="pl-s">0</span>" <span class="pl-c1">:width</span>="<span class="pl-s">{{ desktop_background_image.originalSize.width }}</span>" <span class="pl-c1">:height</span>="<span class="pl-s">{{ desktop_background_image.originalSize.height }}</span>" /&gt;</td>
      </tr>
      <tr>
        <td id="file-ad_format-html-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-ad_format-html-LC6" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">&lt;/</span><span class="pl-ent">svg</span><span class="pl-kos">&gt;</span></td>
      </tr>
      <tr>
        <td id="file-ad_format-html-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-ad_format-html-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">&lt;/</span><span class="pl-ent">section</span><span class="pl-kos">&gt;</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/144d4a55fb43e2dab878aea26d167846/raw/74c1a98f4981683c45c4a7056b7620ed108ca235/ad_format.html" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/144d4a55fb43e2dab878aea26d167846#file-ad_format-html">ad_format.html</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="VtuasB">The image element references the original, uncropped image URL. We set the width and height of the image element to the original width and height of the uploaded, uncropped image.</p>
<p id="b9C3IP">Then, we use the <strong>viewBox</strong> property of the SVG to represent the desired image, taking into account the user’s <strong>focalPoint</strong> and <strong>zoom</strong> inputs.</p>
<p id="cMsojm">How do we calculate these viewBox coordinates?</p>
<p id="97GTy6">Thankfully, we had already done quite a bit of math in this area (see <strong>getTransformCoordinates()</strong> above), so we felt good about rolling up our sleeves to make this work, too.</p>
<p id="vKaukA">As it turns out, the logic required for providing viewBox coordinates was the <strong>inverse of the logic</strong> required for providing canvas cropping coordinates: instead of moving and stretching a <em>picture</em> to fit inside a frame, we needed to move and stretch the <em>frame</em> to display a portion of the picture.</p>
<div id="jNQ4Vc"><video src="https://cdn.concert.io/debut-image-assets/assets/blog/animate_frame.mp4" loading="lazy" style="max-width: 100%; margin-bottom: 1em;" muted="" autoplay="" loop="" playsinline=""></video></div>
<p id="fmbuIK">We start by adding a new <strong>getViewBoxCoordinates()</strong> function to our library: </p>
<div id="woCUKO"><script src="./Building an in-browser image editor with React - Vox Product Blog_files/af5c059762e5cdd57374b79f5c4b6a50.js"></script><link rel="stylesheet" href="./Building an in-browser image editor with React - Vox Product Blog_files/gist-embed-4e64bbf96c31ed6c9ee61f08cea01836.css"><div id="gist105966942" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-getviewboxcoordinates-js" class="file my-2">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-getviewboxcoordinates-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-getviewboxcoordinates-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c">/**</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-getviewboxcoordinates-js-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> * Get viewBox coordinates suitable for rendering an image inside an SVG.</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-getviewboxcoordinates-js-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> * In many ways, the viewBox approach is the inverse of the transformCoordinates approach:</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-getviewboxcoordinates-js-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> * The SVG viewBox acts as a frame: `left top width height`. You change the coordinates the</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-getviewboxcoordinates-js-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> * frame for which you want to focus on an image. To handle zoom, you simply shrink the frame</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-getviewboxcoordinates-js-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> * and adjust its coordinates.</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-getviewboxcoordinates-js-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-c"> */</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-getviewboxcoordinates-js-LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-k">export</span> <span class="pl-k">function</span> <span class="pl-en">getViewBoxCoordinates</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-s1">inputDimensions</span><span class="pl-kos">,</span> <span class="pl-s1">outputDimensions</span><span class="pl-kos">,</span> <span class="pl-s1">focalPoint</span><span class="pl-kos">,</span> <span class="pl-s1">zoom</span> <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-getviewboxcoordinates-js-LC9" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Find out, in natural pixels, the desired visual center of the original image</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-getviewboxcoordinates-js-LC10" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">idealCenter</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-getviewboxcoordinates-js-LC11" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">x</span>: <span class="pl-s1">inputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span> * <span class="pl-kos">(</span><span class="pl-s1">focalPoint</span><span class="pl-kos">.</span><span class="pl-c1">x</span> / <span class="pl-c1">100</span><span class="pl-kos">)</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-getviewboxcoordinates-js-LC12" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">y</span>: <span class="pl-s1">inputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span> * <span class="pl-kos">(</span><span class="pl-s1">focalPoint</span><span class="pl-kos">.</span><span class="pl-c1">y</span> / <span class="pl-c1">100</span><span class="pl-kos">)</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-getviewboxcoordinates-js-LC13" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-getviewboxcoordinates-js-LC14" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-getviewboxcoordinates-js-LC15" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Determine how much we need to scale the ouput image to fit the input constraints.</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-getviewboxcoordinates-js-LC16" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">scale</span> <span class="pl-c1">=</span> <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-getviewboxcoordinates-js-LC17" class="blob-code blob-code-inner js-file-line">    <span class="pl-s1">inputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span> / <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-getviewboxcoordinates-js-LC18" class="blob-code blob-code-inner js-file-line">    <span class="pl-s1">inputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span> / <span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-getviewboxcoordinates-js-LC19" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-getviewboxcoordinates-js-LC20" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-getviewboxcoordinates-js-LC21" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Factor in both `scale` and `zoom` to find out how large our "frame" needs to be</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-getviewboxcoordinates-js-LC22" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">width</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span> * <span class="pl-s1">scale</span><span class="pl-kos">)</span> / <span class="pl-s1">zoom</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-getviewboxcoordinates-js-LC23" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">height</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-s1">outputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span> * <span class="pl-s1">scale</span><span class="pl-kos">)</span> / <span class="pl-s1">zoom</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-getviewboxcoordinates-js-LC24" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-getviewboxcoordinates-js-LC25" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// Get the ideal top and left coordinates, and then turn them into realistic</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-getviewboxcoordinates-js-LC26" class="blob-code blob-code-inner js-file-line">  <span class="pl-c">// coordinates so we don't run out of "image" to show.</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-getviewboxcoordinates-js-LC27" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">idealTop</span> <span class="pl-c1">=</span> <span class="pl-s1">idealCenter</span><span class="pl-kos">.</span><span class="pl-c1">y</span> <span class="pl-c1">-</span> <span class="pl-s1">height</span> / <span class="pl-c1">2</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-getviewboxcoordinates-js-LC28" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">idealLeft</span> <span class="pl-c1">=</span> <span class="pl-s1">idealCenter</span><span class="pl-kos">.</span><span class="pl-c1">x</span> <span class="pl-c1">-</span> <span class="pl-s1">width</span> / <span class="pl-c1">2</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-getviewboxcoordinates-js-LC29" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-getviewboxcoordinates-js-LC30" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">maxTop</span> <span class="pl-c1">=</span> <span class="pl-s1">inputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">height</span> <span class="pl-c1">-</span> <span class="pl-s1">height</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-getviewboxcoordinates-js-LC31" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">maxLeft</span> <span class="pl-c1">=</span> <span class="pl-s1">inputDimensions</span><span class="pl-kos">.</span><span class="pl-c1">width</span> <span class="pl-c1">-</span> <span class="pl-s1">width</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-getviewboxcoordinates-js-LC32" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-getviewboxcoordinates-js-LC33" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">top</span> <span class="pl-c1">=</span> <span class="pl-en">clamp</span><span class="pl-kos">(</span><span class="pl-s1">idealTop</span><span class="pl-kos">,</span> <span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-s1">maxTop</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-getviewboxcoordinates-js-LC34" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">const</span> <span class="pl-s1">left</span> <span class="pl-c1">=</span> <span class="pl-en">clamp</span><span class="pl-kos">(</span><span class="pl-s1">idealLeft</span><span class="pl-kos">,</span> <span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-s1">maxLeft</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-getviewboxcoordinates-js-LC35" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="file-getviewboxcoordinates-js-LC36" class="blob-code blob-code-inner js-file-line">  <span class="pl-k">return</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L37" class="blob-num js-line-number" data-line-number="37"></td>
        <td id="file-getviewboxcoordinates-js-LC37" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">top</span>: <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">floor</span><span class="pl-kos">(</span><span class="pl-s1">top</span><span class="pl-kos">)</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L38" class="blob-num js-line-number" data-line-number="38"></td>
        <td id="file-getviewboxcoordinates-js-LC38" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">left</span>: <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">floor</span><span class="pl-kos">(</span><span class="pl-s1">left</span><span class="pl-kos">)</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L39" class="blob-num js-line-number" data-line-number="39"></td>
        <td id="file-getviewboxcoordinates-js-LC39" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">width</span>: <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">floor</span><span class="pl-kos">(</span><span class="pl-s1">width</span><span class="pl-kos">)</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L40" class="blob-num js-line-number" data-line-number="40"></td>
        <td id="file-getviewboxcoordinates-js-LC40" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">height</span>: <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">floor</span><span class="pl-kos">(</span><span class="pl-s1">height</span><span class="pl-kos">)</span><span class="pl-kos">,</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L41" class="blob-num js-line-number" data-line-number="41"></td>
        <td id="file-getviewboxcoordinates-js-LC41" class="blob-code blob-code-inner js-file-line">  <span class="pl-kos">}</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-getviewboxcoordinates-js-L42" class="blob-num js-line-number" data-line-number="42"></td>
        <td id="file-getviewboxcoordinates-js-LC42" class="blob-code blob-code-inner js-file-line"><span class="pl-kos">}</span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/jplhomer/af5c059762e5cdd57374b79f5c4b6a50/raw/4cf7b0776cd57ec7d0a40f8502c85b13558d77de/getViewBoxCoordinates.js" style="float:right">view raw</a>
        <a href="https://gist.github.com/jplhomer/af5c059762e5cdd57374b79f5c4b6a50#file-getviewboxcoordinates-js">getViewBoxCoordinates.js</a>
        hosted with ❤ by <a href="https://github.com/">GitHub</a>
      </div>
    </div>
</div>
</div>
<p id="0VrkQg">Let’s break this down.</p>
<p id="mOv7aV">Similar to getTransformCoordinates(), we accept the original image dimensions, the desired image output dimensions, a focalPoint and a zoom.</p>
<p id="7yI3an">This time, we start by defining the ideal visual center of the <strong>input image</strong> (as opposed to the output image, like we do when drawing on a canvas).</p>
<p id="q49TJH">Then, we determine how much we need to scale the frame to cover the entire image (using Math.min instead of Math.max this time).</p>
<p id="RADtXa">We determine the width and height of the “frame” by factoring in the scale from the previous step as well as any user-provided zoom input.</p>
<p id="W5vUGg">From there, we calculate the ideal top and left coordinates for the frame given the ideal focalPoint from the first step.</p>
<p id="JfTENF">Next, we figure out how much room we actually have to work with given the image dimensions - and we clamp the frame to ensure respect the bounds of the image.</p>
<p id="5XvdyQ">Finally, we return top, left, width and height values from the function, which get translated into viewBox coordinates.</p>
<p id="i9t59k">Our course, we want these values to be updated in real-time as the user drags their mouse or the zoom slider. This could mean <strong>a lot</strong> of events, and we certainly don’t want to make a server round trip for each of these preview values</p>
<p id="lL7KIi">Instead, when the user is in live-editing mode, we store these preview values in a separate mutable asset store for the current ad which lives in-memory</p>
<p id="Efozy3">These preview values are sent over postMessage to our desktop and mobile ad iframes, which know to update the ad markup with the latest inputs.</p>
<p id="rYkJYy">Finally, we show and hide the SVG preview component within our ad markup using CSS based on whether the user is in Edit Mode for an image.</p>
<p id="ssOzoT">Once the user presses <strong>Cancel</strong> or <strong>Save</strong>, we exit Edit Mode, and the SVG component is hidden. The ad reverts back to using the static version of the image, hosted on the CDN.</p>
<p id="DmAY7V">Because we’ve encapsulated the image editing logic into a hook, and each component within our image field (ImageEditor, FocalPointPicker, ZoomSlider) is composable, it means we can re-use this functionality across multiple fields in our creative builder: desktop background image, mobile background image, video thumbnail, and more.</p>
<div class="c-wide-block"><div id="8GpWeF"><video src="https://cdn.concert.io/debut-image-assets/assets/blog/editing_thumbnail_demo.mp4" loading="lazy" style="max-width: 100%; margin-bottom: 1em;" muted="" autoplay="" loop="" playsinline=""></video></div></div>
<p id="mEyuFX">The markup in the ad itself is also minimal, so it’s easy to copy/paste any place where we display a static image within the ad</p>
<hr class="p-entry-hr" id="Pb3xZd">
<p id="7a6X1v">I really enjoyed building out this complex feature with the Concert Platforms team. It was truly a team effort — most engineers have contributed to the code you see above in some way or another. </p>
<p id="kXi5pA">This entire image editing concept would not exist if it hadn’t come from the minds of our product and design team, either.</p>
<p id="tOTIgT"><strong>Be sure to check out </strong><a href="https://admanager.concert.io/"><strong>Concert Ad Manager</strong></a>! It’s free to create an account, draft up a new ad and start playing with the in-browser image editing tools described above.</p>
<p id="45D0l7"></p>
<p id="6qW02g"></p>
  
</div>



<div class="u-hidden-text" id="formatter-datter" data-cid="site/entry_formatter-1615485689_5673_6912" data-cdata="{&quot;svg_hr_illustration&quot;:&quot;&quot;}">
  
</div>







  </main>
  <div class="l-segment ad__athena_internal">
  </div>

</div>



  <div class="l-wrapper outbrain-container">
    
  </div>

<div class="l-wrapper">
  <div class="l-sidebar-fixed l-segment">
    <div class="l-col__main">
      
      


    </div>
    <div class="l-col__sidebar" id="comments-sidebar" data-analytics-placement="sidebar">
      
    </div>
  </div>
</div>




    <footer class="c-footer c-footer__corporate" role="contentinfo" data-cid="site/global_footer-1615482701_2402_287609" data-cdata="{}">
  <div class="l-wrapper l-sidebar-fixed">
    <div class="l-col__sidebar">
      <ul class="c-footer__social u-list-inline">
        <li><a rel="nofollow" href="https://www.facebook.com/voxmediainc"><span class="u-hidden-text">Vox Media on Facebook</span><svg role="img" class="p-svg-icon"><use xlink:href="#icon-facebook"></use></svg></a></li>
        <li><a rel="nofollow" href="https://twitter.com/voxmediainc"><span class="u-hidden-text">Vox Media on Twitter</span><svg role="img" class="p-svg-icon"><use xlink:href="#icon-twitter"></use></svg></a></li>
        <li><a rel="nofollow" href="https://www.linkedin.com/company/vox-media-inc-"><span class="u-hidden-text">Vox Media on Linked In</span><svg role="img" class="p-svg-icon"><use xlink:href="#icon-linkedin"></use></svg></a></li>
      </ul>

      <ul class="c-footer__links">
        <li><a href="https://www.voxmedia.com/legal/privacy-notice">Privacy Notice</a></li>
        <li><a href="https://www.voxmedia.com/legal/cookie-policy">Cookie Policy</a></li>
        <li><a href="https://product.voxmedia.com/contact#donotsell">Do Not Sell My Personal Info</a></li>
        <li><a href="https://www.voxmedia.com/legal/terms-of-use">Terms of Use</a></li>
        <li><a href="https://www.voxmedia.com/pages/security">Security</a></li>
        <li><a href="https://www.voxmedia.com/legal/accessibility">Accessibility</a></li>
      </ul>
    </div>
  </div>
<div class="c-footer__subfoot">
  <div class="l-wrapper l-sidebar-fixed">
    <div class="c-footer__copyright l-col__main">
      © 2021 Vox Media, LLC. All rights reserved.
      
    </div>
    <div class="l-col__sidebar">
      <a rel="nofollow" class="c-footer__contact" href="https://product.voxmedia.com/contact">Contact Us</a>
    </div>
  </div>
</div>
</footer>

    <div class="c-tab-bar tab-bar-fixed" data-cid="site/tab_bar/index-1615485689_6436_6914" data-cdata="{}">
  <a href="https://product.voxmedia.com/" class="c-tab-bar__logo">
    
      
  <!--?xml version="1.0" encoding="utf-8"?-->
<!-- Generator: Adobe Illustrator 24.0.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 618.5 132.5" enable-background="new 0 0 618.5 132.5" xml:space="preserve">
<path fill="#0A2E28" d="M547.5,117.2c-10.2,0-17.9-7.2-17.9-16.7c0-10,7-16.7,17.9-16.7c5.2,0,10.1,1.8,13.5,4.8l0.4-0.2V71.4
	c-4.3-1.8-9.3-2.8-14.3-2.8c-19.9,0-33.9,13.4-33.9,31.9c0,17.9,14.7,31.9,33.9,31.9c5,0,10-1,14.3-2.8v-17l-0.5-0.2
	C557.5,115.4,552.6,117.2,547.5,117.2"></path>
<path fill="#0A2E28" d="M346.8,68.6c-17.3,0-31.3,14-31.3,31.3c0,17.3,14,31.3,31.3,31.3c17.3,0,31.3-14,31.3-31.3
	C378.1,82.6,364.1,68.6,346.8,68.6 M346.8,115.4c-8.2,0-14.8-6.9-14.8-15.5s6.6-15.5,14.8-15.5c8.1,0,14.8,6.9,14.8,15.5
	S355,115.4,346.8,115.4"></path>
<path fill="#0A2E28" d="M411.2,69.8h-25.3V130h25.3c16.6,0,30.1-13.5,30.1-30.1C441.3,83.3,427.8,69.8,411.2,69.8 M409.8,114.8h-7
	V85.1h7c8.2,0,14.9,6.7,14.9,14.8C424.7,108.1,418,114.8,409.8,114.8"></path>
<path fill="#0A2E28" d="M225.3,69.8h-32V130h16.8v-16.4h15.2c12.3,0,22.2-8.4,22.2-21.9C247.5,78.2,237.6,69.8,225.3,69.8
	 M224.4,98.7h-14.3V85.1h14.3c3.5,0,6.7,2.6,6.7,6.8C231.1,96.1,227.8,98.7,224.4,98.7"></path>
<polygon fill="#0A2E28" points="618.5,70.3 569.2,70.3 569.2,85.6 585.5,85.6 585.5,130.4 602.3,130.4 602.3,85.6 618.5,85.6 "></polygon>
<g>
	<path fill="#0A2E28" d="M94.6,0C77.3,0,63.3,14,63.3,31.3c0,17.3,14,31.3,31.3,31.3c17.3,0,31.3-14,31.3-31.3
		C125.9,14,111.9,0,94.6,0 M94.6,46.8c-8.2,0-14.8-6.9-14.8-15.5c0-8.6,6.6-15.5,14.8-15.5s14.8,6.9,14.8,15.5
		C109.4,39.8,102.8,46.8,94.6,46.8"></path>
</g>
<polygon fill="#0A2E28" points="0,1.2 31.7,62.3 63.3,1.2 44.9,1.2 31.8,26.7 18.8,1.2 "></polygon>
<rect x="389.2" y="1.2" fill="#0A2E28" width="16.8" height="60.2"></rect>
<polygon fill="#0A2E28" points="317.4,16.3 317.4,1.2 271.3,1.2 271.3,61.4 317.4,61.4 317.4,46.3 288.8,46.3 288.8,38.6 
	315.3,38.6 315.3,24.1 288.8,24.1 288.8,16.3 "></polygon>
<polygon fill="#0A2E28" points="317.4,16.3 317.4,1.2 271.3,1.2 271.3,61.4 317.4,61.4 317.4,46.3 288.8,46.3 288.8,38.6 
	315.3,38.6 315.3,24.1 288.8,24.1 288.8,16.3 "></polygon>
<g>
	<path fill="#0A2E28" d="M351.1,1.2h-25.3v60.2h25.3c16.6,0,30.2-13.5,30.2-30.1C381.3,14.7,367.8,1.2,351.1,1.2 M349.8,46.2h-7
		V16.5h7c8.2,0,14.9,6.7,14.9,14.8C364.7,39.5,358,46.2,349.8,46.2"></path>
</g>
<polygon fill="#0A2E28" points="244.5,27.9 244.5,61.4 261.5,61.4 261.5,1.2 240.5,1.2 227.4,26.3 214.4,1.2 193.4,1.2 193.4,61.4 
	210,61.4 210,27.9 227.3,61.1 "></polygon>
<polygon fill="#0A2E28" points="155,45.6 165.6,61.4 185.5,61.4 165,31.3 185.3,1.2 165.8,1.2 155.2,17.1 155.4,17.1 144.8,1.2 
	125.1,1.2 145.5,31.3 124.9,61.4 144.4,61.4 "></polygon>
<path fill="#0A2E28" d="M435.4,40.5l7.5-21.5l7.5,21.5H435.4z M452.9,1.2h-19.7l-21.7,60.2h16.8l2.6-7.7h23.9l2.6,7.7h17.2
	L452.9,1.2z"></path>
<path fill="#0A2E28" d="M488.7,70.3V105c0,6.7-4.7,11.5-11.5,11.5c-6.7,0-11.5-4.7-11.5-11.5V70.3h-16.7V105
	c0,15.1,10.5,26.6,28.1,26.6c17.6,0,28.2-11.5,28.2-26.6V70.3H488.7z"></path>
<g>
	<path fill="#0A2E28" d="M299.2,108.2c5.8-3.6,9.7-9.8,9.7-17.2c0-10.7-8.1-21.1-22.3-21.1h-31.4V130h16.8v-18.7h10.7l8.8,18.7h18.2
		L299.2,108.2z M286.9,97.6h-14.8V84.9h14.4c4.5,0,6.2,3.7,6.2,6.2C292.7,93.9,290.5,97.6,286.9,97.6"></path>
</g>
</svg>



    
    
  </a>
  
    
<div class="c-social-buttons" data-analytics-placement="sticky" aria-labelledby="heading-label--xr7ajv2j" data-cid="site/social_buttons_list-1615485689_5197_6913" data-cdata="{&quot;entry_id&quot;:21284263,&quot;services&quot;:[&quot;twitter&quot;,&quot;facebook&quot;],&quot;base_url&quot;:&quot;https://product.voxmedia.com/2020/10/23/21520222/building-an-in-browser-image-editor-with-react&quot;}">
  <h2 class="sr-only" id="heading-label--xr7ajv2j">Share this story</h2>
  
    <ul>
      
        <li>
          <a class="c-social-buttons__item c-social-buttons__twitter" href="https://twitter.com/intent/tweet?counturl=https%3A%2F%2Fproduct.voxmedia.com%2F2020%2F10%2F23%2F21520222%2Fbuilding-an-in-browser-image-editor-with-react&amp;text=Building+an+in-browser+image+editor+with+React&amp;url=https%3A%2F%2Fproduct.voxmedia.com%2F2020%2F10%2F23%2F21520222%2Fbuilding-an-in-browser-image-editor-with-react&amp;via=voxproduct" data-analytics-social="twitter">
            <svg role="img" class="p-svg-icon c-social-buttons__svg"><use xlink:href="#icon-twitter"></use></svg>
            <span class="c-social-buttons__text">
              Twitter
            </span>
          <span class="sr-only"> (opens in new window)</span></a>
        </li>
      
        <li>
          <a class="c-social-buttons__item c-social-buttons__facebook" href="https://www.facebook.com/sharer/sharer.php?text=Building+an+in-browser+image+editor+with+React&amp;u=https%3A%2F%2Fproduct.voxmedia.com%2F2020%2F10%2F23%2F21520222%2Fbuilding-an-in-browser-image-editor-with-react" data-analytics-social="facebook">
            <svg role="img" class="p-svg-icon c-social-buttons__svg"><use xlink:href="#icon-facebook"></use></svg>
            <span class="c-social-buttons__text">
              Facebook
            </span>
          <span class="sr-only"> (opens in new window)</span></a>
        </li>
      
      
    </ul>
  
</div>

  
  <span class="c-tab-bar__sponsorship"></span>
  
  
</div>

  </div><script type="text/javascript" id="">(function(){var a=window._fbq||(window._fbq=[]);if(!a.loaded){var b=document.createElement("script");b.async=!0;b.src="https://connect.facebook.net/en_US/fbds.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);a.loaded=!0}a.push(["addPixelId","594981607301768"])})();window._fbq=window._fbq||[];window._fbq.push(["track","PixelInitialized",{}]);window._fbq.push(["track","6026192431231",{value:"1.00",currency:"USD"}]);</script>
<noscript><img height="1" width="1" alt="" style="display:none" src="https://www.facebook.com/tr?id=594981607301768&amp;ev=PixelInitialized"></noscript><script type="text/javascript" id="">var _comscore=_comscore||[];_comscore.push({c1:"2",c2:"7976662"});(function(){var a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.async=!0;a.src="https://sb.scorecardresearch.com/beacon.js";b.parentNode.insertBefore(a,b)})();</script>
<noscript>
  <img src="https://sb.scorecardresearch.com/p?c1=2&amp;c2=7976662&amp;cv=2.0&amp;cj=1">
</noscript>

      <script src="./Building an in-browser image editor with React - Vox Product Blog_files/chorus-45a5379b6bb9fb7c7e01.js" async="async" data-privacy-no-concern="true" integrity="sha256-OzKNm/WpXqEw7FuNQXdjeqAklFnddphVXgaQHrBmAS0= sha384-ro4nDugXT9dcx60K4Ia27MJrr34i1/T0+HfU0zckD7+rJ0UzTZ9Dg8eJhFihNugj" crossorigin="anonymous"></script>
  

      
      <!-- Phonograph -->

    <script src="./Building an in-browser image editor with React - Vox Product Blog_files/pickup.js" id="phonograph-pickup" async="async" defer="defer"></script>

    <script>
      var phonographEvents = phonographEvents || [];
      (function() {
        var continent = document.cookie.match(/_chorus_geoip_continent=([^;]+)/i) || [];
        var data = { 'Page Title':document.title, 'GA Track Prefix':'t1.', 'geoip_continent': continent[1] };
        var dataLayer = window.dataLayer || [];
        dataLayer
          .filter(function(m) { return !!m['Network'] })
          .forEach(function(m) {
            Object.keys(m).forEach(function(k) { data[k] = m[k] });
          });

        var userid = data['Logged in Status'];
        data['User ID'] = (typeof userid === 'number') ? userid : null;
        phonographEvents.push(['pageload', data]);
      })();
    </script>
  <!-- End Phonograph -->


    
    
    
    



<script src="./Building an in-browser image editor with React - Vox Product Blog_files/adsct" type="text/javascript"></script></body></html>